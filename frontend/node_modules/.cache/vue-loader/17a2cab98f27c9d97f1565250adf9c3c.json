{"remainingRequest":"/home/knr/Documents/InteractQuickFill/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/knr/Documents/InteractQuickFill/frontend/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/knr/Documents/InteractQuickFill/frontend/src/App.vue","mtime":1633462194000},{"path":"/home/knr/Documents/InteractQuickFill/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/knr/Documents/InteractQuickFill/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/knr/Documents/InteractQuickFill/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/knr/Documents/InteractQuickFill/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBWdWUgZnJvbSAidnVlIjsKaW1wb3J0IHsgU3ByZWFkc2hlZXRQbHVnaW4sZ2V0UmFuZ2VBZGRyZXNzfSBmcm9tICJAc3luY2Z1c2lvbi9lajItdnVlLXNwcmVhZHNoZWV0IjsKaW1wb3J0IHsgR3JpZFBsdWdpbiwgQ29udGV4dE1lbnUsIFBhZ2UgfSBmcm9tICdAc3luY2Z1c2lvbi9lajItdnVlLWdyaWRzJzsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IFZ1ZVN3ZWV0YWxlcnQyIGZyb20gJ3Z1ZS1zd2VldGFsZXJ0Mic7CgoKCgoKVnVlLnVzZShTcHJlYWRzaGVldFBsdWdpbik7IApWdWUudXNlKFZ1ZVN3ZWV0YWxlcnQyKTsgLyogcG91ciBsYSBnZXN0aW9uIGRlcyBtb2RhbHMgKi8KVnVlLnVzZShHcmlkUGx1Z2luKTsKCgoKCgpleHBvcnQgZGVmYXVsdHsKICBuYW1lOiAnQXBwJywKICBkYXRhIDogIGZ1bmN0aW9uKCl7ICAvKiBsYSBmb25jdGlvbiBkYXRhIHJldG91cm5lIGxlcyB2YXJpYWJsZXMgZHluYW1pcXVlICh2YXJpYWJsZXMgcmVhY3RpdmVzKSAqLwogICAgICByZXR1cm4gewoKCiAgICAgICAgICAgIGlkcG9yZ3JhbW1lIDogWwoKICAgICAgICAgICAgXSwgLyogTGUgbnVtZXJvIGRlIHByb2dyYW1tZSBjaG9pc2kuICovCgogICAgICAgICAgICBsZW5vZnByb2dyYW1tZXMgOiBbCgogICAgICAgICAgICBdLCAvKiBOb21icmUgZGUgcHJvZ3JhbW1lcyBvYnRlbnVlcyBhcHJlcyBleGVjdXRpb24gZGUgZmxhc2hmaWxsIG91IHF1aWNrZmlsbCAqLwoKICAgICAgICAgICAgRWxlbWVudFRvVXBkYXRlIDogMCwgIC8qIHZhcmlhYmxlIGRlIGNvbXB0YWdlIGRlcyBibG9jczogYnZsb2MgYjEsIGIyIC4uLi4uICovCgogICAgICAgICAgICBsaXN0ZUVsZW1lbnRUb3VwZGF0ZTpbCgoKICAgICAgICAgICAgXSwgLyogbGlzdGUgZGVzIGV2b2x1dGlvbiBkZXMgaWQgZGVzIGJsb2NzKi8KCiAgICAgICAgICAgIENob2lzZVF1aWNrRmlsbCA6IHsKICAgICAgICAgICAgICBjaG9peCA6IDEKICAgICAgICAgICAgfSwgLypwZXJtZXQgZGUgZGV0ZXJtaW5lciBxdWVsIHZhcmlhbnRlIGRlIFF1aWNrRmlsbCB1dGlsaXPDqSAqLwoKICAgICAgICAgICAgaWRzb3J0aWVzZWxlY3Rpb25uZXIgOnsKICAgICAgICAgICAgICAgIGlkOjEKICAgICAgICAgICAgfSwgLyogSWRlbnRpZmllciBsJ2V4ZW1wbGUgc3VyIGxlcXVlbCBvbiBjcmVlIGxlIGJsb2MqLwoKICAgICAgICAgICAgSW5kaWNlQ29sb25lU29ydGllOnsKICAgICAgICAgICAgICAgIGlkOjEKICAgICAgICAgICAgfSwvKkNvbnRpZW50IGxlIG51bWVybyBkZSBsYSBjb2xvbmUgZGUgc29ydGllKi8KCiAgICAgICAgICAgIGlkQ29sb25lVXRpbGlzZXI6ewoKICAgICAgICAgICAgICBpZDowCiAgICAgICAgICAgIH0sLyogQ29udGllbnQgaWQgZGUgbGEgY29sb25uZSBjb3VycmVudGUgKi8KCiAgICAgICAgICAgIExpc3RlRGVzUHJvZ3JhbW1lc1JldG91cm5lciA6IFsKCiAgICAgICAgICAgIF0sIC8qIENvbnRpZW50IGxhIGxpc3RlIGRlIHByb2dyYW1tZXMgcmV0b3VybmVyIHBhciBmbGFzaGZpbGwgb3UgcXVpY2tmaWxsbCAqLwoKCiAgICAgICAgICAgIExpc3RlRWxlbWVudHNFbnZveWVyUXVpY2tGaWxsOlsKCgoKICAgICAgICAgICAgXSwgIC8qIHRhYmxlYXUgY29udGVuYW50IGxlcyBkb27DqWVzIChibG9jIGRlIHNvcnRpZSArIGNvcnJlc3BvbmRhbmNlKSDDoCBlbnZveWVyIMOgIFF1aWNrRmlsbCAqLwoKCiAgICAgICAgICAgIExpc3RlRGVzU29ydGllc1F1aWNrRmlsbDpbCgoKCiAgICAgICAgICAgIF0sIC8qTGlzdGUgZGUgdG91dGVzIGxlcyBzb3J0aWVzIMOgIGVudm95ZXIgw6AgUXVpY2sgRmlsbCovCgogICAgICAgICAgICBMZXNFbnRyZWVRdWlja0ZpbGwgOgogICAgICAgICAgICBbCgoKICAgICAgICAgICAgXSwgLyogdGFibGVhdSBxdWkgc3RvY2tlIGxlcyBjaGFpbmVzIGQnZW50csOpZSBzaWdtYSBkZSBxdWlja2ZpbGwgKi8KICAgICAgICAgICAgCgogICAgICAgICAgICBMaXN0ZU9mQmxvY3M6IAogICAgICAgICAgICBbCgoKICAgICAgICAgICAgXSwgLyogY29udGllbnQgbGVzIGJsb2NzIGRlIGxhIGNoYWluZSBkZSBzb3J0aWUgKi8KCgogICAgICAgICAgICBjb250ZXh0TWVudUl0ZW1zOiAKICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB7dGV4dDogJ01ha2UgYSBibG9jJywgdGFyZ2V0OiAnLmUtY29udGVudCcsIGlkOiAnbWFrZWJsb2NrJ30sCiAgICAgICAgICAgICAgICB7dGV4dDogJ01ha2UgYSBjb25zdGFudCcsIHRhcmdldDogJy5lLWNvbnRlbnQnLCBpZDogJ21ha2Vjb25zdCd9LAogICAgICAKICAgICAgICAgICAgXSwgLyogQ29udGllbnQgbGVzIGl0ZW1zIGR1IG1lbnUgY29udGV4dHVlbCBkZSBscSBncmlkICovCgoKICAgICAgICAgICAgTGlzdGVPZklkT2ZDb3RleHRNZW51OgogICAgICAgICAgICBbCgogICAgICAgICAgICBdLCAvKiBDb250aWVudCBsZXMgaWRzIGRlcyBub3V2ZWF1IGl0ZW1zIGR1IG1lbnUgY29udGV4dHVlbCBjcsOpZSBwYXIgdXRpbGlzYXRpb24gZGVzIGl0ZW0gIm1ha2UgYSBibG9jIiwgIm1ha2UgYSBjb25zdGFudCIgKi8KCgoKICAgICAgICAgICAgTGlzdGVNZXNzYWdlc09mQ290ZXh0TWVudToKICAgICAgICAgICAgWwoKICAgICAgICAgICAgXSwgLyogQ29udGllbnQgbGVzIG1lc3NhZ2VzIGRlcyBub3V2ZWF1IGl0ZW1zIGR1IG1lbnUgY29udGV4dHVlbCBjcsOpZSBwYXIgdXRpbGlzYXRpb24gZGVzIGl0ZW0gIm1ha2UgYSBibG9jIiwgIm1ha2UgYSBjb25zdGFudCIgKi8KCgogICAgICAgICAgICBsaXN0ZVNvcnRpZXMgOiAKICAgICAgICAgICAgWwoKCiAgICAgICAgICAgIF0sIC8qIHRhYmxlYXUgY29udGVuYW50IGxlcyBjaGFpbmVzIGRlIHNvcnRpZXMgcyAqLwoKICAgICAgICAgICAgbGlzdGVFbnRyZXM6CiAgICAgICAgICAgIFsKCgogICAgICAgICAgICBdLCAvKiB0YWJsZWF1IGNvbnRlbmFudCBsZXMgY2hhaW5lcyBkJ2VudHLDqWUgc2lnbWEgcG91ciBmbGFzaEZpbGwgKi8KCiAgICAgICAgICAgIEluZGljZURlTGFDb2xvbm5lRGVTb3J0aWU6CiAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgaWQ6MQogICAgICAgICAgICB9LCAvKiBDb250aWVudCBpbmRpY2UgZGUgbGEgY29sb25uZSBkZSBzb3J0aWUgKi8KCiAgICAgICAgICAgIG9wZW5Vcmw6ICdodHRwczovL2VqMnNlcnZpY2VzLnN5bmNmdXNpb24uY29tL3Byb2R1Y3Rpb24vd2ViLXNlcnZpY2VzL2FwaS9zcHJlYWRzaGVldC9vcGVuJywKICAgICAgICAgICAgc2F2ZVVybDogJ2h0dHBzOi8vZWoyc2VydmljZXMuc3luY2Z1c2lvbi5jb20vcHJvZHVjdGlvbi93ZWItc2VydmljZXMvYXBpL3NwcmVhZHNoZWV0L3NhdmUnLAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICB9OwoKICB9LAoKICBtZXRob2RzOiAKICB7CgoKICAgIGNvbnRleHRNZW51T3BlbjpmdW5jdGlvbiAoYXJncykgCiAgICB7CgogICAgICB2YXIgZ3JpZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImUtZ3JpZCIpWzBdLmVqMl9pbnN0YW5jZXNbMF07CiAgICAgIHZhciB0aGF0ID0gIHRoaXM7CiAgICAgIHZhciBudW1lcm9JZENvbG9ubmUgPSAgYXJncy5yb3dJbmZvLmNlbGxJbmRleDsKICAgICAgdmFyIG51bWVyb0RlTGlnbmUgPSBhcmdzLnJvd0luZm8ucm93SW5kZXg7CgoKICAgICAgVnVlLnNldCh0aGF0LmlkQ29sb25lVXRpbGlzZXIsJ2lkJyxudW1lcm9JZENvbG9ubmUpOwogICAgICBWdWUuc2V0KHRoYXQuaWRzb3J0aWVzZWxlY3Rpb25uZXIsJ2lkJywgbnVtZXJvRGVMaWduZSk7CgoKCiAgICAgICAgICBpZihudW1lcm9JZENvbG9ubmUgPT0gdGhhdC5JbmRpY2VDb2xvbmVTb3J0aWUuaWQpCiAgICAgICAgICB7CgogICAgICAgICAgICAgIGdyaWQuY29udGV4dE1lbnVNb2R1bGUuY29udGV4dE1lbnUuc2hvd0l0ZW1zKFsnTWFrZSBhIGJsb2MnXSk7CiAgICAgICAgICAgICAgZ3JpZC5jb250ZXh0TWVudU1vZHVsZS5jb250ZXh0TWVudS5zaG93SXRlbXMoWydNYWtlIGEgY29uc3RhbnQnXSk7CgogICAgICAgICAgICAgIGlmKHRoYXQuTGlzdGVNZXNzYWdlc09mQ290ZXh0TWVudS5sZW5ndGggPiAwKQogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgIHRoYXQuTGlzdGVNZXNzYWdlc09mQ290ZXh0TWVudS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoKGl0ZW0udGV4dCAhPSAnTWFrZSBhIGJsb2MnKSAmJiAoaXRlbS50ZXh0ICE9ICdNYWtlIGEgY29uc3RhbnQnKSkKICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmlkLmNvbnRleHRNZW51TW9kdWxlLmNvbnRleHRNZW51LmhpZGVJdGVtcyhbaXRlbS50ZXh0XSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgoKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UKICAgICAgICAgIHsKICAgICAgICAgICAgZ3JpZC5jb250ZXh0TWVudU1vZHVsZS5jb250ZXh0TWVudS5oaWRlSXRlbXMoWydNYWtlIGEgYmxvYyddKTsKICAgICAgICAgICAgZ3JpZC5jb250ZXh0TWVudU1vZHVsZS5jb250ZXh0TWVudS5oaWRlSXRlbXMoWydNYWtlIGEgY29uc3RhbnQnXSk7CgogICAgICAgICAgICBpZih0aGF0Lkxpc3RlTWVzc2FnZXNPZkNvdGV4dE1lbnUubGVuZ3RoID4gMCkKICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgIHRoYXQuTGlzdGVNZXNzYWdlc09mQ290ZXh0TWVudS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoKGl0ZW0udGV4dCAhPSAnTWFrZSBhIGJsb2MnKSAmJiAoaXRlbS50ZXh0ICE9ICdNYWtlIGEgY29uc3RhbnQnKSAmJiAobnVtZXJvRGVMaWduZSA9PSBpdGVtLmlkbGlnbmUpKQogICAgICAgICAgICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmlkLmNvbnRleHRNZW51TW9kdWxlLmNvbnRleHRNZW51LnNob3dJdGVtcyhbaXRlbS50ZXh0XSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZC5jb250ZXh0TWVudU1vZHVsZS5jb250ZXh0TWVudS5oaWRlSXRlbXMoW2l0ZW0udGV4dF0pOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB9KTsKCgogICAgICAgICAgICB9CgoKCiAgICAgICAgICB9CiAgICAgICAgCiAgICB9LAoKCiAgICAgIHJvd1NlbGVjdGVkIDogZnVuY3Rpb24oYXJncykKICAgICAgewogICAgICAgIC8qIEdlc3Rpb24gZXQgYWZmaWNoYWdlIGR1IHByb2dyYW1tZSBjaG9pc2kgZW4gaW50ZXJmYWNlLiAqLwogICAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgICAgICAgICB2YXIgaW5kZXggPSBhcmdzLmRhdGEuSUQ7CiAgICAgICAgICAgICAgVnVlLnN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICc8c3Ryb25nPjx1PlByb2dyYW1tZSBheWFudCBJRCAnICsgaW5kZXggKyAnPC91Pjwvc3Ryb25nPicsCiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2luZm8nLAogICAgICAgICAgICAgICAgICAgIHdpZHRoOiA0MDAsCiAgICAgICAgICAgICAgICAgICAgaHRtbDoKICAgICAgICAgICAgICAgICAgICAnPHA+JyArIHRoYXQuTGlzdGVEZXNQcm9ncmFtbWVzUmV0b3VybmVyW2luZGV4XSArJzwvcD4nICwKCiAgICAgICAgICAgICAgICAgICAgc2hvd0Nsb3NlQnV0dG9uOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsCiAgICAgICAgICAgICAgICAgICAgZm9jdXNDb25maXJtOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDoKICAgICAgICAgICAgICAgICAgICAnPGkgY2xhc3M9ImZhIGZhLXRodW1icy11cCI+PC9pPiBHcmVhdCEnLAogICAgICAgICAgICAgIH0pOwoKICAgICAgfSwKCgoKCiAgICAgIEJhY2tUb3NoZWF0OiBmdW5jdGlvbigpCiAgICAgIHsKCiAgICAgICAgICAvKmdlc3Rpb24gZHUgYnV0dG9uIHJldG91ciAqLwogICAgICAgICAgdmFyIHRoYXQgPSB0aGlzOyAKCiAgICAgICAgICB2YXIgc3ByZWVkc2hlZXRjb21wb25lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic3ByZWVkc2hlZXRjb21wb25lbnQiKTsKICAgICAgICAgIHNwcmVlZHNoZWV0Y29tcG9uZW50LnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOwoKCiAgICAgICAgICB2YXIgZ3JpZEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZ3JpZEVsZW1lbnQiKTsKICAgICAgICAgIGdyaWRFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7IAoKCiAgICAgICAgICBPYmplY3QuYXNzaWduKHRoYXQuJGRhdGEsIHRoYXQuJG9wdGlvbnMuZGF0YSgpKTsKCgoKICAgICAgfSwKCiAgICAgIFZ1ZVByb2dyYW1DaG9peDogZnVuY3Rpb24oKSAKICAgICAgeyAgICAKICAgICAgICAgICAgICAvKkFmZmljaGFnZSBkdSBwcm9ncmFtbWUgZXhlY3V0w6kqLwogICAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgICAgICAgICB2YXIgaW5kZXggPSB0aGF0LmlkcG9yZ3JhbW1lLnNsaWNlKDAsIDEpOwogICAgICAgICAgICAgIFZ1ZS5zd2FsLmZpcmUoewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnPHN0cm9uZz48dT5Qcm9ncmFtbWUgZXhlY3V0w6k8L3U+PC9zdHJvbmc+JywKICAgICAgICAgICAgICAgICAgICBpY29uOiAnaW5mbycsCiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDQwMCwKICAgICAgICAgICAgICAgICAgICBodG1sOgogICAgICAgICAgICAgICAgICAgICc8cD4nICsgdGhhdC5MaXN0ZURlc1Byb2dyYW1tZXNSZXRvdXJuZXJbaW5kZXhbMF0udmFsdXNlXSArJzwvcD4nICwKCiAgICAgICAgICAgICAgICAgICAgc2hvd0Nsb3NlQnV0dG9uOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsCiAgICAgICAgICAgICAgICAgICAgZm9jdXNDb25maXJtOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDoKICAgICAgICAgICAgICAgICAgICAnPGkgY2xhc3M9ImZhIGZhLXRodW1icy11cCI+PC9pPiBHcmVhdCEnLAogICAgICAgICAgICAgIH0pOwogICAgICB9LAoKICAgICAgU2VuZERhdGFRdWlja0ZpbGwgOiBmdW5jdGlvbigpCiAgICAgIHsKCiAgICAgICAgICAgIC8qRW52b2llIGRlIGRvbm7DqWVzIMOgIFF1aWNrRmlsbCovCgogICAgICAgICAgICB2YXIgdGhhdCA9ICB0aGlzOwogICAgICAgICAgICB2YXIgbGlzdGVvZk9iamVjdEVsZW1lbnQgPSAgbmV3IEFycmF5KCk7CiAgICAgICAgICAgIHZhciBuZXdPYmplY3QgPSBuZXcgTWFwKCk7CiAgICAgICAgICAgIHZhciBncmlkMiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImUtZ3JpZCIpWzFdLmVqMl9pbnN0YW5jZXNbMF07CiAgICAgICAgICAgIHZhciByZXN1bHRjb21wb25lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicmVzdWx0YXRjb21wb25lbnQiKTsKICAgICAgICAgICAgCgoKICAgICAgICAgICAgaWYodGhhdC5DaG9pc2VRdWlja0ZpbGwuY2hvaXggPT0gMSkKICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gY2IoKSB7CgoKICAgICAgICAgICAgICAgICAgICAgIHZhciBqc29uVGV4dDEgPSBKU09OLnN0cmluZ2lmeShBcnJheS5mcm9tKHRoYXQubGlzdGVFbnRyZXMpKTsKICAgICAgICAgICAgICAgICAgICAgIHZhciBqc29uVGV4dDMgPSBKU09OLnN0cmluZ2lmeShBcnJheS5mcm9tKHRoYXQuTGlzdGVFbGVtZW50c0Vudm95ZXJRdWlja0ZpbGwpKTsKCiAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgYXhpb3MucG9zdCgiaHR0cDovL2xvY2FsaG9zdDo4MDAwL1F1aWNrRmlsbC9zZXNzaW9ucy9RdWlja0V4cyIsIHsKCiAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJywKICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBEYXRhRW50cmVlQnJ1dGUgOiBqc29uVGV4dDEsIAogICAgICAgICAgICAgICAgICAgICAgICBEYXRhR2xvYmFsIDoganNvblRleHQzLAoKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewoKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgRGF0YUZpbmFsVG9CZVJlcGxhY2UgPSByZXNwb25zZS5kYXRhWyJEYXRhRmluYWxUb0JlUmVwbGFjZSJdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEluZGljZUNvbG9uZVNvcnRpZSA9IHJlc3BvbnNlLmRhdGFbIkluZGljZUNvbG9uZVNvcnRpZSJdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRpbWV3YXN0UXVpY2tmaWxsID0gcmVzcG9uc2UuZGF0YVsidGltZXdhc3RRdWlja2ZpbGwiXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZW1vcnlRdWlja2ZpbGwgPSByZXNwb25zZS5kYXRhWyJtZW1vcnlRdWlja2ZpbGwiXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBOb21icmVFeGVtcGxlcyA9IHJlc3BvbnNlLmRhdGFbIk5vbWJyZUV4ZW1wbGVzIl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdGVkZXNwcm9ncmFtbWVzID0gcmVzcG9uc2UuZGF0YVsibGlzdGVkZXNwcm9ncmFtbWVzIl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kaWNlZHVwcm9ncmFtbWVjaG9pc2kgPSByZXNwb25zZS5kYXRhWyJpbmRpY2VkdXByb2dyYW1tZWNob2lzaSJdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEFkZEVsZW1lbnQgPW5ldyBNYXAoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBBZGRFbGVtZW50MiA9bmV3IE1hcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEluZGljZWxpbmUgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEFyYW5nZT0gIiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcHJlYWRzaGVldCA9IHRoYXQuJHJlZnMuc3ByZWFkc2hlZXQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQubGlzdGVTb3J0aWVzLmZvckVhY2goZnVuY3Rpb24oaXRlbSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdFbGVtZW50ID0gbmV3IEFycmF5KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSW5kaWNlbGluZSA9IHBhcnNlSW50KGl0ZW0ucG9zaXRpb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0VsZW1lbnQucHVzaChpdGVtLk91dHB1dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXJhbmdlID0gZ2V0UmFuZ2VBZGRyZXNzKFtJbmRpY2VsaW5lLTEsIEluZGljZUNvbG9uZVNvcnRpZS0xXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcHJlYWRzaGVldC51cGRhdGVDZWxsKHsgdmFsdWU6IG5ld0VsZW1lbnQgfSxBcmFuZ2UpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRhRmluYWxUb0JlUmVwbGFjZS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3RWxlbWVudCA9IG5ldyBBcnJheSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEluZGljZWxpbmUgPSBwYXJzZUludChpdGVtLnBvc2l0aW9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdFbGVtZW50LnB1c2goaXRlbS5PdXRwdXQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFyYW5nZSA9IGdldFJhbmdlQWRkcmVzcyhbSW5kaWNlbGluZS0xLCBJbmRpY2VDb2xvbmVTb3J0aWUtMV0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ByZWFkc2hlZXQudXBkYXRlQ2VsbCh7IHZhbHVlOiBuZXdFbGVtZW50IH0sQXJhbmdlKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcHJlZWRzaGVldGNvbXBvbmVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzcHJlZWRzaGVldGNvbXBvbmVudCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ByZWVkc2hlZXRjb21wb25lbnQuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBncmlkRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJncmlkRWxlbWVudCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZEVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICJub25lIjsgCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgVnVlLnN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnPHN0cm9uZz48dT5TdGF0aXN0aWMgb2YgUXVpY2tGaWxsIGV4ZWN1dGlvbjwvdT48L3N0cm9uZz4nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnaW5mbycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiA0MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWw6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxwPiBUaW1lIGV4ZWN1dGlvbiA6JyArIHRpbWV3YXN0UXVpY2tmaWxsICsgJ3MgPGJyPicgKyAnTWVtb3J5IHVzZSA6JyArIG1lbW9yeVF1aWNrZmlsbCArICdNbyA8YnI+JyArJ051bWJlciBvZiBwcm9ncmFtbWVzIDonICsgIE5vbWJyZUV4ZW1wbGVzICsgJyBwcm9ncmFtKHMpPC9wPiAnLAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0Nsb3NlQnV0dG9uOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb2N1c0NvbmZpcm06IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGkgY2xhc3M9ImZhIGZhLXRodW1icy11cCI+PC9pPiBHcmVhdCEnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCgoKCgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHRoYXQuJGRhdGEsIHRoYXQuJG9wdGlvbnMuZGF0YSgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICBBZGRFbGVtZW50LnNldCgndmFsdXNlJyxOb21icmVFeGVtcGxlcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgQWRkRWxlbWVudDIuc2V0KCd2YWx1c2UnLGluZGljZWR1cHJvZ3JhbW1lY2hvaXNpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9iaiA9IEFycmF5LmZyb20oQWRkRWxlbWVudCkucmVkdWNlKChvYmosIFtrZXksIHZhbHVlXSkgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ob2JqLCB7IFtrZXldOiB2YWx1ZSB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLCB7fSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9iajIgPSBBcnJheS5mcm9tKEFkZEVsZW1lbnQyKS5yZWR1Y2UoKG9iaiwgW2tleSwgdmFsdWVdKSA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihvYmosIHsgW2tleV06IHZhbHVlIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksIHt9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBWdWUuc2V0KHRoYXQubGVub2Zwcm9ncmFtbWVzLDAsIG9iaik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBWdWUuc2V0KHRoYXQuaWRwb3JncmFtbWUsMCwgb2JqMik7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdGVkZXNwcm9ncmFtbWVzLmZvckVhY2goKGVsZW1lbnQsaW5kZXgpID0+ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld09iamVjdC5zZXQoJ0lEJyAsIGluZGV4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3T2JqZWN0LnNldCgncHJvZ3JhbW1lJyAsIGVsZW1lbnQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb2JqMyA9IEFycmF5LmZyb20obmV3T2JqZWN0KS5yZWR1Y2UoKG9iaiwgW2tleSwgdmFsdWVdKSA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihvYmosIHsgW2tleV06IHZhbHVlIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksIHt9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3Rlb2ZPYmplY3RFbGVtZW50LnB1c2gob2JqMykKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBWdWUuc2V0KHRoYXQuTGlzdGVEZXNQcm9ncmFtbWVzUmV0b3VybmVyLCB0aGF0Lkxpc3RlRGVzUHJvZ3JhbW1lc1JldG91cm5lci5sZW5ndGgsIGVsZW1lbnQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZDIuZGF0YVNvdXJjZSA9IGxpc3Rlb2ZPYmplY3RFbGVtZW50OwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdGNvbXBvbmVudC5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAoKCgogICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwoKCgoKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmKHRoYXQuQ2hvaXNlUXVpY2tGaWxsLmNob2l4ID09IDIpCiAgICAgICAgICAgIHsKCgoKCiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uIGNiKCkgewoKICAgICAgICAgICAgICAgICAgICAgIHZhciBqc29uVGV4dDEgPSBKU09OLnN0cmluZ2lmeShBcnJheS5mcm9tKHRoYXQubGlzdGVFbnRyZXMpKTsKICAgICAgICAgICAgICAgICAgICAgIHZhciBqc29uVGV4dDMgPSBKU09OLnN0cmluZ2lmeShBcnJheS5mcm9tKHRoYXQuTGlzdGVFbGVtZW50c0Vudm95ZXJRdWlja0ZpbGwpKTsKICAgICAgICAgICAgICAgICAgICAgIHZhciBqc29uVGV4dDQgPSBKU09OLnN0cmluZ2lmeShBcnJheS5mcm9tKHRoYXQubGlzdGVTb3J0aWVzKSk7CiAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgIGF4aW9zLnBvc3QoImh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9RdWlja0ZpbGwvZmlsdGVyL1F1aWNrRXhzRmlsdGVyIiwgewoKICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLAogICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIERhdGFFbnRyZWVCcnV0ZSA6IGpzb25UZXh0MSwgCiAgICAgICAgICAgICAgICAgICAgICAgIERhdGFHbG9iYWwgOiBqc29uVGV4dDMsCiAgICAgICAgICAgICAgICAgICAgICAgIE1lc1NvcnRpZXMgOiBqc29uVGV4dDQKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewoKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgRGF0YUZpbmFsVG9CZVJlcGxhY2UgPSByZXNwb25zZS5kYXRhWyJEYXRhRmluYWxUb0JlUmVwbGFjZSJdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEluZGljZUNvbG9uZVNvcnRpZSA9IHJlc3BvbnNlLmRhdGFbIkluZGljZUNvbG9uZVNvcnRpZSJdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRpbWV3YXN0UXVpY2tmaWxsID0gcmVzcG9uc2UuZGF0YVsidGltZXdhc3RRdWlja2ZpbGwiXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZW1vcnlRdWlja2ZpbGwgPSByZXNwb25zZS5kYXRhWyJtZW1vcnlRdWlja2ZpbGwiXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBOb21icmVFeGVtcGxlcyA9IHJlc3BvbnNlLmRhdGFbIk5vbWJyZUV4ZW1wbGVzIl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdGVkZXNwcm9ncmFtbWVzID0gcmVzcG9uc2UuZGF0YVsibGlzdGVkZXNwcm9ncmFtbWVzIl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kaWNlZHVwcm9ncmFtbWVjaG9pc2kgPSByZXNwb25zZS5kYXRhWyJpbmRpY2VkdXByb2dyYW1tZWNob2lzaSJdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEFkZEVsZW1lbnQgPW5ldyBNYXAoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBBZGRFbGVtZW50MiA9bmV3IE1hcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEluZGljZWxpbmUgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEFyYW5nZT0gIiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcHJlYWRzaGVldCA9IHRoYXQuJHJlZnMuc3ByZWFkc2hlZXQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQubGlzdGVTb3J0aWVzLmZvckVhY2goZnVuY3Rpb24oaXRlbSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdFbGVtZW50ID0gbmV3IEFycmF5KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSW5kaWNlbGluZSA9IHBhcnNlSW50KGl0ZW0ucG9zaXRpb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0VsZW1lbnQucHVzaChpdGVtLk91dHB1dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXJhbmdlID0gZ2V0UmFuZ2VBZGRyZXNzKFtJbmRpY2VsaW5lLTEsIEluZGljZUNvbG9uZVNvcnRpZS0xXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcHJlYWRzaGVldC51cGRhdGVDZWxsKHsgdmFsdWU6IG5ld0VsZW1lbnQgfSxBcmFuZ2UpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRhRmluYWxUb0JlUmVwbGFjZS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3RWxlbWVudCA9IG5ldyBBcnJheSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEluZGljZWxpbmUgPSBwYXJzZUludChpdGVtLnBvc2l0aW9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdFbGVtZW50LnB1c2goaXRlbS5PdXRwdXQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFyYW5nZSA9IGdldFJhbmdlQWRkcmVzcyhbSW5kaWNlbGluZS0xLCBJbmRpY2VDb2xvbmVTb3J0aWUtMV0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ByZWFkc2hlZXQudXBkYXRlQ2VsbCh7IHZhbHVlOiBuZXdFbGVtZW50IH0sQXJhbmdlKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcHJlZWRzaGVldGNvbXBvbmVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzcHJlZWRzaGVldGNvbXBvbmVudCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ByZWVkc2hlZXRjb21wb25lbnQuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBncmlkRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJncmlkRWxlbWVudCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZEVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICJub25lIjsgCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgVnVlLnN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnPHN0cm9uZz48dT5TdGF0aXN0aWMgb2YgUXVpY2tGaWxsIGV4ZWN1dGlvbjwvdT48L3N0cm9uZz4nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnaW5mbycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiA0MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWw6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxwPiBUaW1lIGV4ZWN1dGlvbiA6JyArIHRpbWV3YXN0UXVpY2tmaWxsICsgJ3MgPGJyPicgKyAnTWVtb3J5IHVzZSA6JyArIG1lbW9yeVF1aWNrZmlsbCArICdNbyA8YnI+JyArJ051bWJlciBvZiBwcm9ncmFtbWVzIDonICsgIE5vbWJyZUV4ZW1wbGVzICsgJyBwcm9ncmFtKHMpPC9wPiAnLAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0Nsb3NlQnV0dG9uOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb2N1c0NvbmZpcm06IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGkgY2xhc3M9ImZhIGZhLXRodW1icy11cCI+PC9pPiBHcmVhdCEnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCgoKCgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHRoYXQuJGRhdGEsIHRoYXQuJG9wdGlvbnMuZGF0YSgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICBBZGRFbGVtZW50LnNldCgndmFsdXNlJyxOb21icmVFeGVtcGxlcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgQWRkRWxlbWVudDIuc2V0KCd2YWx1c2UnLGluZGljZWR1cHJvZ3JhbW1lY2hvaXNpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9iaiA9IEFycmF5LmZyb20oQWRkRWxlbWVudCkucmVkdWNlKChvYmosIFtrZXksIHZhbHVlXSkgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ob2JqLCB7IFtrZXldOiB2YWx1ZSB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLCB7fSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9iajIgPSBBcnJheS5mcm9tKEFkZEVsZW1lbnQyKS5yZWR1Y2UoKG9iaiwgW2tleSwgdmFsdWVdKSA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihvYmosIHsgW2tleV06IHZhbHVlIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksIHt9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBWdWUuc2V0KHRoYXQubGVub2Zwcm9ncmFtbWVzLDAsIG9iaik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBWdWUuc2V0KHRoYXQuaWRwb3JncmFtbWUsMCwgb2JqMik7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdGVkZXNwcm9ncmFtbWVzLmZvckVhY2goKGVsZW1lbnQsaW5kZXgpID0+ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld09iamVjdC5zZXQoJ0lEJyAsIGluZGV4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3T2JqZWN0LnNldCgncHJvZ3JhbW1lJyAsIGVsZW1lbnQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb2JqMyA9IEFycmF5LmZyb20obmV3T2JqZWN0KS5yZWR1Y2UoKG9iaiwgW2tleSwgdmFsdWVdKSA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihvYmosIHsgW2tleV06IHZhbHVlIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksIHt9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3Rlb2ZPYmplY3RFbGVtZW50LnB1c2gob2JqMykKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBWdWUuc2V0KHRoYXQuTGlzdGVEZXNQcm9ncmFtbWVzUmV0b3VybmVyLCB0aGF0Lkxpc3RlRGVzUHJvZ3JhbW1lc1JldG91cm5lci5sZW5ndGgsIGVsZW1lbnQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZDIuZGF0YVNvdXJjZSA9IGxpc3Rlb2ZPYmplY3RFbGVtZW50OwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdGNvbXBvbmVudC5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAoKCgogICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmKHRoYXQuQ2hvaXNlUXVpY2tGaWxsLmNob2l4ID09IDMpCiAgICAgICAgICAgIHsKCgoKCgogICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiBjYigpIHsKCgogICAgICAgICAgICAgICAgICAgICAgdmFyIGpzb25UZXh0MSA9IEpTT04uc3RyaW5naWZ5KEFycmF5LmZyb20odGhhdC5saXN0ZUVudHJlcykpOwogICAgICAgICAgICAgICAgICAgICAgdmFyIGpzb25UZXh0MyA9IEpTT04uc3RyaW5naWZ5KEFycmF5LmZyb20odGhhdC5MaXN0ZUVsZW1lbnRzRW52b3llclF1aWNrRmlsbCkpOwogICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICBheGlvcy5wb3N0KCJodHRwOi8vbG9jYWxob3N0OjgwMDAvUXVpY2tGaWxsL21hbnlibG9jcy9RdWlja0V4c01hbnlCbG9jayIsIHsKCiAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJywKICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBEYXRhRW50cmVlQnJ1dGUgOiBqc29uVGV4dDEsIAogICAgICAgICAgICAgICAgICAgICAgICBEYXRhR2xvYmFsIDoganNvblRleHQzCiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKCgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIERhdGFGaW5hbFRvQmVSZXBsYWNlID0gcmVzcG9uc2UuZGF0YVsiRGF0YUZpbmFsVG9CZVJlcGxhY2UiXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBJbmRpY2VDb2xvbmVTb3J0aWUgPSByZXNwb25zZS5kYXRhWyJJbmRpY2VDb2xvbmVTb3J0aWUiXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0aW1ld2FzdFF1aWNrZmlsbCA9IHJlc3BvbnNlLmRhdGFbInRpbWV3YXN0UXVpY2tmaWxsIl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWVtb3J5UXVpY2tmaWxsID0gcmVzcG9uc2UuZGF0YVsibWVtb3J5UXVpY2tmaWxsIl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgTm9tYnJlRXhlbXBsZXMgPSByZXNwb25zZS5kYXRhWyJOb21icmVFeGVtcGxlcyJdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3RlZGVzcHJvZ3JhbW1lcyA9IHJlc3BvbnNlLmRhdGFbImxpc3RlZGVzcHJvZ3JhbW1lcyJdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGljZWR1cHJvZ3JhbW1lY2hvaXNpID0gcmVzcG9uc2UuZGF0YVsiaW5kaWNlZHVwcm9ncmFtbWVjaG9pc2kiXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBBZGRFbGVtZW50ID1uZXcgTWFwKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgQWRkRWxlbWVudDIgPW5ldyBNYXAoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBJbmRpY2VsaW5lID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBBcmFuZ2U9ICIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3ByZWFkc2hlZXQgPSB0aGF0LiRyZWZzLnNwcmVhZHNoZWV0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQubGlzdGVTb3J0aWVzLmZvckVhY2goZnVuY3Rpb24oaXRlbSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdFbGVtZW50ID0gbmV3IEFycmF5KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSW5kaWNlbGluZSA9IHBhcnNlSW50KGl0ZW0ucG9zaXRpb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0VsZW1lbnQucHVzaChpdGVtLk91dHB1dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXJhbmdlID0gZ2V0UmFuZ2VBZGRyZXNzKFtJbmRpY2VsaW5lLTEsIEluZGljZUNvbG9uZVNvcnRpZS0xXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcHJlYWRzaGVldC51cGRhdGVDZWxsKHsgdmFsdWU6IG5ld0VsZW1lbnQgfSxBcmFuZ2UpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRhRmluYWxUb0JlUmVwbGFjZS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3RWxlbWVudCA9IG5ldyBBcnJheSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEluZGljZWxpbmUgPSBwYXJzZUludChpdGVtLnBvc2l0aW9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdFbGVtZW50LnB1c2goaXRlbS5PdXRwdXQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFyYW5nZSA9IGdldFJhbmdlQWRkcmVzcyhbSW5kaWNlbGluZS0xLCBJbmRpY2VDb2xvbmVTb3J0aWUtMV0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ByZWFkc2hlZXQudXBkYXRlQ2VsbCh7IHZhbHVlOiBuZXdFbGVtZW50IH0sQXJhbmdlKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcHJlZWRzaGVldGNvbXBvbmVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzcHJlZWRzaGVldGNvbXBvbmVudCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ByZWVkc2hlZXRjb21wb25lbnQuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBncmlkRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJncmlkRWxlbWVudCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZEVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICJub25lIjsgCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgVnVlLnN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnPHN0cm9uZz48dT5TdGF0aXN0aWMgb2YgUXVpY2tGaWxsIGV4ZWN1dGlvbjwvdT48L3N0cm9uZz4nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnaW5mbycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiA0MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWw6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxwPiBUaW1lIGV4ZWN1dGlvbiA6JyArIHRpbWV3YXN0UXVpY2tmaWxsICsgJ3MgPGJyPicgKyAnTWVtb3J5IHVzZSA6JyArIG1lbW9yeVF1aWNrZmlsbCArICdNbyA8YnI+JyArJ051bWJlciBvZiBwcm9ncmFtbWVzIDonICsgIE5vbWJyZUV4ZW1wbGVzICsgJyBwcm9ncmFtKHMpPC9wPiAnLAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0Nsb3NlQnV0dG9uOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb2N1c0NvbmZpcm06IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGkgY2xhc3M9ImZhIGZhLXRodW1icy11cCI+PC9pPiBHcmVhdCEnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCgoKCgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHRoYXQuJGRhdGEsIHRoYXQuJG9wdGlvbnMuZGF0YSgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICBBZGRFbGVtZW50LnNldCgndmFsdXNlJyxOb21icmVFeGVtcGxlcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgQWRkRWxlbWVudDIuc2V0KCd2YWx1c2UnLGluZGljZWR1cHJvZ3JhbW1lY2hvaXNpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9iaiA9IEFycmF5LmZyb20oQWRkRWxlbWVudCkucmVkdWNlKChvYmosIFtrZXksIHZhbHVlXSkgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ob2JqLCB7IFtrZXldOiB2YWx1ZSB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLCB7fSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9iajIgPSBBcnJheS5mcm9tKEFkZEVsZW1lbnQyKS5yZWR1Y2UoKG9iaiwgW2tleSwgdmFsdWVdKSA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihvYmosIHsgW2tleV06IHZhbHVlIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksIHt9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBWdWUuc2V0KHRoYXQubGVub2Zwcm9ncmFtbWVzLDAsIG9iaik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBWdWUuc2V0KHRoYXQuaWRwb3JncmFtbWUsMCwgb2JqMik7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdGVkZXNwcm9ncmFtbWVzLmZvckVhY2goKGVsZW1lbnQsaW5kZXgpID0+ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld09iamVjdC5zZXQoJ0lEJyAsIGluZGV4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3T2JqZWN0LnNldCgncHJvZ3JhbW1lJyAsIGVsZW1lbnQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb2JqMyA9IEFycmF5LmZyb20obmV3T2JqZWN0KS5yZWR1Y2UoKG9iaiwgW2tleSwgdmFsdWVdKSA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihvYmosIHsgW2tleV06IHZhbHVlIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksIHt9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3Rlb2ZPYmplY3RFbGVtZW50LnB1c2gob2JqMykKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBWdWUuc2V0KHRoYXQuTGlzdGVEZXNQcm9ncmFtbWVzUmV0b3VybmVyLCB0aGF0Lkxpc3RlRGVzUHJvZ3JhbW1lc1JldG91cm5lci5sZW5ndGgsIGVsZW1lbnQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZDIuZGF0YVNvdXJjZSA9IGxpc3Rlb2ZPYmplY3RFbGVtZW50OwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdGNvbXBvbmVudC5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAoKCgogICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgfQoKCgogICAgICB9LAogICAgICBjb250ZXh0TWVudUNsaWNrOiBmdW5jdGlvbihhcmdzKSAKICAgICAgewoKCiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgICAgICAgdmFyIGdyaWQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJlLWdyaWQiKVswXS5lajJfaW5zdGFuY2VzWzBdOwoKICAgICAgICAgICAgaWYodGhhdC5DaG9pc2VRdWlja0ZpbGwuY2hvaXggPT0gMykKICAgICAgICAgICAgewoKCiAgICAgICAgICAgICAgICAgIGlmKGFyZ3MuaXRlbS5pZCA9PT0gJ21ha2VibG9jaycpIAogICAgICAgICAgICAgICAgICB7ICAgICAgIAoKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCJjb3B5Iik7CgogICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4gCiAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCBuYXZpZ2F0b3IuY2xpcGJvYXJkLnJlYWRUZXh0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEFkZEJsb2MgPW5ldyBNYXAoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgSW5mb0Jsb2NNZW51RGlzdGluZ3VlID0gbmV3IE1hcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBBZGR0b0NvbnRleE1lbnUgPSBuZXcgTWFwKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEV0c1ByZXNlbnQgPSAgZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkRXN0UHJlc2VudCA9IGZhbHNlOwoKCgoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5MaXN0ZU9mSWRPZkNvdGV4dE1lbnUuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGl0ZW0gPT0gdGV4dCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV0c1ByZXNlbnQgPSAgdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihFdHNQcmVzZW50KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgnIEJsb2MgZGVqYSBjcmVlcicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0Lmxpc3RlRWxlbWVudFRvdXBkYXRlLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0saW5kZXgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaW5kZXggPT0gcGFyc2VJbnQodGhhdC5pZHNvcnRpZXNlbGVjdGlvbm5lci5pZCwgMTApKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRFc3RQcmVzZW50ID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihpZEVzdFByZXNlbnQgPT0gZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZ1ZS5zZXQodGhhdC5saXN0ZUVsZW1lbnRUb3VwZGF0ZSxwYXJzZUludCh0aGF0Lmlkc29ydGllc2VsZWN0aW9ubmVyLmlkLCAxMCksIDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWRkQmxvYy5zZXQoJ21lc3NhZ2UnLHRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFkZEJsb2Muc2V0KCdOYW1lQmxvYycsJ2InK3RoYXQubGlzdGVFbGVtZW50VG91cGRhdGVbcGFyc2VJbnQodGhhdC5pZHNvcnRpZXNlbGVjdGlvbm5lci5pZCwgMTApXSsnKioqJyt0ZXh0KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWRkdG9Db250ZXhNZW51LnNldCgndGV4dCcgLCAnQ29udGllbnQgbGUgYmxvYyAnICsgdGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWRkdG9Db250ZXhNZW51LnNldCgndGFyZ2V0JyAsICcuZS1jb250ZW50Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWRkdG9Db250ZXhNZW51LnNldCgnaWQnICwgdGV4dCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEluZm9CbG9jTWVudURpc3Rpbmd1ZS5zZXQoJ3RleHQnICwgJ0NvbnRpZW50IGxlIGJsb2MgJyArIHRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEluZm9CbG9jTWVudURpc3Rpbmd1ZS5zZXQoJ2lkbGlnbmUnICwgcGFyc2VJbnQodGhhdC5pZHNvcnRpZXNlbGVjdGlvbm5lci5pZCwgMTApKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9iaiA9IEFycmF5LmZyb20oQWRkQmxvYykucmVkdWNlKChvYmosIFtrZXksIHZhbHVlXSkgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKG9iaiwgeyBba2V5XTogdmFsdWUgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksIHt9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb2JqMiA9IEFycmF5LmZyb20oQWRkdG9Db250ZXhNZW51KS5yZWR1Y2UoKG9iaiwgW2tleSwgdmFsdWVdKSA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ob2JqLCB7IFtrZXldOiB2YWx1ZSB9KSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksIHt9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb2JqMyA9IEFycmF5LmZyb20oSW5mb0Jsb2NNZW51RGlzdGluZ3VlKS5yZWR1Y2UoKG9iaiwgW2tleSwgdmFsdWVdKSA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ob2JqLCB7IFtrZXldOiB2YWx1ZSB9KSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksIHt9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZC5jb250ZXh0TWVudU1vZHVsZS5jb250ZXh0TWVudS5pbnNlcnRBZnRlciggCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtvYmoyXSwgdGhhdC5jb250ZXh0TWVudUl0ZW1zW3RoYXQuY29udGV4dE1lbnVJdGVtcy5sZW5ndGgtMV0uaWQsIHRydWUpOyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZ1ZS5zZXQodGhhdC5MaXN0ZU9mQmxvY3MsdGhhdC5MaXN0ZU9mQmxvY3MubGVuZ3RoLCBvYmopOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZ1ZS5zZXQodGhhdC5MaXN0ZU9mSWRPZkNvdGV4dE1lbnUsdGhhdC5MaXN0ZU9mSWRPZkNvdGV4dE1lbnUubGVuZ3RoLCB0ZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWdWUuc2V0KHRoYXQuTGlzdGVNZXNzYWdlc09mQ290ZXh0TWVudSx0aGF0Lkxpc3RlTWVzc2FnZXNPZkNvdGV4dE1lbnUubGVuZ3RoLCBvYmozKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWdWUuc2V0KHRoYXQubGlzdGVFbGVtZW50VG91cGRhdGUscGFyc2VJbnQodGhhdC5pZHNvcnRpZXNlbGVjdGlvbm5lci5pZCwgMTApLCB0aGF0Lmxpc3RlRWxlbWVudFRvdXBkYXRlW3BhcnNlSW50KHRoYXQuaWRzb3J0aWVzZWxlY3Rpb25uZXIuaWQsIDEwKV0gKyAxKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWRkQmxvYy5zZXQoJ21lc3NhZ2UnLHRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFkZEJsb2Muc2V0KCdOYW1lQmxvYycsJ2InK3RoYXQubGlzdGVFbGVtZW50VG91cGRhdGVbcGFyc2VJbnQodGhhdC5pZHNvcnRpZXNlbGVjdGlvbm5lci5pZCwgMTApXSsnKioqJyt0ZXh0KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWRkdG9Db250ZXhNZW51LnNldCgndGV4dCcgLCAnQ29udGllbnQgbGUgYmxvYyAnICsgdGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWRkdG9Db250ZXhNZW51LnNldCgndGFyZ2V0JyAsICcuZS1jb250ZW50Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWRkdG9Db250ZXhNZW51LnNldCgnaWQnICwgdGV4dCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEluZm9CbG9jTWVudURpc3Rpbmd1ZS5zZXQoJ3RleHQnICwgJ0NvbnRpZW50IGxlIGJsb2MgJyArIHRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEluZm9CbG9jTWVudURpc3Rpbmd1ZS5zZXQoJ2lkbGlnbmUnICwgcGFyc2VJbnQodGhhdC5pZHNvcnRpZXNlbGVjdGlvbm5lci5pZCwgMTApKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9iaiA9IEFycmF5LmZyb20oQWRkQmxvYykucmVkdWNlKChvYmosIFtrZXksIHZhbHVlXSkgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKG9iaiwgeyBba2V5XTogdmFsdWUgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksIHt9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb2JqMiA9IEFycmF5LmZyb20oQWRkdG9Db250ZXhNZW51KS5yZWR1Y2UoKG9iaiwgW2tleSwgdmFsdWVdKSA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ob2JqLCB7IFtrZXldOiB2YWx1ZSB9KSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksIHt9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb2JqMyA9IEFycmF5LmZyb20oSW5mb0Jsb2NNZW51RGlzdGluZ3VlKS5yZWR1Y2UoKG9iaiwgW2tleSwgdmFsdWVdKSA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ob2JqLCB7IFtrZXldOiB2YWx1ZSB9KSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksIHt9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZC5jb250ZXh0TWVudU1vZHVsZS5jb250ZXh0TWVudS5pbnNlcnRBZnRlciggCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtvYmoyXSwgdGhhdC5jb250ZXh0TWVudUl0ZW1zW3RoYXQuY29udGV4dE1lbnVJdGVtcy5sZW5ndGgtMV0uaWQsIHRydWUpOyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZ1ZS5zZXQodGhhdC5MaXN0ZU9mQmxvY3MsdGhhdC5MaXN0ZU9mQmxvY3MubGVuZ3RoLCBvYmopOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZ1ZS5zZXQodGhhdC5MaXN0ZU9mSWRPZkNvdGV4dE1lbnUsdGhhdC5MaXN0ZU9mSWRPZkNvdGV4dE1lbnUubGVuZ3RoLCB0ZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWdWUuc2V0KHRoYXQuTGlzdGVNZXNzYWdlc09mQ290ZXh0TWVudSx0aGF0Lkxpc3RlTWVzc2FnZXNPZkNvdGV4dE1lbnUubGVuZ3RoLCBvYmozKTsKCgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDIwMCk7CiAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgZWxzZSBpZihhcmdzLml0ZW0uaWQgPT09ICdtYWtlY29uc3QnKQogICAgICAgICAgICAgICAgICB7CgoKCgogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgiY29weSIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGFzeW5jICgpID0+IAogICAgICAgICAgICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEFkZEJsb2MgPW5ldyBNYXAoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgRXRzUHJlc2VudCA9ICBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IG5ldyBNYXAoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWRFc3RQcmVzZW50ID0gZmFsc2U7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCBuYXZpZ2F0b3IuY2xpcGJvYXJkLnJlYWRUZXh0KCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuTGlzdGVPZklkT2ZDb3RleHRNZW51LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGl0ZW0gPT0gdGV4dCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXRzUHJlc2VudCA9ICB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKEV0c1ByZXNlbnQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoJyBCbG9jIGRlamEgY3JlZXInKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0Lmxpc3RlRWxlbWVudFRvdXBkYXRlLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0saW5kZXgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGluZGV4ID09IHBhcnNlSW50KHRoYXQuaWRzb3J0aWVzZWxlY3Rpb25uZXIuaWQsIDEwKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRFc3RQcmVzZW50ID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihpZEVzdFByZXNlbnQgPT0gZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVnVlLnNldCh0aGF0Lmxpc3RlRWxlbWVudFRvdXBkYXRlLHBhcnNlSW50KHRoYXQuaWRzb3J0aWVzZWxlY3Rpb25uZXIuaWQsIDEwKSwgMSk7ICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50ID0gbmV3IE1hcCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFkZEJsb2Muc2V0KCdtZXNzYWdlJywnTGUgYmxvYyAnICsgdGV4dCArICcgZXN0IHVuZSAgY29uc3RhbnRlJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBZGRCbG9jLnNldCgnTmFtZUJsb2MnLCdiJyt0aGF0Lmxpc3RlRWxlbWVudFRvdXBkYXRlW3BhcnNlSW50KHRoYXQuaWRzb3J0aWVzZWxlY3Rpb25uZXIuaWQsIDEwKV0rJyoqKicrdGV4dCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNldCgnYicrdGhhdC5saXN0ZUVsZW1lbnRUb3VwZGF0ZVtwYXJzZUludCh0aGF0Lmlkc29ydGllc2VsZWN0aW9ubmVyLmlkLCAxMCldKycqKionK3RleHQsIkNvbnN0U3RyIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0KCdFbnRyZXInICwgdGhhdC5saXN0ZVNvcnRpZXNbcGFyc2VJbnQodGhhdC5pZHNvcnRpZXNlbGVjdGlvbm5lci5pZCwgMTApXS5FbnRyZXIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNldCgnT3V0cHV0JyAsIHRoYXQubGlzdGVTb3J0aWVzW3BhcnNlSW50KHRoYXQuaWRzb3J0aWVzZWxlY3Rpb25uZXIuaWQsIDEwKV0uT3V0cHV0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb2JqID0gQXJyYXkuZnJvbShBZGRCbG9jKS5yZWR1Y2UoKG9iaiwgW2tleSwgdmFsdWVdKSA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihvYmosIHsgW2tleV06IHZhbHVlIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksIHt9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvYmoyID0gQXJyYXkuZnJvbShlbGVtZW50KS5yZWR1Y2UoKG9iajIsIFtrZXksIHZhbHVlXSkgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihvYmoyLCB7IFtrZXldOiB2YWx1ZSB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksIHt9KTsKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVnVlLnNldCh0aGF0Lkxpc3RlT2ZCbG9jcyx0aGF0Lkxpc3RlT2ZCbG9jcy5sZW5ndGgsIG9iaik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWdWUuc2V0KHRoYXQuTGlzdGVFbGVtZW50c0Vudm95ZXJRdWlja0ZpbGwsIHRoYXQuTGlzdGVFbGVtZW50c0Vudm95ZXJRdWlja0ZpbGwubGVuZ3RoLCBvYmoyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZ1ZS5zZXQodGhhdC5saXN0ZUVsZW1lbnRUb3VwZGF0ZSxwYXJzZUludCh0aGF0Lmlkc29ydGllc2VsZWN0aW9ubmVyLmlkLCAxMCksIHRoYXQubGlzdGVFbGVtZW50VG91cGRhdGVbcGFyc2VJbnQodGhhdC5pZHNvcnRpZXNlbGVjdGlvbm5lci5pZCwgMTApXSArIDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudCA9IG5ldyBNYXAoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWRkQmxvYy5zZXQoJ21lc3NhZ2UnLCdMZSBibG9jICcgKyB0ZXh0ICsgJyBlc3QgdW5lICBjb25zdGFudGUnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBZGRCbG9jLnNldCgnTmFtZUJsb2MnLCdiJyt0aGF0Lmxpc3RlRWxlbWVudFRvdXBkYXRlW3BhcnNlSW50KHRoYXQuaWRzb3J0aWVzZWxlY3Rpb25uZXIuaWQsIDEwKV0rJyoqKicrdGV4dCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zZXQoJ2InK3RoYXQubGlzdGVFbGVtZW50VG91cGRhdGVbcGFyc2VJbnQodGhhdC5pZHNvcnRpZXNlbGVjdGlvbm5lci5pZCwgMTApXSsnKioqJyt0ZXh0LCJDb25zdFN0ciIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zZXQoJ0VudHJlcicgLCB0aGF0Lmxpc3RlU29ydGllc1twYXJzZUludCh0aGF0Lmlkc29ydGllc2VsZWN0aW9ubmVyLmlkLCAxMCldLkVudHJlcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNldCgnT3V0cHV0JyAsIHRoYXQubGlzdGVTb3J0aWVzW3BhcnNlSW50KHRoYXQuaWRzb3J0aWVzZWxlY3Rpb25uZXIuaWQsIDEwKV0uT3V0cHV0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvYmogPSBBcnJheS5mcm9tKEFkZEJsb2MpLnJlZHVjZSgob2JqLCBba2V5LCB2YWx1ZV0pID0+ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihvYmosIHsgW2tleV06IHZhbHVlIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLCB7fSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9iajIgPSBBcnJheS5mcm9tKGVsZW1lbnQpLnJlZHVjZSgob2JqMiwgW2tleSwgdmFsdWVdKSA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihvYmoyLCB7IFtrZXldOiB2YWx1ZSB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLCB7fSk7CgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVnVlLnNldCh0aGF0Lkxpc3RlT2ZCbG9jcyx0aGF0Lkxpc3RlT2ZCbG9jcy5sZW5ndGgsIG9iaik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVnVlLnNldCh0aGF0Lkxpc3RlRWxlbWVudHNFbnZveWVyUXVpY2tGaWxsLCB0aGF0Lkxpc3RlRWxlbWVudHNFbnZveWVyUXVpY2tGaWxsLmxlbmd0aCwgb2JqMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCgoKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgoKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAyMDApOwoKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBlbHNlIGlmKHRoYXQuTGlzdGVPZklkT2ZDb3RleHRNZW51LnNvbWUoZSA9PiBlID09PSBhcmdzLml0ZW0uaWQpKQogICAgICAgICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgiY29weSIpOwoKCgogICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4gCiAgICAgICAgICAgICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgbmF2aWdhdG9yLmNsaXBib2FyZC5yZWFkVGV4dCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0Lkxpc3RlT2ZCbG9jcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaXRlbS5tZXNzYWdlID09IGFyZ3MuaXRlbS5pZCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gbmV3IE1hcCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0KGl0ZW0uTmFtZUJsb2MsdGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0KCdFbnRyZXInICwgdGhhdC5saXN0ZVNvcnRpZXNbcGFyc2VJbnQodGhhdC5pZHNvcnRpZXNlbGVjdGlvbm5lci5pZCwgMTApXS5FbnRyZXIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zZXQoJ091dHB1dCcgLCB0aGF0Lmxpc3RlU29ydGllc1twYXJzZUludCh0aGF0Lmlkc29ydGllc2VsZWN0aW9ubmVyLmlkLCAxMCldLk91dHB1dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygidGVzdCBkZXMgdGVzdCAgOiAiICwgYXJncy5ldmVudC50YXJnZXQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zZXQoJ0tleU9mRWxlbWVudCcgLCAidiIgKyAocGFyc2VJbnQodGhhdC5pZENvbG9uZVV0aWxpc2VyLmlkKSsxKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coImZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmYgOiAiICwgZWxlbWVudCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb2JqID0gQXJyYXkuZnJvbShlbGVtZW50KS5yZWR1Y2UoKG9iaiwgW2tleSwgdmFsdWVdKSA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihvYmosIHsgW2tleV06IHZhbHVlIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksIHt9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWdWUuc2V0KHRoYXQuTGlzdGVFbGVtZW50c0Vudm95ZXJRdWlja0ZpbGwsIHRoYXQuTGlzdGVFbGVtZW50c0Vudm95ZXJRdWlja0ZpbGwubGVuZ3RoLCBvYmopOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAyMDApOwoKCiAgICAgICAgICAgICAgICAgIAoKCgoKICAgICAgICAgICAgICAgICAgfQoKCgogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgIGlmKGFyZ3MuaXRlbS5pZCA9PT0gJ21ha2VibG9jaycpIAogICAgICAgICAgICAgICAgICB7ICAgICAgIAoKICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAKCiAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoImNvcHkiKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChhc3luYyAoKSA9PiAKICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IG5hdmlnYXRvci5jbGlwYm9hcmQucmVhZFRleHQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgQWRkQmxvYyA9bmV3IE1hcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBJbmZvQmxvY01lbnVEaXN0aW5ndWUgPSBuZXcgTWFwKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEFkZHRvQ29udGV4TWVudSA9IG5ldyBNYXAoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgRXRzUHJlc2VudCA9ICBmYWxzZTsKCgoKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuTGlzdGVPZklkT2ZDb3RleHRNZW51LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihpdGVtID09IHRleHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFdHNQcmVzZW50ID0gIHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoRXRzUHJlc2VudCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoJyBCbG9jIGRlamEgY3JlZXInKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuRWxlbWVudFRvVXBkYXRlID0gdGhhdC5FbGVtZW50VG9VcGRhdGUgKzEgOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBZGRCbG9jLnNldCgnbWVzc2FnZScsdGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWRkQmxvYy5zZXQoJ05hbWVCbG9jJywnYicrdGhhdC5FbGVtZW50VG9VcGRhdGUrJyoqKicrdGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSW5mb0Jsb2NNZW51RGlzdGluZ3VlLnNldCgndGV4dCcgLCAnQ29udGllbnQgbGUgYmxvYyAnICsgdGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSW5mb0Jsb2NNZW51RGlzdGluZ3VlLnNldCgnaWRsaWduZScgLCBwYXJzZUludCh0aGF0Lmlkc29ydGllc2VsZWN0aW9ubmVyLmlkLCAxMCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBZGR0b0NvbnRleE1lbnUuc2V0KCd0ZXh0JyAsICdDb250aWVudCBsZSBibG9jICcgKyB0ZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBZGR0b0NvbnRleE1lbnUuc2V0KCd0YXJnZXQnICwgJy5lLWNvbnRlbnQnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBZGR0b0NvbnRleE1lbnUuc2V0KCdpZCcgLCB0ZXh0KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9iaiA9IEFycmF5LmZyb20oQWRkQmxvYykucmVkdWNlKChvYmosIFtrZXksIHZhbHVlXSkgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKG9iaiwgeyBba2V5XTogdmFsdWUgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksIHt9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb2JqMiA9IEFycmF5LmZyb20oQWRkdG9Db250ZXhNZW51KS5yZWR1Y2UoKG9iaiwgW2tleSwgdmFsdWVdKSA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ob2JqLCB7IFtrZXldOiB2YWx1ZSB9KSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksIHt9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb2JqMyA9IEFycmF5LmZyb20oSW5mb0Jsb2NNZW51RGlzdGluZ3VlKS5yZWR1Y2UoKG9iaiwgW2tleSwgdmFsdWVdKSA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ob2JqLCB7IFtrZXldOiB2YWx1ZSB9KSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksIHt9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZC5jb250ZXh0TWVudU1vZHVsZS5jb250ZXh0TWVudS5pbnNlcnRBZnRlciggCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtvYmoyXSwgdGhhdC5jb250ZXh0TWVudUl0ZW1zW3RoYXQuY29udGV4dE1lbnVJdGVtcy5sZW5ndGgtMV0uaWQsIHRydWUpOyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZ1ZS5zZXQodGhhdC5MaXN0ZU9mQmxvY3MsdGhhdC5MaXN0ZU9mQmxvY3MubGVuZ3RoLCBvYmopOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZ1ZS5zZXQodGhhdC5MaXN0ZU9mSWRPZkNvdGV4dE1lbnUsdGhhdC5MaXN0ZU9mSWRPZkNvdGV4dE1lbnUubGVuZ3RoLCB0ZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWdWUuc2V0KHRoYXQuTGlzdGVNZXNzYWdlc09mQ290ZXh0TWVudSx0aGF0Lkxpc3RlTWVzc2FnZXNPZkNvdGV4dE1lbnUubGVuZ3RoLCBvYmozKTsKCgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDIwMCk7CiAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgZWxzZSBpZihhcmdzLml0ZW0uaWQgPT09ICdtYWtlY29uc3QnKQogICAgICAgICAgICAgICAgICB7CgoKCgogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgiY29weSIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGFzeW5jICgpID0+IAogICAgICAgICAgICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEFkZEJsb2MgPW5ldyBNYXAoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgRXRzUHJlc2VudCA9ICBmYWxzZTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IG5hdmlnYXRvci5jbGlwYm9hcmQucmVhZFRleHQoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5MaXN0ZU9mSWRPZkNvdGV4dE1lbnUuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaXRlbSA9PSB0ZXh0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFdHNQcmVzZW50ID0gIHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoRXRzUHJlc2VudCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgnIEJsb2MgZGVqYSBjcmVlcicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5FbGVtZW50VG9VcGRhdGUgPSB0aGF0LkVsZW1lbnRUb1VwZGF0ZSArMSA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBuZXcgTWFwKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFkZEJsb2Muc2V0KCdtZXNzYWdlJywnTGUgYmxvYyAnICsgdGV4dCArICcgZXN0IHVuZSAgY29uc3RhbnRlJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWRkQmxvYy5zZXQoJ05hbWVCbG9jJywnYicrdGhhdC5FbGVtZW50VG9VcGRhdGUrJyoqKicrdGV4dCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zZXQoJ2InK3RoYXQuRWxlbWVudFRvVXBkYXRlKycqKionK3RleHQsIkNvbnN0U3RyIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNldCgnRW50cmVyJyAsIHRoYXQubGlzdGVTb3J0aWVzWzBdLkVudHJlcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNldCgnT3V0cHV0JyAsIHRoYXQubGlzdGVTb3J0aWVzWzBdLk91dHB1dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb2JqID0gQXJyYXkuZnJvbShBZGRCbG9jKS5yZWR1Y2UoKG9iaiwgW2tleSwgdmFsdWVdKSA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ob2JqLCB7IFtrZXldOiB2YWx1ZSB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSwge30pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvYmoyID0gQXJyYXkuZnJvbShlbGVtZW50KS5yZWR1Y2UoKG9iajIsIFtrZXksIHZhbHVlXSkgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ob2JqMiwgeyBba2V5XTogdmFsdWUgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSwge30pOwoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZ1ZS5zZXQodGhhdC5MaXN0ZU9mQmxvY3MsdGhhdC5MaXN0ZU9mQmxvY3MubGVuZ3RoLCBvYmopOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZ1ZS5zZXQodGhhdC5MaXN0ZUVsZW1lbnRzRW52b3llclF1aWNrRmlsbCwgdGhhdC5MaXN0ZUVsZW1lbnRzRW52b3llclF1aWNrRmlsbC5sZW5ndGgsIG9iajIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKCgoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCgoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDIwMCk7CgogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBlbHNlIGlmKHRoYXQuTGlzdGVPZklkT2ZDb3RleHRNZW51LnNvbWUoZSA9PiBlID09PSBhcmdzLml0ZW0uaWQpKQogICAgICAgICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgiY29weSIpOwoKCgogICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4gCiAgICAgICAgICAgICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgbmF2aWdhdG9yLmNsaXBib2FyZC5yZWFkVGV4dCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0Lkxpc3RlT2ZCbG9jcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaXRlbS5tZXNzYWdlID09IGFyZ3MuaXRlbS5pZCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gbmV3IE1hcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zZXQoaXRlbS5OYW1lQmxvYyx0ZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0KCdFbnRyZXInICwgdGhhdC5saXN0ZVNvcnRpZXNbMF0uRW50cmVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0KCdPdXRwdXQnICwgdGhhdC5saXN0ZVNvcnRpZXNbMF0uT3V0cHV0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNldCgnS2V5T2ZFbGVtZW50JyAsICJ2IiArIChwYXJzZUludCh0aGF0LmlkQ29sb25lVXRpbGlzZXIuaWQpKzEpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZiA6ICIgLCBlbGVtZW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvYmogPSBBcnJheS5mcm9tKGVsZW1lbnQpLnJlZHVjZSgob2JqLCBba2V5LCB2YWx1ZV0pID0+ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKG9iaiwgeyBba2V5XTogdmFsdWUgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSwge30pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZ1ZS5zZXQodGhhdC5MaXN0ZUVsZW1lbnRzRW52b3llclF1aWNrRmlsbCwgdGhhdC5MaXN0ZUVsZW1lbnRzRW52b3llclF1aWNrRmlsbC5sZW5ndGgsIG9iaik7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDIwMCk7CgoKICAgICAgICAgICAgICAgICAgCgoKCgogICAgICAgICAgICAgICAgICB9CgoKICAgICAgICAgICAgfQoKCgoKCiAgICAgIH0sCiAgICAgIGNvbnRleHRNZW51QmVmb3JlT3BlbjogZnVuY3Rpb24gKCkgCiAgICAgIHsgICAgCiAgICAgICAgICAgICAgdmFyIHNwcmVhZHNoZWV0ID0gdGhpcy4kcmVmcy5zcHJlYWRzaGVldDsKICAgICAgICAgICAgICBzcHJlYWRzaGVldC5yZW1vdmVDb250ZXh0TWVudUl0ZW1zKFsnUGFzdGUgU3BlY2lhbCddLCBmYWxzZSk7CiAgICAgIH0sICAvKiBGb25jdGlvbiBxdWkgcydleGVjdXRlIGF2YW50IGwnb3V2ZXJ0dXJlIGR1IG1lbnUgY29udGV4dHVlbCBkZSBsYSBwYWdlIGQnYWNjdWVpbChzcHJlYWRzaGVldCkgKi8KICAgICAgcm93RGF0YUJvdW5kOiBmdW5jdGlvbiAoYXJncykgewogICAgICAgIAogICAgICAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICAgICAgIAogICAgICAgICB2YXIgaW5kZXggPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoYXQuaWRwb3JncmFtbWUuc2xpY2UoMCwgMSkpKTsKCiAgICAgICAgIAogICAgICAgICBpZiAoYXJncy5kYXRhLklEID09IGluZGV4WzBdLnZhbHVzZSkKICAgICAgICAgewogICAgICAgICAgICAKICAgICAgICAgICAgYXJncy5yb3cuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIk1pc3R5Um9zZSI7CiAgICAgICAgICAgIC8vYXJncy5yb3cuY3NzKCJiYWNrZ3JvdW5kQ29sb3IiLCAiI0YzQzNDMyIpOy8qY3VzdG9tIGNzcyBhcHBsaWVkIHRvIHRoZSByb3cgKi8KICAgICAgICAgfQoKICAgICAgICAgICAgIAogCiAgICAgfSwKICAgICBjcmVhdGVkOiBmdW5jdGlvbiAoKSAKICAgICB7CiAgICAgICAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpczsgIC8qIHBlcm1ldCBkZSBtYW5pcHVsZXIgbGVzIHZhcmlhYmxlcyBxdWUgcmV0b3VybmUgbGEgZm9uY3Rpb24gZGF0YSAqLwogICAgICAgICAgICAgICAgICB2YXIgc3ByZWFkc2hlZXQgPSB0aGF0LiRyZWZzLnNwcmVhZHNoZWV0OwogICAgICAgICAgICAgICAgICB2YXIgdXNlZFJhbmdlID0gMDsKICAgICAgICAgICAgICAgICAgdmFyIGluZGljZWxpZ25lbWF4ID0gMDsKICAgICAgICAgICAgICAgICAgdmFyIGluZGljZWRlY29sZW5tYXggPSAwOwogICAgICAgICAgICAgICAgICB2YXIgc2VwdHNlcHQgPSAwOwogICAgICAgICAgICAgICAgICB2YXIgc2hlZXROYW1lID0gMDsgLyogbm9tIGRlIGxhIGZldWlsbGUgZGUgY2FsY3VsIGFjdGl2ZSAqLwogICAgICAgICAgICAgICAgICB2YXIgSW5kaWNlRXZvbHVlID0gMDsgCiAgICAgICAgICAgICAgICAgIHZhciBDaGFpbmVQbHVzVGVzdCA9ICIiOwogICAgICAgICAgICAgICAgICB2YXIgRGF0YUV4cERlbW8gPW5ldyBNYXAoKTsgLyogQ29udGllbnQgbGUgamV1IGRlIGRvbm7DqWVzIChlbnRyw6llLCBzb3J0aWUpICovCiAgICAgICAgICAgICAgICAgIHZhciByZXN1bHRjb21wb25lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicmVzdWx0YXRjb21wb25lbnQiKTsgLyogUmVjdXBlcmUgbGEgZ3JpbGxlIGRlcyByZXN1bHRhdHMgKi8KICAgICAgICAgICAgICAgICAgcmVzdWx0Y29tcG9uZW50LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CgoKCgogICAgICAgICAgICAgICAgICBzcHJlYWRzaGVldC5oaWRlUmliYm9uVGFicyhbJ0hvbWUnICwgJ0Zvcm11bGFzJyAsICdEYXRhJywnSW5zZXJ0JyAsICdWaWV3J10pOyAvKiBtYXNxdWUgbGVzIGVsZW1lbnRzIHByaXMgZW4gYXJndW1lbnQgc3VyIGxlIHJ1YmFuICovCiAgICAgICAgICAgICAgICAgIHNwcmVhZHNoZWV0LmFkZFJpYmJvblRhYnMoWyAgLyogYWpvdXQgbGVzIG5vdXZlYXV4IG1lbnUgc3VyIGxlIHJ1YmFuICovCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB7IGhlYWRlcjogeyB0ZXh0OiAnR2VuZXJhdGVSZXN1bHQnIH0sIGNvbnRlbnQ6IAogICAgICAgICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHRleHQ6ICdGTGFzaEZpbGwnLCB0b29sdGlwVGV4dDogJ0ZsYXNoRmlsbCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2sgOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHRjb21wb25lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicmVzdWx0YXRjb21wb25lbnQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdGNvbXBvbmVudC5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kaWNlZGVjb2xlbm1heCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGljZWRlY29sZW5tYXggPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXB0c2VwdCA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoYWluZVBsdXNUZXN0ID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGFFeHBEZW1vID1uZXcgTWFwKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZWRSYW5nZSA9IHNwcmVhZHNoZWV0LmVqMkluc3RhbmNlcy5nZXRBY3RpdmVTaGVldCgpLnVzZWRSYW5nZTsgLyogY29udGllbnQgbGEgcGxhZ2UgYWN0aXZldihpbmRpY2UgbGEgZGVybmllcmUgbGlnbmUsIGluZGljZSBkZXJuaWVyZSBjb2xvbmUpICovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGljZWxpZ25lbWF4ID0gdXNlZFJhbmdlLnJvd0luZGV4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRpY2VkZWNvbGVubWF4ID0gdXNlZFJhbmdlLmNvbEluZGV4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGVldE5hbWUgPSBzcHJlYWRzaGVldC5lajJJbnN0YW5jZXMuZ2V0QWN0aXZlU2hlZXQoKS5uYW1lOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ByZWFkc2hlZXQuZWoySW5zdGFuY2VzLmdldERhdGEoc2hlZXROYW1lICsgIiEiKyBnZXRSYW5nZUFkZHJlc3MoWzAsIDAsIGluZGljZWxpZ25lbWF4LCBpbmRpY2VkZWNvbGVubWF4XSkpLnRoZW4oIChjZWxscyk9PiAvKiByZWN1cGVyZSBsZXMgZG9ubsOpZXMgZGUgbGEgcGxhZ2UgYWN0aXZlIGV0IGVmZmV0dWUgdW4gdHJhaXRlbWVudCBwb3B1ciBjaGFxdWUgY2VsbHVsZSAqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxzLmZvckVhY2goKGNlbGwpPT57IC8qIGNlbGxzIGNvbnRpZW50IGwnZW5zZW1ibGUgZGUgdG91dGVzIGxlcyBjZWxsdWxlcyAqLwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKEluZGljZUV2b2x1ZSA9PSBpbmRpY2VkZWNvbGVubWF4KSAvKiBJbmRpY2VFdm9sdWUgcGVybWV0IGRlIHBhcmNvdXJpciBsZXMgY29sb25lcyAqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBSZWN1cGVyYXRpb24gZGUgbGEgY2hhaW5lIGRlIHNvcnRpZSBzIDogZWxsZSBwZXV0IGV0cmUgdmlkZSBvdSBub24gKi8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGFpbmVQbHVzVGVzdCA9IENoYWluZVBsdXNUZXN0LnN1YnN0cmluZygwLCBDaGFpbmVQbHVzVGVzdC5sZW5ndGgtMykgLyogb24gc3VycGltZSBsYSBkZXJuaWVyZSBjaGFpbmUgIisrKyIgKi8KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodHlwZW9mKGNlbGwudmFsdWUpID09ICJ1bmRlZmluZWQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGFFeHBEZW1vID0gRGF0YUV4cERlbW8uc2V0KHNlcHRzZXB0LnRvU3RyaW5nKCkrJyoqKicrJycgLCBDaGFpbmVQbHVzVGVzdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBzZXB0c2VwdCBjb250aWVudCBsJ2luZGljZSBkZSBsYSBsaWduZSBlbiBjb3VycyBkZSB0cmFpdGVtZW50ICovCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0YUV4cERlbW8gPSBEYXRhRXhwRGVtby5zZXQoc2VwdHNlcHQudG9TdHJpbmcoKSsnKioqJytjZWxsLnZhbHVlLENoYWluZVBsdXNUZXN0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIERhdGFFeHBEZW1vIGVzdCB1biBkaWNvIHF1aSBjb250aWVudCBsZXMgZXhlbXBsZSBkJ2VudHJlZSBzb3J0aWUgLCBzdG9ja8OpcyBzdXIgdW5lIGNlcnRhaW5lIGZvcm1lIHByZW5xbnQgZW4gY29tcHRlIGxlIG51bWVybyBkZSBsaWduZSBkZSBjaGFxdWUgZXhwICovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoYWluZVBsdXNUZXN0ID0gJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSW5kaWNlRXZvbHVlID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXB0c2VwdCA9IHNlcHRzZXB0ICsgMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBjZXR0ZSBwYXJ0aWUgbm91cyBwZXJtZXQgZGUgcmVjdXBlcmVyIGxhIGNoYWluZSBkJ2VudHLDqWUgc2lnbWEuIExhIHJlY3VwZXJhdGlvbiBzZSBmYWl0IHRhbnQgcXUnb24gYSBwYSBhdHRlaW50IGxhIGRlbmllcmUgY29sb25lIGFjdGl2ZS4gKi8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0eXBlb2YoY2VsbC52YWx1ZSkgIT0gInVuZGVmaW5lZCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hhaW5lUGx1c1Rlc3QgPSBDaGFpbmVQbHVzVGVzdCArIGNlbGwudmFsdWUgKyAiKysrIjsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJbmRpY2VFdm9sdWUgPSBJbmRpY2VFdm9sdWUgKyAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gY2IoKSB7ICAvKiBzZXRUaW1lb3V0IGluZGlxdWUgcXVlIGxxIGZvbmN0aW9uIGNiKCkgZG9pdCBzJ2V4ZWN1dGVyIGVuIGRlcm5pZXJlIHBvc2l0aW9uICovCgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBqc29uVGV4dCA9IEpTT04uc3RyaW5naWZ5KEFycmF5LmZyb20oRGF0YUV4cERlbW8uZW50cmllcygpKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF4aW9zLnBvc3QoImh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9GbGFzaEZpbGwvc2Vzc2lvbnMvRmxhc2hFeHMiLCB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAgLyogaGVhZGVycyBwZXJtZXQgZGUgZGVmaW5pciBsZSB0eXBlIGRlIGNvbnRlbnUgcXUnb24gdmV1dCBlbnZveWVyIDogcCBpbCBzJ2FnaXQgZCd1biBjb250ZW51IGpzb24gZGFucyBub3RyZSBjYXMgKi8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGFFbnRyZWUgOiBqc29uVGV4dCAgLyogRGF0YUVudHJlZSBzdG9ja2Ugbm9zIGRvbsOpZXMganNvbiAsIHF1aSBzb250IGVuc3VpdGUgdHJhaXTDqWVzICBhdSBuaXZlYXUgZHUgYmFja2VuZCAqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CgoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihyZXNwb25zZS5kYXRhWyJNZXNzYWdlQ2xlcyJdID09ICJGYWxzZSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVnVlLnN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2Vycm9yJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ09vcHMuLi4nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICdGbGFzaEZpbGwgRG8gbm90IHVuZGVyc3RhbnQgd2hhdCB5b3Ugd2FudCEnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvb3RlcjogJzxwPkl0IGNhbiBiZSBhIGNvbmRpdGlvbiBleGVjdXRpb24gcHJvYmxlbSA6IDxicj4gQ29uZGl0aW9uIGZvciBnb29kIGV4ZWN1dGlvbiA6IDxicj4gPG9sPjxsaT5Zb3VyIGRhdGEgbW9zdCBoYXZlIHRoZSBzYW1lIHN0cnVjdHVyZTwvbGk+PGxpPllvdSBtb3N0IGhhdmUgYSBsZWFzdCBvbmUgZXhlbXBsZSB3aXRoIGEgb3V0cHV0PC9saT48L29sPjxicj48L3A+JwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgRGF0YUZpbmFsVG9CZVJlcGxhY2UgPSByZXNwb25zZS5kYXRhWyJEYXRhRmluYWxUb0JlUmVwbGFjZSJdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEluZGljZUNvbG9uZVNvcnRpZSA9IHJlc3BvbnNlLmRhdGFbIkluZGljZUNvbG9uZVNvcnRpZSJdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRpbWV3YXN0Rmxhc2ZpbGwgPSByZXNwb25zZS5kYXRhWyJ0aW1ld2FzdEZsYXNmaWxsIl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgTm9tYnJlRXhlbXBsZXMgPSByZXNwb25zZS5kYXRhWyJOb21icmVFeGVtcGxlcyJdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1lbW9yeUZsYXNmaWxsID0gcmVzcG9uc2UuZGF0YVsibWVtb3J5Rmxhc2ZpbGwiXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBJbmRpY2VsaW5lID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBBcmFuZ2U9ICIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoRGF0YUZpbmFsVG9CZVJlcGxhY2UpLmZvckVhY2goZnVuY3Rpb24ocHJvcCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSW5kaWNlbGluZSA9IHBhcnNlSW50KHByb3ApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBcmFuZ2UgPSBnZXRSYW5nZUFkZHJlc3MoW0luZGljZWxpbmUtMSwgSW5kaWNlQ29sb25lU29ydGllXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXJhbmdlID0gQXJhbmdlLnRvU3RyaW5nKCkuc3BsaXQoIjoiKVswXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcHJlYWRzaGVldC51cGRhdGVDZWxsKHsgdmFsdWU6IERhdGFGaW5hbFRvQmVSZXBsYWNlW3Byb3BdIH0sQXJhbmdlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsgCgoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZ1ZS5zd2FsLmZpcmUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnPHN0cm9uZz48dT5TdGF0aXN0aWMgb2YgRmxhc2hGaWxsIGV4ZWN1dGlvbjwvdT48L3N0cm9uZz4nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICdpbmZvJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogNDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWw6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPHA+IFRpbWUgZXhlY3V0aW9uIDonICsgdGltZXdhc3RGbGFzZmlsbCArICdzIDxicj4nICsgJ051bWJlciBvZiBwcm9ncmFtbWVzIDonICsgJ01lbW9yeSB1c2UgOicgKyBtZW1vcnlGbGFzZmlsbCArICdNbyA8YnI+JyArIE5vbWJyZUV4ZW1wbGVzICsgJyBwcm9ncmFtbWUocyk8L3A+ICcsCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dDbG9zZUJ1dHRvbjogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzQ29uZmlybTogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGkgY2xhc3M9ImZhIGZhLXRodW1icy11cCI+PC9pPiBHcmVhdCEnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKCgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHRleHQ6ICdRdWlja0ZpbGwnLCB0b29sdGlwVGV4dDogJ1F1aWNrRmlsbCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrIDogZnVuY3Rpb24oKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewoKCgoKCgoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kaWNlZGVjb2xlbm1heCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kaWNlZGVjb2xlbm1heCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VwdHNlcHQgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoYWluZVBsdXNUZXN0ID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0YUV4cERlbW8gPW5ldyBNYXAoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VkUmFuZ2UgPSBzcHJlYWRzaGVldC5lajJJbnN0YW5jZXMuZ2V0QWN0aXZlU2hlZXQoKS51c2VkUmFuZ2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kaWNlbGlnbmVtYXggPSB1c2VkUmFuZ2Uucm93SW5kZXg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kaWNlZGVjb2xlbm1heCA9IHVzZWRSYW5nZS5jb2xJbmRleDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWdWUuc2V0KHRoYXQuSW5kaWNlQ29sb25lU29ydGllICwgJ2lkJyAsIGluZGljZWRlY29sZW5tYXgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoZWV0TmFtZSA9IHNwcmVhZHNoZWV0LmVqMkluc3RhbmNlcy5nZXRBY3RpdmVTaGVldCgpLm5hbWU7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ3JpZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImUtZ3JpZCIpWzBdLmVqMl9pbnN0YW5jZXNbMF07IC8vIHJlY3VwZXJhdGlvbiBkZSBsYSBHcmlkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEVsZW1lbnRNYXBJbnN0YW5jZUVudHJlZSA9ICBuZXcgTWFwKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEVsZW1lbnRJbnRlcm1lZGlhcmVNYXBJbnN0YW5jZUVudHJlZSA9ICBuZXcgTWFwKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEVsZW1lbnRNYXBJbnN0YW5jZVNvcnRpZSA9ICBuZXcgTWFwKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEVsZW1lbnRNYXBJbnN0YW5jZVNvcnRpZTIgPSAgbmV3IE1hcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsaXN0ZWNob2l4ID0gbmV3IEFycmF5KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlY291cGVyc29ydGllciA9IG5ldyBBcnJheSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWNvdXBlcmVudHJlZSA9IG5ldyBBcnJheSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBNZXNzYWdlQ2xlcyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdGNvbXBvbmVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJyZXN1bHRhdGNvbXBvbmVudCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdGNvbXBvbmVudC5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcHJlYWRzaGVldC5lajJJbnN0YW5jZXMuZ2V0RGF0YShzaGVldE5hbWUgKyAiISIrIGdldFJhbmdlQWRkcmVzcyhbMCwgMCwgaW5kaWNlbGlnbmVtYXgsIGluZGljZWRlY29sZW5tYXhdKSkudGhlbiggKGNlbGxzKT0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxscy5mb3JFYWNoKChjZWxsKT0+ewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKEluZGljZUV2b2x1ZSA9PSBpbmRpY2VkZWNvbGVubWF4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hhaW5lUGx1c1Rlc3QgPSBDaGFpbmVQbHVzVGVzdC5zdWJzdHJpbmcoMCwgQ2hhaW5lUGx1c1Rlc3QubGVuZ3RoLTMpCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZihjZWxsLnZhbHVlKSA9PSAidW5kZWZpbmVkIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGFFeHBEZW1vLnNldChzZXB0c2VwdC50b1N0cmluZygpKycqKionKycnICwgQ2hhaW5lUGx1c1Rlc3QpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0YUV4cERlbW8uc2V0KHNlcHRzZXB0LnRvU3RyaW5nKCkrJyoqKicrY2VsbC52YWx1ZSwgQ2hhaW5lUGx1c1Rlc3QpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGFpbmVQbHVzVGVzdCA9ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEluZGljZUV2b2x1ZSA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VwdHNlcHQgPSBzZXB0c2VwdCArIDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodHlwZW9mKGNlbGwudmFsdWUpICE9ICJ1bmRlZmluZWQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoYWluZVBsdXNUZXN0ID0gQ2hhaW5lUGx1c1Rlc3QgKyBjZWxsLnZhbHVlICsgIisrKyI7IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSW5kaWNlRXZvbHVlID0gSW5kaWNlRXZvbHVlICsgMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiBjYigpIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRhRXhwRGVtby5mb3JFYWNoKCh2YWx1ZSwga2V5KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodmFsdWUgPT09ICIiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZ1ZS5zd2FsLmZpcmUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2Vycm9yJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnT29wcy4uLicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnUXVpY2tGaWxsIERvIG5vdCB1bmRlcnN0YW50IHdoYXQgeW91IHdhbnQhJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvb3RlcjogJzxwPkl0IGNhbiBiZSBhIGNvbmRpdGlvbiBleGVjdXRpb24gcHJvYmxlbSA6IDxicj4gQ29uZGl0aW9uIGZvciBnb29kIGV4ZWN1dGlvbiA6IDxicj4gPG9sPjxsaT5Zb3VyIGRhdGEgbW9zdCBoYXZlIHRoZSBzYW1lIHN0cnVjdHVyZTwvbGk+PGxpPllvdSBtb3N0IGhhdmUgYSBsZWFzdCBvbmUgZXhlbXBsZSB3aXRoIGEgb3V0cHV0PC9saT48L29sPjxicj48L3A+JwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VDbGVzID0gZmFsc2U7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVsZW1lbnRNYXBJbnN0YW5jZUVudHJlZSA9IG5ldyBNYXAoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRWxlbWVudE1hcEluc3RhbmNlU29ydGllID0gbmV3IE1hcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFbGVtZW50TWFwSW5zdGFuY2VTb3J0aWUyID0gbmV3IE1hcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFbGVtZW50SW50ZXJtZWRpYXJlTWFwSW5zdGFuY2VFbnRyZWUgPSAgbmV3IE1hcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNvdXBlcmVudHJlZSA9IHZhbHVlLnNwbGl0KCIrKysiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVjb3VwZXJzb3J0aWVyID0ga2V5LnNwbGl0KCIqKioiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZGVjb3VwZXJzb3J0aWVyLmxlbmd0aCA+MSAmJiBkZWNvdXBlcnNvcnRpZXJbMV0gIT0gIiIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih2YWx1ZSAhPSAiIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVjb3VwZXJlbnRyZWUuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVsZW1lbnRJbnRlcm1lZGlhcmVNYXBJbnN0YW5jZUVudHJlZS5zZXQoInYiKyhpbmRleCsxKS50b1N0cmluZygpLCBpdGVtKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVsZW1lbnRNYXBJbnN0YW5jZVNvcnRpZS5zZXQoInYiKyhpbmRleCsxKS50b1N0cmluZygpLCBpdGVtKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9iaiA9IEFycmF5LmZyb20oRWxlbWVudEludGVybWVkaWFyZU1hcEluc3RhbmNlRW50cmVlKS5yZWR1Y2UoKG9iaiwgW2tleSwgdmFsdWVdKSA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihvYmosIHsgW2tleV06IHZhbHVlIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksIHt9KTsKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVsZW1lbnRNYXBJbnN0YW5jZVNvcnRpZTIuc2V0KCJFbnRyZXIiICwgb2JqKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFbGVtZW50TWFwSW5zdGFuY2VTb3J0aWUuc2V0KCJPdXRwdXQiICwgZGVjb3VwZXJzb3J0aWVyWzFdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFbGVtZW50TWFwSW5zdGFuY2VTb3J0aWUyLnNldCgiT3V0cHV0IiAsIGRlY291cGVyc29ydGllclsxXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRWxlbWVudE1hcEluc3RhbmNlU29ydGllMi5zZXQoInBvc2l0aW9uIiAsIGRlY291cGVyc29ydGllclswXSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RlY2hvaXgucHVzaChFbGVtZW50TWFwSW5zdGFuY2VTb3J0aWUpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb2JqMiA9IEFycmF5LmZyb20oRWxlbWVudE1hcEluc3RhbmNlU29ydGllMikucmVkdWNlKChvYmosIFtrZXksIHZhbHVlXSkgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ob2JqLCB7IFtrZXldOiB2YWx1ZSB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLCB7fSk7CgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWdWUuc2V0KHRoYXQubGlzdGVTb3J0aWVzLHRoYXQubGlzdGVTb3J0aWVzLmxlbmd0aCxvYmoyKQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHZhbHVlICE9ICIiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVjb3VwZXJlbnRyZWUuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVsZW1lbnRJbnRlcm1lZGlhcmVNYXBJbnN0YW5jZUVudHJlZS5zZXQoInYiKyhpbmRleCsxKS50b1N0cmluZygpLCBpdGVtKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb2JqID0gQXJyYXkuZnJvbShFbGVtZW50SW50ZXJtZWRpYXJlTWFwSW5zdGFuY2VFbnRyZWUpLnJlZHVjZSgob2JqLCBba2V5LCB2YWx1ZV0pID0+ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKG9iaiwgeyBba2V5XTogdmFsdWUgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSwge30pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVsZW1lbnRNYXBJbnN0YW5jZUVudHJlZS5zZXQoIkVudHJlciIgLCBvYmopOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVsZW1lbnRNYXBJbnN0YW5jZUVudHJlZS5zZXQoInBvc2l0aW9uIiAsIGRlY291cGVyc29ydGllclswXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9iajIgPSBBcnJheS5mcm9tKEVsZW1lbnRNYXBJbnN0YW5jZUVudHJlZSkucmVkdWNlKChvYmosIFtrZXksIHZhbHVlXSkgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ob2JqLCB7IFtrZXldOiB2YWx1ZSB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLCB7fSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVnVlLnNldCh0aGF0Lmxpc3RlRW50cmVzICx0aGF0Lmxpc3RlRW50cmVzLmxlbmd0aCxvYmoyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgoKCgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihNZXNzYWdlQ2xlcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobGlzdGVjaG9peC5sZW5ndGggPT0gMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uIGtucigpIHsKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihNZXNzYWdlQ2xlcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlc3QyID0gbmV3IEFycmF5KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzb3J0aWVVdGlsaXNlciA9IGxpc3RlY2hvaXhbMF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb2JqID0gQXJyYXkuZnJvbShzb3J0aWVVdGlsaXNlcikucmVkdWNlKChvYmosIFtrZXksIHZhbHVlXSkgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKG9iaiwgeyBba2V5XTogdmFsdWUgfSkgLy8gQmUgY2FyZWZ1bCEgTWFwcyBjYW4gaGF2ZSBub24tU3RyaW5nIGtleXM7IG9iamVjdCBsaXRlcmFscyBjYW4ndC4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksIHt9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVzdDIucHVzaChvYmopOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZC5kYXRhU291cmNlID0gdGVzdDI7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcHJlZWRzaGVldGNvbXBvbmVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzcHJlZWRzaGVldGNvbXBvbmVudCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwcmVlZHNoZWV0Y29tcG9uZW50LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ3JpZEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZ3JpZEVsZW1lbnQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmlkRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWdWUuc3dhbC5maXJlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ1F1ZSBkZXNpcmVyIHZvdXMgZmFpcmUgYXZlYyBRdWlja0ZJbGwnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWw6IGAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1jaGVjayI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPSJmb3JtLWNoZWNrLWlucHV0IiB0eXBlPSJyYWRpbyIgbmFtZT0iZXhhbXBsZVJhZGlvcyIgaWQ9ImV4YW1wbGVSYWRpb3MxIiB2YWx1ZT0ib3B0aW9uMSIgY2hlY2tlZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImZvcm0tY2hlY2stbGFiZWwiIGZvcj0iZXhhbXBsZVJhZGlvczEiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGYWlyZSBkdSBmaWx0cmFnZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWNoZWNrIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9ImZvcm0tY2hlY2staW5wdXQiIHR5cGU9InJhZGlvIiBuYW1lPSJleGFtcGxlUmFkaW9zIiBpZD0iZXhhbXBsZVJhZGlvczIiIHZhbHVlPSJvcHRpb24yIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImZvcm0tY2hlY2stbGFiZWwiIGZvcj0iZXhhbXBsZVJhZGlvczIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFpcmUgZGVzIGJsb2NzIHN1ciBwbHVpc2V1cnMgZXhlbXBsZXMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzQ29uZmlybTogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlQ29uZmlybTogKCkgPT4gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleGFtcGxlUmFkaW9zMScpLmNoZWNrZWQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24ga25yKCkgewoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihNZXNzYWdlQ2xlcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZXN0MiA9IG5ldyBBcnJheSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc29ydGllVXRpbGlzZXIgPSBsaXN0ZWNob2l4WzBdOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvYmogPSBBcnJheS5mcm9tKHNvcnRpZVV0aWxpc2VyKS5yZWR1Y2UoKG9iaiwgW2tleSwgdmFsdWVdKSA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKG9iaiwgeyBba2V5XTogdmFsdWUgfSkgLy8gQmUgY2FyZWZ1bCEgTWFwcyBjYW4gaGF2ZSBub24tU3RyaW5nIGtleXM7IG9iamVjdCBsaXRlcmFscyBjYW4ndC4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLCB7fSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlc3QyLnB1c2gob2JqKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyaWQuZGF0YVNvdXJjZSA9IHRlc3QyOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcHJlZWRzaGVldGNvbXBvbmVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzcHJlZWRzaGVldGNvbXBvbmVudCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ByZWVkc2hlZXRjb21wb25lbnQuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdyaWRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImdyaWRFbGVtZW50Iik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmlkRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsgCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVnVlLnNldCh0aGF0LkNob2lzZVF1aWNrRmlsbCwgJ2Nob2l4JyAsIDIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleGFtcGxlUmFkaW9zMicpLmNoZWNrZWQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uIGtucjIoKSB7CgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKE1lc3NhZ2VDbGVzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZXN0MiA9IG5ldyBBcnJheSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdGVjaG9peC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9iaiA9IEFycmF5LmZyb20oaXRlbSkucmVkdWNlKChvYmosIFtrZXksIHZhbHVlXSkgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihvYmosIHsgW2tleV06IHZhbHVlIH0pIC8vIEJlIGNhcmVmdWwhIE1hcHMgY2FuIGhhdmUgbm9uLVN0cmluZyBrZXlzOyBvYmplY3QgbGl0ZXJhbHMgY2FuJ3QuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSwge30pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXN0Mi5wdXNoKG9iaik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZC5kYXRhU291cmNlID0gdGVzdDI7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNwcmVlZHNoZWV0Y29tcG9uZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNwcmVlZHNoZWV0Y29tcG9uZW50Iik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcHJlZWRzaGVldGNvbXBvbmVudC5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ3JpZEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZ3JpZEVsZW1lbnQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyaWRFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOyAKCgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZ1ZS5zZXQodGhhdC5DaG9pc2VRdWlja0ZpbGwsICdjaG9peCcgLCAzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgoKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKCgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKCgoKCgoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gfSAsCgoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgdGV4dDogJ0ZMYXNoRmlsbExvb3BGcmVlJywgdG9vbHRpcFRleHQ6ICdGTGFzaEZpbGxMb29wRnJlZScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrIDogZnVuY3Rpb24oKSB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kaWNlZGVjb2xlbm1heCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRpY2VkZWNvbGVubWF4ID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcHRzZXB0ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoYWluZVBsdXNUZXN0ID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRhRXhwRGVtbyA9bmV3IE1hcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEFkZEVsZW1lbnQgPW5ldyBNYXAoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBBZGRFbGVtZW50MiA9bmV3IE1hcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3Rlb2ZPYmplY3RFbGVtZW50ID0gIG5ldyBBcnJheSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlZFJhbmdlID0gc3ByZWFkc2hlZXQuZWoySW5zdGFuY2VzLmdldEFjdGl2ZVNoZWV0KCkudXNlZFJhbmdlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kaWNlbGlnbmVtYXggPSB1c2VkUmFuZ2Uucm93SW5kZXg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRpY2VkZWNvbGVubWF4ID0gdXNlZFJhbmdlLmNvbEluZGV4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hlZXROYW1lID0gc3ByZWFkc2hlZXQuZWoySW5zdGFuY2VzLmdldEFjdGl2ZVNoZWV0KCkubmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHRjb21wb25lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicmVzdWx0YXRjb21wb25lbnQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdGNvbXBvbmVudC5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwcmVhZHNoZWV0LmVqMkluc3RhbmNlcy5nZXREYXRhKHNoZWV0TmFtZSArICIhIisgZ2V0UmFuZ2VBZGRyZXNzKFswLCAwLCBpbmRpY2VsaWduZW1heCwgaW5kaWNlZGVjb2xlbm1heF0pKS50aGVuKCAoY2VsbHMpPT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxzLmZvckVhY2goKGNlbGwpPT57CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKEluZGljZUV2b2x1ZSA9PSBpbmRpY2VkZWNvbGVubWF4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoYWluZVBsdXNUZXN0ID0gQ2hhaW5lUGx1c1Rlc3Quc3Vic3RyaW5nKDAsIENoYWluZVBsdXNUZXN0Lmxlbmd0aC0zKQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodHlwZW9mKGNlbGwudmFsdWUpID09ICJ1bmRlZmluZWQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0YUV4cERlbW8gPSBEYXRhRXhwRGVtby5zZXQoc2VwdHNlcHQudG9TdHJpbmcoKSsnKioqJysnJyAsIENoYWluZVBsdXNUZXN0KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0YUV4cERlbW8gPSBEYXRhRXhwRGVtby5zZXQoc2VwdHNlcHQudG9TdHJpbmcoKSsnKioqJytjZWxsLnZhbHVlLENoYWluZVBsdXNUZXN0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hhaW5lUGx1c1Rlc3QgPSAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSW5kaWNlRXZvbHVlID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VwdHNlcHQgPSBzZXB0c2VwdCArIDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0eXBlb2YoY2VsbC52YWx1ZSkgIT0gInVuZGVmaW5lZCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGFpbmVQbHVzVGVzdCA9IENoYWluZVBsdXNUZXN0ICsgY2VsbC52YWx1ZSArICIrKysiOyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJbmRpY2VFdm9sdWUgPSBJbmRpY2VFdm9sdWUgKyAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gY2IoKSB7CgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIganNvblRleHQgPSBKU09OLnN0cmluZ2lmeShBcnJheS5mcm9tKERhdGFFeHBEZW1vLmVudHJpZXMoKSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF4aW9zLnBvc3QoImh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9GbGFzaEZpbGwvc2Vzc2lvbnMvRmxhc2hGcmVlTG9vcEV4cyIsIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRhRW50cmVlIDoganNvblRleHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewoKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJlc3BvbnNlLmRhdGFbIk1lc3NhZ2VDbGVzIl0gPT0gIkZhbHNlIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZ1ZS5zd2FsLmZpcmUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnZXJyb3InLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ09vcHMuLi4nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnRmxhc2hGaWxsIERvIG5vdCB1bmRlcnN0YW50IHdoYXQgeW91IHdhbnQhJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9vdGVyOiAnPHA+SXQgY2FuIGJlIGEgY29uZGl0aW9uIGV4ZWN1dGlvbiBwcm9ibGVtIDogPGJyPiBDb25kaXRpb24gZm9yIGdvb2QgZXhlY3V0aW9uIDogPGJyPiA8b2w+PGxpPllvdXIgZGF0YSBtb3N0IGhhdmUgdGhlIHNhbWUgc3RydWN0dXJlPC9saT48bGk+WW91IG1vc3QgaGF2ZSBhIGxlYXN0IG9uZSBleGVtcGxlIHdpdGggYSBvdXRwdXQ8L2xpPjwvb2w+PGJyPjwvcD4nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBEYXRhRmluYWxUb0JlUmVwbGFjZSA9IHJlc3BvbnNlLmRhdGFbIkRhdGFGaW5hbFRvQmVSZXBsYWNlIl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEluZGljZUNvbG9uZVNvcnRpZSA9IHJlc3BvbnNlLmRhdGFbIkluZGljZUNvbG9uZVNvcnRpZSJdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0aW1ld2FzdEZsYXNmaWxsID0gcmVzcG9uc2UuZGF0YVsidGltZXdhc3RGbGFzZmlsbCJdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBOb21icmVFeGVtcGxlcyA9IHJlc3BvbnNlLmRhdGFbIk5vbWJyZUV4ZW1wbGVzIl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1lbW9yeUZsYXNmaWxsID0gcmVzcG9uc2UuZGF0YVsibWVtb3J5Rmxhc2ZpbGwiXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdGVkZXNwcm9ncmFtbWVzID0gcmVzcG9uc2UuZGF0YVsibGlzdGVkZXNwcm9ncmFtbWVzIl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGljZWR1cHJvZ3JhbW1lY2hvaXNpID0gcmVzcG9uc2UuZGF0YVsiaW5kaWNlZHVwcm9ncmFtbWVjaG9pc2kiXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgSW5kaWNlbGluZSA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEFyYW5nZT0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld09iamVjdCA9IG5ldyBNYXAoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ3JpZDIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJlLWdyaWQiKVsxXS5lajJfaW5zdGFuY2VzWzBdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFkZEVsZW1lbnQuc2V0KCd2YWx1c2UnLE5vbWJyZUV4ZW1wbGVzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBZGRFbGVtZW50Mi5zZXQoJ3ZhbHVzZScsaW5kaWNlZHVwcm9ncmFtbWVjaG9pc2kpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoRGF0YUZpbmFsVG9CZVJlcGxhY2UpLmZvckVhY2goZnVuY3Rpb24ocHJvcCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJbmRpY2VsaW5lID0gcGFyc2VJbnQocHJvcCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBcmFuZ2UgPSBnZXRSYW5nZUFkZHJlc3MoW0luZGljZWxpbmUtMSwgSW5kaWNlQ29sb25lU29ydGllXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFyYW5nZSA9IEFyYW5nZS50b1N0cmluZygpLnNwbGl0KCI6IilbMF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwcmVhZHNoZWV0LnVwZGF0ZUNlbGwoeyB2YWx1ZTogRGF0YUZpbmFsVG9CZVJlcGxhY2VbcHJvcF0gfSxBcmFuZ2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7IAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVnVlLnN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnPHN0cm9uZz48dT5TdGF0aXN0aWMgb2YgRmxhc2hGaWxsIGV4ZWN1dGlvbjwvdT48L3N0cm9uZz4nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnaW5mbycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiA0MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWw6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxwPiBUaW1lIGV4ZWN1dGlvbiA6JyArIHRpbWV3YXN0Rmxhc2ZpbGwgKyAncyA8YnI+JyArICdOdW1iZXIgb2YgcHJvZ3JhbW1lcyA6JyArTm9tYnJlRXhlbXBsZXMgKyAnIHByb2dyYW1tZShzKTxicj4nKyAnTWVtb3J5IHVzZSA6JyArIG1lbW9yeUZsYXNmaWxsICsgJ01vPC9wPicgLAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0Nsb3NlQnV0dG9uOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb2N1c0NvbmZpcm06IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGkgY2xhc3M9ImZhIGZhLXRodW1icy11cCI+PC9pPiBHcmVhdCEnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvYmogPSBBcnJheS5mcm9tKEFkZEVsZW1lbnQpLnJlZHVjZSgob2JqLCBba2V5LCB2YWx1ZV0pID0+ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihvYmosIHsgW2tleV06IHZhbHVlIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLCB7fSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9iajIgPSBBcnJheS5mcm9tKEFkZEVsZW1lbnQyKS5yZWR1Y2UoKG9iaiwgW2tleSwgdmFsdWVdKSA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ob2JqLCB7IFtrZXldOiB2YWx1ZSB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSwge30pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhhdC4kZGF0YSwgdGhhdC4kb3B0aW9ucy5kYXRhKCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZ1ZS5zZXQodGhhdC5sZW5vZnByb2dyYW1tZXMsMCwgb2JqKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWdWUuc2V0KHRoYXQuaWRwb3JncmFtbWUsMCwgb2JqMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdGVkZXNwcm9ncmFtbWVzLmZvckVhY2goKGVsZW1lbnQsaW5kZXgpID0+ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3T2JqZWN0LnNldCgnSUQnICwgaW5kZXgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3T2JqZWN0LnNldCgncHJvZ3JhbW1lJyAsIGVsZW1lbnQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9iajMgPSBBcnJheS5mcm9tKG5ld09iamVjdCkucmVkdWNlKChvYmosIFtrZXksIHZhbHVlXSkgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKG9iaiwgeyBba2V5XTogdmFsdWUgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksIHt9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0ZW9mT2JqZWN0RWxlbWVudC5wdXNoKG9iajMpCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZ1ZS5zZXQodGhhdC5MaXN0ZURlc1Byb2dyYW1tZXNSZXRvdXJuZXIsIHRoYXQuTGlzdGVEZXNQcm9ncmFtbWVzUmV0b3VybmVyLmxlbmd0aCwgZWxlbWVudCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAoKCgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmlkMi5kYXRhU291cmNlID0gbGlzdGVvZk9iamVjdEVsZW1lbnQ7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHRjb21wb25lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicmVzdWx0YXRjb21wb25lbnQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRjb21wb25lbnQuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKCgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gfSwKCgoKCgogICAgICAgICAgICAgICAgICAgICAgICAgIF0gCiAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLHsgaGVhZGVyOiB7IHRleHQ6ICdIZWxwJyB9LCBjb250ZW50OiBbeyB0ZXh0OiAnUXVpY2tGaWxsJywgdG9vbHRpcFRleHQ6ICdRdWlja0ZpbGwnLAogICAgICAgICAgICAgICAgICAgICAgICBjbGljayA6IGZ1bmN0aW9uKCkgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVnVlLnN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnPHN0cm9uZz48dT5RdWljRmlsbCBVc2FnZSBleGFtcGxlPC91Pjwvc3Ryb25nPicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICdpbmZvJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDkwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGlmcmFtZSB3aWR0aD0iNTYwIiBoZWlnaHQ9IjMxNSIgc3JjPSJodHRwczovL3d3dy55b3V0dWJlLmNvbS9lbWJlZC9kX2VsWFkyTGNmayIgZnJhbWVib3JkZXI9IjAiIGFsbG93PSJhY2NlbGVyb21ldGVyOyBhdXRvcGxheTsgY2xpcGJvYXJkLXdyaXRlOyBlbmNyeXB0ZWQtbWVkaWE7IGd5cm9zY29wZTsgcGljdHVyZS1pbi1waWN0dXJlIiBhbGxvd2Z1bGxzY3JlZW4+PC9pZnJhbWU+JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0Nsb3NlQnV0dG9uOiB0cnVlLCAvKiBwb3VyIGxhIGZlcm1ldHVyZSBkdSBtb2RhbCAqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLCAvKiBib3V0b24gY2FuY2VsICovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzQ29uZmlybTogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8aSBjbGFzcz0iZmEgZmEtdGh1bWJzLXVwIj48L2k+IEdyZWF0IScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCgogICAgICAgICAgICAgICAgICAgICAgICB9IH0sCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgeyB0ZXh0OiAnRmxhc2hGaWxsJywgdG9vbHRpcFRleHQ6ICdGbGFzaEZpbGwnLAogICAgICAgICAgICAgICAgICAgICAgICBjbGljayA6IGZ1bmN0aW9uKCkgewoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBWdWUuc3dhbC5maXJlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICc8c3Ryb25nPjx1PkZsYXNoRmlsbCBVc2FnZSBleGFtcGxlPC91Pjwvc3Ryb25nPicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICdpbmZvJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDkwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGlmcmFtZSB3aWR0aD0iNzY4IiBoZWlnaHQ9IjM2MCIgc3JjPSJodHRwczovL3d3dy55b3V0dWJlLmNvbS9lbWJlZC9BNy1FNnNmNkpPYz9saXN0PVJEUU11S19NNGZsM0RzOCIgdGl0bGU9IllvdVR1YmUgdmlkZW8gcGxheWVyIiBmcmFtZWJvcmRlcj0iMCIgYWxsb3c9ImFjY2VsZXJvbWV0ZXI7IGF1dG9wbGF5OyBjbGlwYm9hcmQtd3JpdGU7IGVuY3J5cHRlZC1tZWRpYTsgZ3lyb3Njb3BlOyBwaWN0dXJlLWluLXBpY3R1cmUiIGFsbG93ZnVsbHNjcmVlbj48L2lmcmFtZT4nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93Q2xvc2VCdXR0b246IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzQ29uZmlybTogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8aSBjbGFzcz0iZmEgZmEtdGh1bWJzLXVwIj48L2k+IEdyZWF0IScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIH0gfSwKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIHsgdGV4dDogJ0Fib3V0JywgdG9vbHRpcFRleHQ6ICdBYm91dCcsCiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrIDogZnVuY3Rpb24oKSB7CgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZ1ZS5zd2FsLmZpcmUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJzxzdHJvbmc+QWJvdXQgdGhlIHByb2plY3Q8L3N0cm9uZz4nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnaW5mbycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiA5MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWw6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxwPlF1aWNGaWxsIHByb2plY3QgaXMgYSBwcm9qZWN0IGRldmVsb3BwZXIgYnkgRm9rb3UgVmFuZXNzYSBMYXVyZSAoYWRyZXNzIG1haWwpIGJhc2Ugb24gdGhlIEZsYXNoRmlsbCBhbGdvcml0aG1lICB0byB0ZXN0IGEgaWRlYSBvZiBhbmQgaXRlcmFjdGl2ZSBhcHByb2NoZSB1c2luZyBpbmRlcGVuZGFudCBibG9jIGFwcHJvY2hlIHRvIGdlbmVyYXRlIHN0cmluZyBwcm9nYW1tZSBiYXNlIG9uIGV4YW1wbGU8L3A+JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0Nsb3NlQnV0dG9uOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb2N1c0NvbmZpcm06IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGkgY2xhc3M9ImZhIGZhLXRodW1icy11cCI+PC9pPiBHcmVhdCEnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gfSwKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIF0gfV0KICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgCiAgICAgICAgICB9LAogICAgCiAgICAgIH0sCgoKCgogIHByb3ZpZGU6IC8qIGRlZmludGlvbiBkZXMgZWxlbWVudHMgcHJlc2VudGVzIGRhbnMgbGEgZ3JpbGxlICovCiAgeyAKICAgIGdyaWQ6IFtDb250ZXh0TWVudSwgUGFnZV0sIAogIH0sIAoKCgp9Cg=="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA;AACA;AACA;AACA;AACA;;;;;;AAMA;AACA;AACA;;;;;;AAMA;AACA;AACA;AACA;;;AAGA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;;AAGA;;;;AAIA;;;AAGA;;;;AAIA;;AAEA;AACA;;;AAGA;;;AAGA;AACA;;;AAGA;;;AAGA;AACA;;AAEA;AACA;;AAEA;;;AAGA;AACA;;AAEA;;;;AAIA;AACA;;AAEA;;;AAGA;AACA;;;AAGA;;AAEA;AACA;;;AAGA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;;AAEA;;AAEA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;;;;AAIA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;;;;AAIA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;AAKA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;;;AAGA;;;;AAIA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;;AAEA;;;AAGA;AACA;;;;AAIA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;AAIA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AAWA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;;AAGA;;;;;;;;AAQA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;;;;;AAKA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;AAIA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AAWA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;;AAGA;;;;;;;;AAQA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;AAMA;;;AAGA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;AAIA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AAWA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;;AAGA;;;;;;;;AAQA;AACA;AACA;AACA;AACA;;AAEA;;;;AAIA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;;AAGA;AACA;;;;;AAKA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AAMA;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;AAIA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;AAKA;AACA;AACA;;;;AAIA;AACA;AACA;;;AAGA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;AAKA;AACA;AACA;;;;AAIA;;;AAGA;;AAEA;;;AAGA;AACA;AACA;;;;;AAKA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;AAEA;AACA;;AAEA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;;AAGA;;;;AAIA;;AAEA;AACA;;AAEA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;;AAEA;;;;;;AAMA;;;;;;;AAOA;;AAEA;AACA;AACA;;AAEA;;;;AAIA;AACA;;AAEA;;AAEA;;;AAGA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;;;;AAIA;;;;;;;;AAQA;;;;AAIA;AACA;AACA;;;AAGA;AACA;;;;;AAKA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AAMA;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;AAKA;AACA;AACA;;;;AAIA;;AAEA;;;AAGA;AACA;AACA;;;;;AAKA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;;;;;;;AAOA;;;;;;;AAOA;;AAEA;;AAEA;AACA;;AAEA;;;;AAIA;AACA;;AAEA;;AAEA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;;;;AAIA;;;;;;;;AAQA;;;AAGA;;;;;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;AAGA;AACA;;AAEA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;;AAGA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;AAEA;AACA;AACA;AACA;;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;AAMA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;;;;;;;;;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;;AAGA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;;AAGA;;AAEA;;;;AAIA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;;;AAGA;;AAEA;;;;;;AAMA;AACA;;AAEA;AACA;;;AAGA;;;AAGA;AACA;;AAEA;;;AAGA;;;AAGA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;;;AAGA;;;;AAIA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;;AAGA;AACA;;;;AAIA;AACA;AACA;;;;;AAKA;;;AAGA;AACA;;;;;AAKA;;;;;AAKA;;;;AAIA;;;;;;;;;AASA;;;;AAIA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;AAIA;;AAEA;AACA;;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;;AAGA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;AAEA;AACA;AACA;AACA;;AAEA;;;;;;;;;AASA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AAOA;AACA;;AAEA;AACA;;;;;;AAMA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;;;;;;AAMA;;;;;;AAMA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;;AAGA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;;AAEA;;;;;AAKA;AACA;AACA;AACA;;;;AAIA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n  <div id=\"app\">\n    <div id=\"gridElement\" height='270px'  style=\"display:none;\">\n      <strong><u>Contruction des blocs</u></strong> \n        <div>\n              <ul>\n                  <li v-for=\"bloc in ListeOfBlocs\" :key=\"bloc.message\">\n                    {{ bloc.message }} <!-- Gestion du menu contextuelle dans la grille -->\n                  </li>\n              </ul>\n            </div>\n                  <button @click=\"SendDataQuickFill\">Envoyer</button>\n                  <button @click=\"BackTosheat\">Retour</button>\n            <div>\n        </div>\n\n      <hr>\n\n      <ejs-grid ref='grid' id='gridcomp' :allowSelection='true' :allowPaging='true' height='100%' :contextMenuItems='contextMenuItems' :contextMenuOpen='contextMenuOpen' :contextMenuClick='contextMenuClick'> </ejs-grid>\n    </div>\n    \n    <div id=\"spreedsheetcomponent\">\n\n\n      <ejs-spreadsheet ref=\"spreadsheet\" :created=\"created\" :openUrl=\"openUrl\" :saveUrl=\"saveUrl\"  :allowHyperlink=\"false\" :allowImage=\"false\" :allowSorting=\"false\" :allowFiltering=\"false\" :contextMenuBeforeOpen=\"contextMenuBeforeOpen\">\n      </ejs-spreadsheet>\n\n    </div>\n\n\n\n      <div id=\"resultatcomponent\"> <!-- Affichage des programmes -->\n              <hr>\n              <strong><u>Liste des programmes</u></strong>\n              \n              <div>\n                    <p> nombre de programme est de : <span v-for=\"item in lenofprogrammes.slice(0, 1)\" :key=\"item.valuse\"> {{ item.valuse }} </span> , le programme choisi est   la position numro : <span v-for=\"item in idporgramme.slice(0, 1)\" :key=\"item.valuse\"> {{ item.valuse }} </span>  </p>\n                  </div>\n                        <button @click=\"VueProgramChoix\">Programme execut</button>\n                  <div>\n              </div> \n            <ejs-grid ref='grid2' id='gridcomprresult' :allowSelection='true' :allowPaging='true'  :row-data-bound='rowDataBound' :rowSelected='rowSelected' height='100%'>\n            </ejs-grid>\n\n    </div>\n\n  </div>\n</template>\n\n<script>\n  import Vue from \"vue\";\n  import { SpreadsheetPlugin,getRangeAddress} from \"@syncfusion/ej2-vue-spreadsheet\";\n  import { GridPlugin, ContextMenu, Page } from '@syncfusion/ej2-vue-grids';\n  import axios from \"axios\";\n  import VueSweetalert2 from 'vue-sweetalert2';\n\n\n\n\n\n  Vue.use(SpreadsheetPlugin); \n  Vue.use(VueSweetalert2); /* pour la gestion des modals */\n  Vue.use(GridPlugin);\n\n\n\n\n\n  export default{\n    name: 'App',\n    data :  function(){  /* la fonction data retourne les variables dynamique (variables reactives) */\n        return {\n\n\n              idporgramme : [\n\n              ], /* Le numero de programme choisi. */\n\n              lenofprogrammes : [\n\n              ], /* Nombre de programmes obtenues apres execution de flashfill ou quickfill */\n\n              ElementToUpdate : 0,  /* variable de comptage des blocs: bvloc b1, b2 ..... */\n\n              listeElementToupdate:[\n\n\n              ], /* liste des evolution des id des blocs*/\n\n              ChoiseQuickFill : {\n                choix : 1\n              }, /*permet de determiner quel variante de QuickFill utilis */\n\n              idsortieselectionner :{\n                  id:1\n              }, /* Identifier l'exemple sur lequel on cree le bloc*/\n\n              IndiceColoneSortie:{\n                  id:1\n              },/*Contient le numero de la colone de sortie*/\n\n              idColoneUtiliser:{\n\n                id:0\n              },/* Contient id de la colonne courrente */\n\n              ListeDesProgrammesRetourner : [\n\n              ], /* Contient la liste de programmes retourner par flashfill ou quickfilll */\n\n\n              ListeElementsEnvoyerQuickFill:[\n\n\n\n              ],  /* tableau contenant les dones (bloc de sortie + correspondance)  envoyer  QuickFill */\n\n\n              ListeDesSortiesQuickFill:[\n\n\n\n              ], /*Liste de toutes les sorties  envoyer  Quick Fill*/\n\n              LesEntreeQuickFill :\n              [\n\n\n              ], /* tableau qui stocke les chaines d'entre sigma de quickfill */\n              \n\n              ListeOfBlocs: \n              [\n\n\n              ], /* contient les blocs de la chaine de sortie */\n\n\n              contextMenuItems: \n              [\n                  \n                  {text: 'Make a bloc', target: '.e-content', id: 'makeblock'},\n                  {text: 'Make a constant', target: '.e-content', id: 'makeconst'},\n        \n              ], /* Contient les items du menu contextuel de lq grid */\n\n\n              ListeOfIdOfCotextMenu:\n              [\n\n              ], /* Contient les ids des nouveau items du menu contextuel cre par utilisation des item \"make a bloc\", \"make a constant\" */\n\n\n\n              ListeMessagesOfCotextMenu:\n              [\n\n              ], /* Contient les messages des nouveau items du menu contextuel cre par utilisation des item \"make a bloc\", \"make a constant\" */\n\n\n              listeSorties : \n              [\n\n\n              ], /* tableau contenant les chaines de sorties s */\n\n              listeEntres:\n              [\n\n\n              ], /* tableau contenant les chaines d'entre sigma pour flashFill */\n\n              IndiceDeLaColonneDeSortie:\n              {\n\n                id:1\n              }, /* Contient indice de la colonne de sortie */\n\n              openUrl: 'https://ej2services.syncfusion.com/production/web-services/api/spreadsheet/open',\n              saveUrl: 'https://ej2services.syncfusion.com/production/web-services/api/spreadsheet/save',\n              \n          \n          };\n\n    },\n\n    methods: \n    {\n\n\n      contextMenuOpen:function (args) \n      {\n\n        var grid = document.getElementsByClassName(\"e-grid\")[0].ej2_instances[0];\n        var that =  this;\n        var numeroIdColonne =  args.rowInfo.cellIndex;\n        var numeroDeLigne = args.rowInfo.rowIndex;\n\n\n        Vue.set(that.idColoneUtiliser,'id',numeroIdColonne);\n        Vue.set(that.idsortieselectionner,'id', numeroDeLigne);\n\n\n\n            if(numeroIdColonne == that.IndiceColoneSortie.id)\n            {\n\n                grid.contextMenuModule.contextMenu.showItems(['Make a bloc']);\n                grid.contextMenuModule.contextMenu.showItems(['Make a constant']);\n\n                if(that.ListeMessagesOfCotextMenu.length > 0)\n                {\n                        that.ListeMessagesOfCotextMenu.forEach(function (item) {\n                            if((item.text != 'Make a bloc') && (item.text != 'Make a constant'))\n                            {\n                              grid.contextMenuModule.contextMenu.hideItems([item.text]);\n\n                            }\n\n                      });\n                  }\n\n\n            }\n            else\n            {\n              grid.contextMenuModule.contextMenu.hideItems(['Make a bloc']);\n              grid.contextMenuModule.contextMenu.hideItems(['Make a constant']);\n\n              if(that.ListeMessagesOfCotextMenu.length > 0)\n              {\n\n                  that.ListeMessagesOfCotextMenu.forEach(function (item) {\n                            if((item.text != 'Make a bloc') && (item.text != 'Make a constant') && (numeroDeLigne == item.idligne))\n                            {\n\n                              grid.contextMenuModule.contextMenu.showItems([item.text]);\n\n                            }\n                            else\n                            {\n                              grid.contextMenuModule.contextMenu.hideItems([item.text]);\n                            }\n\n                  });\n\n\n              }\n\n\n\n            }\n          \n      },\n\n\n        rowSelected : function(args)\n        {\n          /* Gestion et affichage du programme choisi en interface. */\n                var that = this;\n                var index = args.data.ID;\n                Vue.swal.fire({\n                      title: '<strong><u>Programme ayant ID ' + index + '</u></strong>',\n                      icon: 'info',\n                      width: 400,\n                      html:\n                      '<p>' + that.ListeDesProgrammesRetourner[index] +'</p>' ,\n\n                      showCloseButton: true,\n                      showCancelButton: true,\n                      focusConfirm: false,\n                      confirmButtonText:\n                      '<i class=\"fa fa-thumbs-up\"></i> Great!',\n                });\n\n        },\n\n\n\n\n        BackTosheat: function()\n        {\n\n            /*gestion du button retour */\n            var that = this; \n\n            var spreedsheetcomponent = document.getElementById(\"spreedsheetcomponent\");\n            spreedsheetcomponent.style.display = \"block\";\n\n\n            var gridElement = document.getElementById(\"gridElement\");\n            gridElement.style.display = \"none\"; \n\n\n            Object.assign(that.$data, that.$options.data());\n\n\n\n        },\n\n        VueProgramChoix: function() \n        {    \n                /*Affichage du programme execut*/\n                var that = this;\n                var index = that.idporgramme.slice(0, 1);\n                Vue.swal.fire({\n                      title: '<strong><u>Programme execut</u></strong>',\n                      icon: 'info',\n                      width: 400,\n                      html:\n                      '<p>' + that.ListeDesProgrammesRetourner[index[0].valuse] +'</p>' ,\n\n                      showCloseButton: true,\n                      showCancelButton: true,\n                      focusConfirm: false,\n                      confirmButtonText:\n                      '<i class=\"fa fa-thumbs-up\"></i> Great!',\n                });\n        },\n\n        SendDataQuickFill : function()\n        {\n\n              /*Envoie de donnes  QuickFill*/\n\n              var that =  this;\n              var listeofObjectElement =  new Array();\n              var newObject = new Map();\n              var grid2 = document.getElementsByClassName(\"e-grid\")[1].ej2_instances[0];\n              var resultcomponent = document.getElementById(\"resultatcomponent\");\n              \n\n\n              if(that.ChoiseQuickFill.choix == 1)\n              {\n\n                  setTimeout(function cb() {\n\n\n                        var jsonText1 = JSON.stringify(Array.from(that.listeEntres));\n                        var jsonText3 = JSON.stringify(Array.from(that.ListeElementsEnvoyerQuickFill));\n\n                        \n                        \n                        axios.post(\"http://localhost:8000/QuickFill/sessions/QuickExs\", {\n\n                        headers: {\n                            'Content-Type': 'application/json',\n                        },\n                        data: {\n                          \n                          DataEntreeBrute : jsonText1, \n                          DataGlobal : jsonText3,\n\n                        }\n                      })\n                      .then((response) => {\n\n\n\n                              \n                              var DataFinalToBeReplace = response.data[\"DataFinalToBeReplace\"];\n                              var IndiceColoneSortie = response.data[\"IndiceColoneSortie\"];\n                              var timewastQuickfill = response.data[\"timewastQuickfill\"];\n                              var memoryQuickfill = response.data[\"memoryQuickfill\"];\n                              var NombreExemples = response.data[\"NombreExemples\"];\n                              var listedesprogrammes = response.data[\"listedesprogrammes\"];\n                              var indiceduprogrammechoisi = response.data[\"indiceduprogrammechoisi\"];\n                              var AddElement =new Map();\n                              var AddElement2 =new Map();\n                              var Indiceline = 0;\n                              var Arange= \"\"\n                              var spreadsheet = that.$refs.spreadsheet;\n                              \n                              \n\n                              that.listeSorties.forEach(function(item) {\n                                  var newElement = new Array();\n                                  Indiceline = parseInt(item.position);\n                                  newElement.push(item.Output);\n                                  Arange = getRangeAddress([Indiceline-1, IndiceColoneSortie-1])\n                                  spreadsheet.updateCell({ value: newElement },Arange);\n\n                              });\n\n\n                              DataFinalToBeReplace.forEach(function(item) {\n                                  var newElement = new Array();\n                                  Indiceline = parseInt(item.position);\n                                  newElement.push(item.Output);\n                                  Arange = getRangeAddress([Indiceline-1, IndiceColoneSortie-1])\n                                  spreadsheet.updateCell({ value: newElement },Arange);\n\n                              });\n\n\n\n                              var spreedsheetcomponent = document.getElementById(\"spreedsheetcomponent\");\n                              spreedsheetcomponent.style.display = \"block\";\n\n\n                              var gridElement = document.getElementById(\"gridElement\");\n                              gridElement.style.display = \"none\"; \n\n                              Vue.swal.fire({\n                                title: '<strong><u>Statistic of QuickFill execution</u></strong>',\n                                icon: 'info',\n                                width: 400,\n                                html:\n                                  '<p> Time execution :' + timewastQuickfill + 's <br>' + 'Memory use :' + memoryQuickfill + 'Mo <br>' +'Number of programmes :' +  NombreExemples + ' program(s)</p> ',\n\n                                showCloseButton: true,\n                                showCancelButton: true,\n                                focusConfirm: false,\n                                confirmButtonText:\n                                  '<i class=\"fa fa-thumbs-up\"></i> Great!',\n                              });\n\n                            \n                              \n\n\n\n\n\n                              \n\n                            Object.assign(that.$data, that.$options.data());\n                            \n                            \n                            AddElement.set('valuse',NombreExemples);\n                            AddElement2.set('valuse',indiceduprogrammechoisi);\n\n                            let obj = Array.from(AddElement).reduce((obj, [key, value]) => (\n                                                                            Object.assign(obj, { [key]: value })\n                                                                          ), {});\n                            let obj2 = Array.from(AddElement2).reduce((obj, [key, value]) => (\n                                                                            Object.assign(obj, { [key]: value })\n                                                                          ), {});\n\n                              Vue.set(that.lenofprogrammes,0, obj);\n                              Vue.set(that.idporgramme,0, obj2);\n\n                              listedesprogrammes.forEach((element,index) =>{\n                                  \n\n                              newObject.set('ID' , index)\n                              newObject.set('programme' , element)\n                              let obj3 = Array.from(newObject).reduce((obj, [key, value]) => (\n                                              Object.assign(obj, { [key]: value })\n                                            ), {});\n                              listeofObjectElement.push(obj3)\n\n                              Vue.set(that.ListeDesProgrammesRetourner, that.ListeDesProgrammesRetourner.length, element);\n\n                            });\n\n                            grid2.dataSource = listeofObjectElement;\n\n                              \n                            resultcomponent.style.display = \"block\";\n                                    \n\n\n\n                        \n                        \n                        \n                      })\n                      .catch((e) => {\n                        console.log(e);\n                      });\n                  });\n\n\n\n\n              }\n              else if(that.ChoiseQuickFill.choix == 2)\n              {\n\n\n\n\n                  setTimeout(function cb() {\n\n                        var jsonText1 = JSON.stringify(Array.from(that.listeEntres));\n                        var jsonText3 = JSON.stringify(Array.from(that.ListeElementsEnvoyerQuickFill));\n                        var jsonText4 = JSON.stringify(Array.from(that.listeSorties));\n                        \n                        axios.post(\"http://localhost:8000/QuickFill/filter/QuickExsFilter\", {\n\n                        headers: {\n                            'Content-Type': 'application/json',\n                        },\n                        data: {\n                          \n                          DataEntreeBrute : jsonText1, \n                          DataGlobal : jsonText3,\n                          MesSorties : jsonText4\n                        }\n                      })\n                      .then((response) => {\n\n\n\n                              \n                              var DataFinalToBeReplace = response.data[\"DataFinalToBeReplace\"];\n                              var IndiceColoneSortie = response.data[\"IndiceColoneSortie\"];\n                              var timewastQuickfill = response.data[\"timewastQuickfill\"];\n                              var memoryQuickfill = response.data[\"memoryQuickfill\"];\n                              var NombreExemples = response.data[\"NombreExemples\"];\n                              var listedesprogrammes = response.data[\"listedesprogrammes\"];\n                              var indiceduprogrammechoisi = response.data[\"indiceduprogrammechoisi\"];\n                              var AddElement =new Map();\n                              var AddElement2 =new Map();\n                              var Indiceline = 0;\n                              var Arange= \"\"\n                              var spreadsheet = that.$refs.spreadsheet;\n                              \n                              \n\n                              that.listeSorties.forEach(function(item) {\n                                  var newElement = new Array();\n                                  Indiceline = parseInt(item.position);\n                                  newElement.push(item.Output);\n                                  Arange = getRangeAddress([Indiceline-1, IndiceColoneSortie-1])\n                                  spreadsheet.updateCell({ value: newElement },Arange);\n\n                              });\n\n\n                              DataFinalToBeReplace.forEach(function(item) {\n                                  var newElement = new Array();\n                                  Indiceline = parseInt(item.position);\n                                  newElement.push(item.Output);\n                                  Arange = getRangeAddress([Indiceline-1, IndiceColoneSortie-1])\n                                  spreadsheet.updateCell({ value: newElement },Arange);\n\n                              });\n\n\n\n                              var spreedsheetcomponent = document.getElementById(\"spreedsheetcomponent\");\n                              spreedsheetcomponent.style.display = \"block\";\n\n\n                              var gridElement = document.getElementById(\"gridElement\");\n                              gridElement.style.display = \"none\"; \n\n                              Vue.swal.fire({\n                                title: '<strong><u>Statistic of QuickFill execution</u></strong>',\n                                icon: 'info',\n                                width: 400,\n                                html:\n                                  '<p> Time execution :' + timewastQuickfill + 's <br>' + 'Memory use :' + memoryQuickfill + 'Mo <br>' +'Number of programmes :' +  NombreExemples + ' program(s)</p> ',\n\n                                showCloseButton: true,\n                                showCancelButton: true,\n                                focusConfirm: false,\n                                confirmButtonText:\n                                  '<i class=\"fa fa-thumbs-up\"></i> Great!',\n                              });\n\n                            \n                              \n\n\n\n\n\n                              \n\n                            Object.assign(that.$data, that.$options.data());\n                            \n                            \n                            AddElement.set('valuse',NombreExemples);\n                            AddElement2.set('valuse',indiceduprogrammechoisi);\n\n                            let obj = Array.from(AddElement).reduce((obj, [key, value]) => (\n                                                                            Object.assign(obj, { [key]: value })\n                                                                          ), {});\n                            let obj2 = Array.from(AddElement2).reduce((obj, [key, value]) => (\n                                                                            Object.assign(obj, { [key]: value })\n                                                                          ), {});\n\n                              Vue.set(that.lenofprogrammes,0, obj);\n                              Vue.set(that.idporgramme,0, obj2);\n\n                              listedesprogrammes.forEach((element,index) =>{\n                                  \n\n                              newObject.set('ID' , index)\n                              newObject.set('programme' , element)\n                              let obj3 = Array.from(newObject).reduce((obj, [key, value]) => (\n                                              Object.assign(obj, { [key]: value })\n                                            ), {});\n                              listeofObjectElement.push(obj3)\n\n                              Vue.set(that.ListeDesProgrammesRetourner, that.ListeDesProgrammesRetourner.length, element);\n\n                            });\n\n                            grid2.dataSource = listeofObjectElement;\n\n                              \n                            resultcomponent.style.display = \"block\";\n                                    \n\n\n\n                        \n                        \n                        \n                      })\n                      .catch((e) => {\n                        console.log(e);\n                      });\n                  });\n\n              }\n              else if(that.ChoiseQuickFill.choix == 3)\n              {\n\n\n\n\n\n                  setTimeout(function cb() {\n\n\n                        var jsonText1 = JSON.stringify(Array.from(that.listeEntres));\n                        var jsonText3 = JSON.stringify(Array.from(that.ListeElementsEnvoyerQuickFill));\n                        \n                        axios.post(\"http://localhost:8000/QuickFill/manyblocs/QuickExsManyBlock\", {\n\n                        headers: {\n                            'Content-Type': 'application/json',\n                        },\n                        data: {\n                          \n                          DataEntreeBrute : jsonText1, \n                          DataGlobal : jsonText3\n                        }\n                      })\n                      .then((response) => {\n\n\n\n                              \n                              var DataFinalToBeReplace = response.data[\"DataFinalToBeReplace\"];\n                              var IndiceColoneSortie = response.data[\"IndiceColoneSortie\"];\n                              var timewastQuickfill = response.data[\"timewastQuickfill\"];\n                              var memoryQuickfill = response.data[\"memoryQuickfill\"];\n                              var NombreExemples = response.data[\"NombreExemples\"];\n                              var listedesprogrammes = response.data[\"listedesprogrammes\"];\n                              var indiceduprogrammechoisi = response.data[\"indiceduprogrammechoisi\"];\n                              var AddElement =new Map();\n                              var AddElement2 =new Map();\n                              var Indiceline = 0;\n                              var Arange= \"\"\n                              var spreadsheet = that.$refs.spreadsheet;\n                              \n                              \n                              that.listeSorties.forEach(function(item) {\n                                  var newElement = new Array();\n                                  Indiceline = parseInt(item.position);\n                                  newElement.push(item.Output);\n                                  Arange = getRangeAddress([Indiceline-1, IndiceColoneSortie-1])\n                                  spreadsheet.updateCell({ value: newElement },Arange);\n\n                              });\n\n\n                              DataFinalToBeReplace.forEach(function(item) {\n                                  var newElement = new Array();\n                                  Indiceline = parseInt(item.position);\n                                  newElement.push(item.Output);\n                                  Arange = getRangeAddress([Indiceline-1, IndiceColoneSortie-1])\n                                  spreadsheet.updateCell({ value: newElement },Arange);\n\n                              });\n\n\n\n                              var spreedsheetcomponent = document.getElementById(\"spreedsheetcomponent\");\n                              spreedsheetcomponent.style.display = \"block\";\n\n\n                              var gridElement = document.getElementById(\"gridElement\");\n                              gridElement.style.display = \"none\"; \n\n                              Vue.swal.fire({\n                                title: '<strong><u>Statistic of QuickFill execution</u></strong>',\n                                icon: 'info',\n                                width: 400,\n                                html:\n                                  '<p> Time execution :' + timewastQuickfill + 's <br>' + 'Memory use :' + memoryQuickfill + 'Mo <br>' +'Number of programmes :' +  NombreExemples + ' program(s)</p> ',\n\n                                showCloseButton: true,\n                                showCancelButton: true,\n                                focusConfirm: false,\n                                confirmButtonText:\n                                  '<i class=\"fa fa-thumbs-up\"></i> Great!',\n                              });\n\n                            \n                              \n\n\n\n\n\n                              \n\n                            Object.assign(that.$data, that.$options.data());\n                            \n                            \n                            AddElement.set('valuse',NombreExemples);\n                            AddElement2.set('valuse',indiceduprogrammechoisi);\n\n                            let obj = Array.from(AddElement).reduce((obj, [key, value]) => (\n                                                                            Object.assign(obj, { [key]: value })\n                                                                          ), {});\n                            let obj2 = Array.from(AddElement2).reduce((obj, [key, value]) => (\n                                                                            Object.assign(obj, { [key]: value })\n                                                                          ), {});\n\n                              Vue.set(that.lenofprogrammes,0, obj);\n                              Vue.set(that.idporgramme,0, obj2);\n\n                              listedesprogrammes.forEach((element,index) =>{\n                                  \n\n                              newObject.set('ID' , index)\n                              newObject.set('programme' , element)\n                              let obj3 = Array.from(newObject).reduce((obj, [key, value]) => (\n                                              Object.assign(obj, { [key]: value })\n                                            ), {});\n                              listeofObjectElement.push(obj3)\n\n                              Vue.set(that.ListeDesProgrammesRetourner, that.ListeDesProgrammesRetourner.length, element);\n\n                            });\n\n                            grid2.dataSource = listeofObjectElement;\n\n                              \n                            resultcomponent.style.display = \"block\";\n                                    \n\n\n\n                        \n                        \n                        \n                      })\n                      .catch((e) => {\n                        console.log(e);\n                      });\n                  });\n\n              }\n\n \n\n        },\n        contextMenuClick: function(args) \n        {\n\n\n              var that = this;\n              var grid = document.getElementsByClassName(\"e-grid\")[0].ej2_instances[0];\n\n              if(that.ChoiseQuickFill.choix == 3)\n              {\n\n\n                    if(args.item.id === 'makeblock') \n                    {       \n\n                          \n                            \n\n                            document.execCommand(\"copy\");\n\n                            setTimeout(async () => \n                            {\n                                  const text = await navigator.clipboard.readText();\n                                  var AddBloc =new Map();\n                                  var InfoBlocMenuDistingue = new Map();\n                                  var AddtoContexMenu = new Map();\n                                  var EtsPresent =  false;\n                                  var idEstPresent = false;\n\n\n\n\n\n                                  that.ListeOfIdOfCotextMenu.forEach(function (item) {\n\n                                      \n                                      if(item == text)\n                                      {\n\n                                          EtsPresent =  true;\n                                      }\n                                  });\n\n                                  if(EtsPresent)\n                                  {\n\n                                    alert(' Bloc deja creer')\n                                  }\n                                  else\n                                  {\n                                        \n\n\n                                        that.listeElementToupdate.forEach(function (item,index) {\n                                            if(index == parseInt(that.idsortieselectionner.id, 10))\n                                            {\n                                              idEstPresent = true;\n                                            }\n                                        });\n\n                                        if(idEstPresent == false)\n                                        {\n                                              Vue.set(that.listeElementToupdate,parseInt(that.idsortieselectionner.id, 10), 1);\n                                              \n\n\n                                              AddBloc.set('message',text);\n                                              AddBloc.set('NameBloc','b'+that.listeElementToupdate[parseInt(that.idsortieselectionner.id, 10)]+'***'+text);\n\n                                              AddtoContexMenu.set('text' , 'Contient le bloc ' + text);\n                                              AddtoContexMenu.set('target' , '.e-content');\n                                              AddtoContexMenu.set('id' , text);\n\n                                              InfoBlocMenuDistingue.set('text' , 'Contient le bloc ' + text);\n                                              InfoBlocMenuDistingue.set('idligne' , parseInt(that.idsortieselectionner.id, 10));\n\n                                              let obj = Array.from(AddBloc).reduce((obj, [key, value]) => (\n                                                                          Object.assign(obj, { [key]: value })\n                                                                        ), {});\n                                              let obj2 = Array.from(AddtoContexMenu).reduce((obj, [key, value]) => (\n                                                                          Object.assign(obj, { [key]: value }) \n                                                                        ), {});\n                                              \n                                              let obj3 = Array.from(InfoBlocMenuDistingue).reduce((obj, [key, value]) => (\n                                                                          Object.assign(obj, { [key]: value }) \n                                                                        ), {});\n\n                                              grid.contextMenuModule.contextMenu.insertAfter( \n                                                  [obj2], that.contextMenuItems[that.contextMenuItems.length-1].id, true); \n                                            \n                                              \n                                              \n\n                                              Vue.set(that.ListeOfBlocs,that.ListeOfBlocs.length, obj);\n                                              Vue.set(that.ListeOfIdOfCotextMenu,that.ListeOfIdOfCotextMenu.length, text);\n                                              Vue.set(that.ListeMessagesOfCotextMenu,that.ListeMessagesOfCotextMenu.length, obj3);\n                                              \n\n\n                                        }\n                                        else\n                                        {\n\n\n                                             Vue.set(that.listeElementToupdate,parseInt(that.idsortieselectionner.id, 10), that.listeElementToupdate[parseInt(that.idsortieselectionner.id, 10)] + 1);\n\n                                              AddBloc.set('message',text);\n                                              AddBloc.set('NameBloc','b'+that.listeElementToupdate[parseInt(that.idsortieselectionner.id, 10)]+'***'+text);\n\n                                              AddtoContexMenu.set('text' , 'Contient le bloc ' + text);\n                                              AddtoContexMenu.set('target' , '.e-content');\n                                              AddtoContexMenu.set('id' , text);\n\n                                              InfoBlocMenuDistingue.set('text' , 'Contient le bloc ' + text);\n                                              InfoBlocMenuDistingue.set('idligne' , parseInt(that.idsortieselectionner.id, 10));\n\n                                              let obj = Array.from(AddBloc).reduce((obj, [key, value]) => (\n                                                                          Object.assign(obj, { [key]: value })\n                                                                        ), {});\n                                              let obj2 = Array.from(AddtoContexMenu).reduce((obj, [key, value]) => (\n                                                                          Object.assign(obj, { [key]: value }) \n                                                                        ), {});\n                                              \n                                              let obj3 = Array.from(InfoBlocMenuDistingue).reduce((obj, [key, value]) => (\n                                                                          Object.assign(obj, { [key]: value }) \n                                                                        ), {});\n\n                                              grid.contextMenuModule.contextMenu.insertAfter( \n                                                  [obj2], that.contextMenuItems[that.contextMenuItems.length-1].id, true); \n                                            \n                                              \n                                              \n\n                                              Vue.set(that.ListeOfBlocs,that.ListeOfBlocs.length, obj);\n                                              Vue.set(that.ListeOfIdOfCotextMenu,that.ListeOfIdOfCotextMenu.length, text);\n                                              Vue.set(that.ListeMessagesOfCotextMenu,that.ListeMessagesOfCotextMenu.length, obj3);\n\n\n\n                                        }\n\n\n                                  }\n\n                            }, 200);\n                        \n                          \n                    }\n                    else if(args.item.id === 'makeconst')\n                    {\n\n\n\n\n                          document.execCommand(\"copy\");\n\n                            setTimeout(async () => \n                            {\n\n                                  var AddBloc =new Map();\n                                  var EtsPresent =  false;\n                                  var element = new Map();\n                                  var idEstPresent = false;\n\n                                  const text = await navigator.clipboard.readText();\n\n                                  that.ListeOfIdOfCotextMenu.forEach(function (item) {\n\n                                          \n                                          if(item == text)\n                                          {\n\n                                              EtsPresent =  true;\n                                          }\n                                      });\n\n                                      if(EtsPresent)\n                                      {\n\n                                        alert(' Bloc deja creer')\n                                      }\n                                      else\n                                      {\n                                            that.listeElementToupdate.forEach(function (item,index) {\n                                                if(index == parseInt(that.idsortieselectionner.id, 10))\n                                                {\n                                                  idEstPresent = true;\n                                                }\n                                            });\n                                          if(idEstPresent == false)\n                                          {                            \n                                                Vue.set(that.listeElementToupdate,parseInt(that.idsortieselectionner.id, 10), 1);                \n                                            \n                                                \n                                                \n                                                element = new Map();\n\n                                                AddBloc.set('message','Le bloc ' + text + ' est une  constante');\n                                                AddBloc.set('NameBloc','b'+that.listeElementToupdate[parseInt(that.idsortieselectionner.id, 10)]+'***'+text);\n\n                                                  element.set('b'+that.listeElementToupdate[parseInt(that.idsortieselectionner.id, 10)]+'***'+text,\"ConstStr\");\n                                                  element.set('Entrer' , that.listeSorties[parseInt(that.idsortieselectionner.id, 10)].Entrer);\n                                                  element.set('Output' , that.listeSorties[parseInt(that.idsortieselectionner.id, 10)].Output);\n                                                \n\n\n                                                let obj = Array.from(AddBloc).reduce((obj, [key, value]) => (\n                                                                            Object.assign(obj, { [key]: value })\n                                                                          ), {});\n                                                let obj2 = Array.from(element).reduce((obj2, [key, value]) => (\n                                                                              Object.assign(obj2, { [key]: value })\n                                                                            ), {});\n\n\n                                              \n                                                Vue.set(that.ListeOfBlocs,that.ListeOfBlocs.length, obj);\n                                                Vue.set(that.ListeElementsEnvoyerQuickFill, that.ListeElementsEnvoyerQuickFill.length, obj2);\n                                          }\n                                          else\n                                          {\n\n\n                                                    Vue.set(that.listeElementToupdate,parseInt(that.idsortieselectionner.id, 10), that.listeElementToupdate[parseInt(that.idsortieselectionner.id, 10)] + 1);\n                                                \n                                                    \n                                                    \n                                                    element = new Map();\n\n                                                    AddBloc.set('message','Le bloc ' + text + ' est une  constante');\n                                                    AddBloc.set('NameBloc','b'+that.listeElementToupdate[parseInt(that.idsortieselectionner.id, 10)]+'***'+text);\n\n                                                      element.set('b'+that.listeElementToupdate[parseInt(that.idsortieselectionner.id, 10)]+'***'+text,\"ConstStr\");\n                                                      element.set('Entrer' , that.listeSorties[parseInt(that.idsortieselectionner.id, 10)].Entrer);\n                                                      element.set('Output' , that.listeSorties[parseInt(that.idsortieselectionner.id, 10)].Output);\n                                                    \n\n\n                                                    let obj = Array.from(AddBloc).reduce((obj, [key, value]) => (\n                                                                                Object.assign(obj, { [key]: value })\n                                                                              ), {});\n                                                    let obj2 = Array.from(element).reduce((obj2, [key, value]) => (\n                                                                                  Object.assign(obj2, { [key]: value })\n                                                                                ), {});\n\n\n                                                  \n                                                    Vue.set(that.ListeOfBlocs,that.ListeOfBlocs.length, obj);\n                                                    Vue.set(that.ListeElementsEnvoyerQuickFill, that.ListeElementsEnvoyerQuickFill.length, obj2);\n                                          \n                                          }\n                                            \n\n\n\n\n                                      }\n\n\n\n\n                                \n                                  \n                            }, 200);\n\n                    }\n                    else if(that.ListeOfIdOfCotextMenu.some(e => e === args.item.id))\n                    {\n\n                          document.execCommand(\"copy\");\n\n\n\n                            setTimeout(async () => \n                            {\n\n                                  const text = await navigator.clipboard.readText();\n\n                                  that.ListeOfBlocs.forEach(function (item) {\n\n                                      \n                                      if(item.message == args.item.id)\n                                      {\n\n                                          var element = new Map();\n\n                                          element.set(item.NameBloc,text);\n                                          \n                                          element.set('Entrer' , that.listeSorties[parseInt(that.idsortieselectionner.id, 10)].Entrer);\n                                          element.set('Output' , that.listeSorties[parseInt(that.idsortieselectionner.id, 10)].Output);\n                                          console.log(\"test des test  : \" , args.event.target);\n                                          element.set('KeyOfElement' , \"v\" + (parseInt(that.idColoneUtiliser.id)+1));\n\n                                          console.log(\"fffffffffffffffffffffffff : \" , element);\n                                          let obj = Array.from(element).reduce((obj, [key, value]) => (\n                                                                      Object.assign(obj, { [key]: value })\n                                                                    ), {});\n\n                                          Vue.set(that.ListeElementsEnvoyerQuickFill, that.ListeElementsEnvoyerQuickFill.length, obj);\n\n                                          \n                                      }\n                                  });\n\n                                \n                                  \n                            }, 200);\n\n\n                    \n\n\n\n\n                    }\n\n\n\n              }\n              else\n              {\n\n              \n                    if(args.item.id === 'makeblock') \n                    {       \n\n                            \n                            \n\n                            document.execCommand(\"copy\");\n\n                            setTimeout(async () => \n                            {\n                                  const text = await navigator.clipboard.readText();\n                                  var AddBloc =new Map();\n                                  var InfoBlocMenuDistingue = new Map();\n                                  var AddtoContexMenu = new Map();\n                                  var EtsPresent =  false;\n\n\n\n\n\n                                  that.ListeOfIdOfCotextMenu.forEach(function (item) {\n\n                                      \n                                      if(item == text)\n                                      {\n\n                                          EtsPresent =  true;\n                                      }\n                                  });\n\n                                  if(EtsPresent)\n                                  {\n\n                                    alert(' Bloc deja creer')\n                                  }\n                                  else\n                                  {\n                                        that.ElementToUpdate = that.ElementToUpdate +1 ;\n\n                                        AddBloc.set('message',text);\n                                        AddBloc.set('NameBloc','b'+that.ElementToUpdate+'***'+text);\n                                        InfoBlocMenuDistingue.set('text' , 'Contient le bloc ' + text);\n                                        InfoBlocMenuDistingue.set('idligne' , parseInt(that.idsortieselectionner.id, 10));\n                                        \n\n                                        AddtoContexMenu.set('text' , 'Contient le bloc ' + text);\n                                        AddtoContexMenu.set('target' , '.e-content');\n                                        AddtoContexMenu.set('id' , text);\n\n                                        let obj = Array.from(AddBloc).reduce((obj, [key, value]) => (\n                                                                    Object.assign(obj, { [key]: value })\n                                                                  ), {});\n                                        let obj2 = Array.from(AddtoContexMenu).reduce((obj, [key, value]) => (\n                                                                    Object.assign(obj, { [key]: value }) \n                                                                  ), {});\n                                        \n                                        let obj3 = Array.from(InfoBlocMenuDistingue).reduce((obj, [key, value]) => (\n                                                                          Object.assign(obj, { [key]: value }) \n                                                                        ), {});\n\n                                        grid.contextMenuModule.contextMenu.insertAfter( \n                                            [obj2], that.contextMenuItems[that.contextMenuItems.length-1].id, true); \n                                      \n                                        \n                                        \n\n                                        Vue.set(that.ListeOfBlocs,that.ListeOfBlocs.length, obj);\n                                        Vue.set(that.ListeOfIdOfCotextMenu,that.ListeOfIdOfCotextMenu.length, text);\n                                        Vue.set(that.ListeMessagesOfCotextMenu,that.ListeMessagesOfCotextMenu.length, obj3);\n\n\n\n                                  }\n\n                            }, 200);\n                        \n                          \n                    }\n                    else if(args.item.id === 'makeconst')\n                    {\n\n\n\n\n                          document.execCommand(\"copy\");\n\n                            setTimeout(async () => \n                            {\n\n                                  var AddBloc =new Map();\n                                  var EtsPresent =  false;\n\n                                  const text = await navigator.clipboard.readText();\n\n                                  that.ListeOfIdOfCotextMenu.forEach(function (item) {\n\n                                          \n                                          if(item == text)\n                                          {\n\n                                              EtsPresent =  true;\n                                          }\n                                      });\n\n                                      if(EtsPresent)\n                                      {\n\n                                        alert(' Bloc deja creer')\n                                      }\n                                      else\n                                      {\n                                        \n                                        that.ElementToUpdate = that.ElementToUpdate +1 ;\n                                        var element = new Map();\n\n                                        AddBloc.set('message','Le bloc ' + text + ' est une  constante');\n                                        AddBloc.set('NameBloc','b'+that.ElementToUpdate+'***'+text);\n\n                                          element.set('b'+that.ElementToUpdate+'***'+text,\"ConstStr\");\n                                          element.set('Entrer' , that.listeSorties[0].Entrer);\n                                          element.set('Output' , that.listeSorties[0].Output);\n                                        \n\n\n                                        let obj = Array.from(AddBloc).reduce((obj, [key, value]) => (\n                                                                    Object.assign(obj, { [key]: value })\n                                                                  ), {});\n                                        let obj2 = Array.from(element).reduce((obj2, [key, value]) => (\n                                                                      Object.assign(obj2, { [key]: value })\n                                                                    ), {});\n\n\n                                      \n                                        Vue.set(that.ListeOfBlocs,that.ListeOfBlocs.length, obj);\n                                        Vue.set(that.ListeElementsEnvoyerQuickFill, that.ListeElementsEnvoyerQuickFill.length, obj2);\n\n                                        \n\n\n\n\n                                      }\n\n\n\n\n                                \n                                  \n                            }, 200);\n\n                    }\n\n                    else if(that.ListeOfIdOfCotextMenu.some(e => e === args.item.id))\n                    {\n\n                          document.execCommand(\"copy\");\n\n\n\n                            setTimeout(async () => \n                            {\n\n                                  const text = await navigator.clipboard.readText();\n\n                                  that.ListeOfBlocs.forEach(function (item) {\n\n                                      \n                                      if(item.message == args.item.id)\n                                      {\n\n                                          var element = new Map();\n                                          element.set(item.NameBloc,text);\n                                          element.set('Entrer' , that.listeSorties[0].Entrer);\n                                          element.set('Output' , that.listeSorties[0].Output);\n                                           element.set('KeyOfElement' , \"v\" + (parseInt(that.idColoneUtiliser.id)+1));\n                                           console.log(\"fffffffffffffffffffffffff : \" , element);\n                                          let obj = Array.from(element).reduce((obj, [key, value]) => (\n                                                                      Object.assign(obj, { [key]: value })\n                                                                    ), {});\n\n                                          Vue.set(that.ListeElementsEnvoyerQuickFill, that.ListeElementsEnvoyerQuickFill.length, obj);\n\n                                          \n                                      }\n                                  });\n\n                                \n                                  \n                            }, 200);\n\n\n                    \n\n\n\n\n                    }\n\n\n              }\n\n\n\n\n\n        },\n        contextMenuBeforeOpen: function () \n        {    \n                var spreadsheet = this.$refs.spreadsheet;\n                spreadsheet.removeContextMenuItems(['Paste Special'], false);\n        },  /* Fonction qui s'execute avant l'ouverture du menu contextuel de la page d'accueil(spreadsheet) */\n        rowDataBound: function (args) {\n          \n           var that = this;\n           \n           var index = JSON.parse(JSON.stringify(that.idporgramme.slice(0, 1)));\n\n           \n           if (args.data.ID == index[0].valuse)\n           {\n              \n              args.row.style.backgroundColor = \"MistyRose\";\n              //args.row.css(\"backgroundColor\", \"#F3C3C3\");/*custom css applied to the row */\n           }\n\n               \n   \n       },\n       created: function () \n       {\n                    var that = this;  /* permet de manipuler les variables que retourne la fonction data */\n                    var spreadsheet = that.$refs.spreadsheet;\n                    var usedRange = 0;\n                    var indicelignemax = 0;\n                    var indicedecolenmax = 0;\n                    var septsept = 0;\n                    var sheetName = 0; /* nom de la feuille de calcul active */\n                    var IndiceEvolue = 0; \n                    var ChainePlusTest = \"\";\n                    var DataExpDemo =new Map(); /* Contient le jeu de donnes (entre, sortie) */\n                    var resultcomponent = document.getElementById(\"resultatcomponent\"); /* Recupere la grille des resultats */\n                    resultcomponent.style.display = \"none\";\n\n\n\n\n                    spreadsheet.hideRibbonTabs(['Home' , 'Formulas' , 'Data','Insert' , 'View']); /* masque les elements pris en argument sur le ruban */\n                    spreadsheet.addRibbonTabs([  /* ajout les nouveaux menu sur le ruban */\n                          \n                          { header: { text: 'GenerateResult' }, content: \n                            [\n                              \n                                  \n                                { text: 'FLashFill', tooltipText: 'FlashFill',\n                                  click : function() {\n                                    var resultcomponent = document.getElementById(\"resultatcomponent\");\n                                    resultcomponent.style.display = \"none\";\n\n                                      indicedecolenmax = 0;\n                                      indicedecolenmax = 0;\n                                      septsept = 1;\n                                      ChainePlusTest = \"\";\n                                      DataExpDemo =new Map();\n                                      usedRange = spreadsheet.ej2Instances.getActiveSheet().usedRange; /* contient la plage activev(indice la derniere ligne, indice derniere colone) */\n                                      indicelignemax = usedRange.rowIndex;\n                                      indicedecolenmax = usedRange.colIndex;\n                                      sheetName = spreadsheet.ej2Instances.getActiveSheet().name;\n\n                                      spreadsheet.ej2Instances.getData(sheetName + \"!\"+ getRangeAddress([0, 0, indicelignemax, indicedecolenmax])).then( (cells)=> /* recupere les donnes de la plage active et effetue un traitement popur chaque cellule */\n                                      {\n\n                                              cells.forEach((cell)=>{ /* cells contient l'ensemble de toutes les cellules */\n\n                                                if(IndiceEvolue == indicedecolenmax) /* IndiceEvolue permet de parcourir les colones */\n                                                {\n                                                  \n                                                    /* Recuperation de la chaine de sortie s : elle peut etre vide ou non */\n                                                    ChainePlusTest = ChainePlusTest.substring(0, ChainePlusTest.length-3) /* on surpime la derniere chaine \"+++\" */\n\n                                                    if(typeof(cell.value) == \"undefined\")\n                                                    {\n                                                      DataExpDemo = DataExpDemo.set(septsept.toString()+'***'+'' , ChainePlusTest);\n                                                      /* septsept contient l'indice de la ligne en cours de traitement */\n\n                                                    }\n                                                    else\n                                                    {\n                                                      DataExpDemo = DataExpDemo.set(septsept.toString()+'***'+cell.value,ChainePlusTest);\n                                                      /* DataExpDemo est un dico qui contient les exemple d'entree sortie , stocks sur une certaine forme prenqnt en compte le numero de ligne de chaque exp */\n                                                    }\n                                                    \n                                                    ChainePlusTest = '';\n                                                    IndiceEvolue = 0;\n                                                    septsept = septsept + 1;\n                                                }\n                                                else\n                                                {\n                                                    /* cette partie nous permet de recuperer la chaine d'entre sigma. La recuperation se fait tant qu'on a pa atteint la deniere colone active. */\n                                                    if(typeof(cell.value) != \"undefined\")\n                                                    {\n                                                      ChainePlusTest = ChainePlusTest + cell.value + \"+++\"; \n                                                      IndiceEvolue = IndiceEvolue + 1;\n                                                    }\n\n                                                }\n\n                                              });\n            \n                                          });\n\n                                      setTimeout(function cb() {  /* setTimeout indique que lq fonction cb() doit s'executer en derniere position */\n\n\n                                          var jsonText = JSON.stringify(Array.from(DataExpDemo.entries()));\n                                          \n                                          axios.post(\"http://localhost:8000/FlashFill/sessions/FlashExs\", {\n\n                                          headers: {  /* headers permet de definir le type de contenu qu'on veut envoyer : p il s'agit d'un contenu json dans notre cas */\n                                              'Content-Type': 'application/json',\n                                          },\n                                          data: {\n                                            \n                                            DataEntree : jsonText  /* DataEntree stocke nos dones json , qui sont ensuite traites  au niveau du backend */\n                                          }\n                                        })\n                                        .then((response) => {\n\n\n\n                                          if(response.data[\"MessageCles\"] == \"False\")\n                                          {\n                                              Vue.swal.fire({\n                                                    icon: 'error',\n                                                    title: 'Oops...',\n                                                    text: 'FlashFill Do not understant what you want!',\n                                                    footer: '<p>It can be a condition execution problem : <br> Condition for good execution : <br> <ol><li>Your data most have the same structure</li><li>You most have a least one exemple with a output</li></ol><br></p>'\n                                                  });\n\n                                          }\n                                          else\n                                          {\n                                              \n                                                var DataFinalToBeReplace = response.data[\"DataFinalToBeReplace\"];\n                                                var IndiceColoneSortie = response.data[\"IndiceColoneSortie\"];\n                                                var timewastFlasfill = response.data[\"timewastFlasfill\"];\n                                                var NombreExemples = response.data[\"NombreExemples\"];\n                                                var memoryFlasfill = response.data[\"memoryFlasfill\"];\n                                                var Indiceline = 0;\n                                                var Arange= \"\"\n                                                \n\n\n                                                Object.keys(DataFinalToBeReplace).forEach(function(prop) {\n                                                  \n                                                  Indiceline = parseInt(prop);\n                                                  Arange = getRangeAddress([Indiceline-1, IndiceColoneSortie])\n                                                  Arange = Arange.toString().split(\":\")[0]\n                                                  spreadsheet.updateCell({ value: DataFinalToBeReplace[prop] },Arange);\n                                                  \n                                                }); \n\n\n\n                                                  Vue.swal.fire({\n                                                    title: '<strong><u>Statistic of FlashFill execution</u></strong>',\n                                                    icon: 'info',\n                                                    width: 400,\n                                                    html:\n                                                      '<p> Time execution :' + timewastFlasfill + 's <br>' + 'Number of programmes :' + 'Memory use :' + memoryFlasfill + 'Mo <br>' + NombreExemples + ' programme(s)</p> ',\n\n                                                    showCloseButton: true,\n                                                    showCancelButton: true,\n                                                    focusConfirm: false,\n                                                    confirmButtonText:\n                                                      '<i class=\"fa fa-thumbs-up\"></i> Great!',\n                                                  });\n                                      \n                                                \n\n\n\n                                          }\n                                          \n                                          \n                                        \n                                        })\n                                        .catch((e) => {\n                                          console.log(e);\n                                        });\n                                      });\n\n                                } },\n                                \n                                \n                                { text: 'QuickFill', tooltipText: 'QuickFill',\n                                click : function() \n                                {\n\n\n\n\n\n\n\n\n                                              indicedecolenmax = 0;\n                                              indicedecolenmax = 0;\n                                              septsept = 1;\n                                              ChainePlusTest = \"\";\n                                              DataExpDemo =new Map();\n                                              usedRange = spreadsheet.ej2Instances.getActiveSheet().usedRange;\n                                              indicelignemax = usedRange.rowIndex;\n                                              indicedecolenmax = usedRange.colIndex;\n                                              Vue.set(that.IndiceColoneSortie , 'id' , indicedecolenmax);\n                                              sheetName = spreadsheet.ej2Instances.getActiveSheet().name;\n\n                                                        \n                                              var grid = document.getElementsByClassName(\"e-grid\")[0].ej2_instances[0]; // recuperation de la Grid\n                                              var ElementMapInstanceEntree =  new Map();\n                                              var ElementIntermediareMapInstanceEntree =  new Map();\n                                              var ElementMapInstanceSortie =  new Map();\n                                              var ElementMapInstanceSortie2 =  new Map();\n                                              var listechoix = new Array();\n                                              var decoupersortier = new Array();\n                                              var decouperentree = new Array();\n                                              var MessageCles = true;\n                                              var resultcomponent = document.getElementById(\"resultatcomponent\");\n                                              resultcomponent.style.display = \"none\";\n\n                                              spreadsheet.ej2Instances.getData(sheetName + \"!\"+ getRangeAddress([0, 0, indicelignemax, indicedecolenmax])).then( (cells)=>\n                                              {\n\n                                                    cells.forEach((cell)=>{\n\n                                                      if(IndiceEvolue == indicedecolenmax)\n                                                      {\n                                                        \n                                                        \n                                                          ChainePlusTest = ChainePlusTest.substring(0, ChainePlusTest.length-3)\n\n                                                          if(typeof(cell.value) == \"undefined\")\n                                                          {\n                                                              DataExpDemo.set(septsept.toString()+'***'+'' , ChainePlusTest);\n\n                                                          }\n                                                          else\n                                                          {\n                                                              DataExpDemo.set(septsept.toString()+'***'+cell.value, ChainePlusTest);\n                                                          }\n                                                          \n                                                          ChainePlusTest = '';\n                                                          IndiceEvolue = 0;\n                                                          septsept = septsept + 1;\n                                                      }\n                                                      else\n                                                      {\n                                                          \n                                                          if(typeof(cell.value) != \"undefined\")\n                                                          {\n                                                            ChainePlusTest = ChainePlusTest + cell.value + \"+++\"; \n                                                            IndiceEvolue = IndiceEvolue + 1;\n                                                          }\n\n                                                      }\n\n                                                    });\n          \n                                              });\n\n                                              setTimeout(function cb() {\n\n                                                        \n                                                        DataExpDemo.forEach((value, key) => {\n                                                          \n                                                          if(value === \"\")\n                                                          {\n\n                                                              Vue.swal.fire({\n                                                                  icon: 'error',\n                                                                  title: 'Oops...',\n                                                                  text: 'QuickFill Do not understant what you want!',\n                                                                  footer: '<p>It can be a condition execution problem : <br> Condition for good execution : <br> <ol><li>Your data most have the same structure</li><li>You most have a least one exemple with a output</li></ol><br></p>'\n                                                                });\n\n\n                                                              MessageCles = false;\n\n                                                              return;\n\n                                                          }\n                                                          else\n                                                          {\n\n\n                                                                    ElementMapInstanceEntree = new Map();\n                                                                    ElementMapInstanceSortie = new Map();\n                                                                    ElementMapInstanceSortie2 = new Map();\n                                                                    ElementIntermediareMapInstanceEntree =  new Map();\n                                                                    decouperentree = value.split(\"+++\");\n                                                                    decoupersortier = key.split(\"***\");\n                                                                    \n                                                                    \n\n                                                                    if(decoupersortier.length >1 && decoupersortier[1] != \"\")\n                                                                    {\n\n                                                                        if(value != \"\")\n                                                                        {\n\n                                                                            decouperentree.forEach(function (item, index) {\n                                                                              ElementIntermediareMapInstanceEntree.set(\"v\"+(index+1).toString(), item);\n                                                                              ElementMapInstanceSortie.set(\"v\"+(index+1).toString(), item);\n                                                                              \n                                                                            });\n\n\n                                                                            let obj = Array.from(ElementIntermediareMapInstanceEntree).reduce((obj, [key, value]) => (\n                                                                            Object.assign(obj, { [key]: value })\n                                                                          ), {});\n\n\n                                                                            ElementMapInstanceSortie2.set(\"Entrer\" , obj);\n                                                                            ElementMapInstanceSortie.set(\"Output\" , decoupersortier[1]);\n                                                                            ElementMapInstanceSortie2.set(\"Output\" , decoupersortier[1]);\n                                                                            ElementMapInstanceSortie2.set(\"position\" , decoupersortier[0]);\n\n                                                                            listechoix.push(ElementMapInstanceSortie);\n\n                                                                            let obj2 = Array.from(ElementMapInstanceSortie2).reduce((obj, [key, value]) => (\n                                                                            Object.assign(obj, { [key]: value })\n                                                                          ), {});\n\n\n                                                                            Vue.set(that.listeSorties,that.listeSorties.length,obj2)\n\n                                                                        }\n\n\n\n                                                                    }\n                                                                    else\n                                                                    {\n\n                                                                          if(value != \"\")\n                                                                          {\n                                                                            decouperentree.forEach(function (item, index) {\n                                                                              ElementIntermediareMapInstanceEntree.set(\"v\"+(index+1).toString(), item);\n                                                                            });\n                                                                            let obj = Array.from(ElementIntermediareMapInstanceEntree).reduce((obj, [key, value]) => (\n                                                                            Object.assign(obj, { [key]: value })\n                                                                          ), {});\n                                                                            ElementMapInstanceEntree.set(\"Entrer\" , obj);\n                                                                            ElementMapInstanceEntree.set(\"position\" , decoupersortier[0]);\n                                                                            let obj2 = Array.from(ElementMapInstanceEntree).reduce((obj, [key, value]) => (\n                                                                            Object.assign(obj, { [key]: value })\n                                                                          ), {});\n                                                                            Vue.set(that.listeEntres ,that.listeEntres.length,obj2)\n                                                                            \n                                                                          }\n                                                                          \n\n                                                                    }\n\n\n                                                          }\n\n                                                        });\n\n\n\n\n\n                                                          if(MessageCles)\n                                                          {\n\n                                                            if(listechoix.length == 1)\n                                                            {\n\n\n                                                                    setTimeout(function knr() {\n\n\n                                                                                if(MessageCles)\n                                                                                {\n\n                                                                                      var test2 = new Array();\n                                                                                    \n                                                                                      \n                                                                                      var sortieUtiliser = listechoix[0];\n                                                                                      \n\n                                                                                        let obj = Array.from(sortieUtiliser).reduce((obj, [key, value]) => (\n                                                                                                  Object.assign(obj, { [key]: value }) // Be careful! Maps can have non-String keys; object literals can't.\n                                                                                                ), {});\n                                                                                      \n                                                                                        test2.push(obj);                                                  \n                                                                                                                                        \n                                                                                        grid.dataSource = test2;\n\n                                                                                        var spreedsheetcomponent = document.getElementById(\"spreedsheetcomponent\");\n                                                                                        spreedsheetcomponent.style.display = \"none\";\n\n\n                                                                                        var gridElement = document.getElementById(\"gridElement\");\n                                                                                        gridElement.style.display = \"block\"; \n                                                                                }\n                                                                    });\n                                                              \n                                                            }\n                                                            else\n                                                            {\n\n                                                                Vue.swal.fire({\n                                                                      title: 'Que desirer vous faire avec QuickFIll',\n                                                                      html: `\n                                                                                <div class=\"form-check\">\n                                                                                  <input class=\"form-check-input\" type=\"radio\" name=\"exampleRadios\" id=\"exampleRadios1\" value=\"option1\" checked>\n                                                                                  <label class=\"form-check-label\" for=\"exampleRadios1\">\n                                                                                      Faire du filtrage\n                                                                                  </label>\n                                                                                </div>\n                                                                                <div class=\"form-check\">\n                                                                                  <input class=\"form-check-input\" type=\"radio\" name=\"exampleRadios\" id=\"exampleRadios2\" value=\"option2\">\n                                                                                  <label class=\"form-check-label\" for=\"exampleRadios2\">\n                                                                                    Faire des blocs sur pluiseurs exemples\n                                                                                  </label>\n                                                                                </div>\n                                                                      `,\n                                                                      focusConfirm: false,\n                                                                      preConfirm: () => \n                                                                      {\n                                                                        \n                                                                            if (document.getElementById('exampleRadios1').checked)\n                                                                            {\n                                                                                  setTimeout(function knr() {\n\n\n                                                                                                if(MessageCles)\n                                                                                                {\n                                                                                                    \n                                                                                                      var test2 = new Array();\n                                                                                                    \n                                                                                                      \n                                                                                                      var sortieUtiliser = listechoix[0];\n\n                                                                                                      \n\n                                                                                                      let obj = Array.from(sortieUtiliser).reduce((obj, [key, value]) => (\n                                                                                                                  Object.assign(obj, { [key]: value }) // Be careful! Maps can have non-String keys; object literals can't.\n                                                                                                                ), {});\n                                                                                                      \n                                                                                                      test2.push(obj);                                                  \n                                                                                                                                                        \n                                                                                                      grid.dataSource = test2;\n\n                                                                                                      var spreedsheetcomponent = document.getElementById(\"spreedsheetcomponent\");\n                                                                                                      spreedsheetcomponent.style.display = \"none\";\n\n\n                                                                                                      var gridElement = document.getElementById(\"gridElement\");\n                                                                                                      gridElement.style.display = \"block\"; \n\n                                                                                                      Vue.set(that.ChoiseQuickFill, 'choix' , 2);\n                                                                                                }\n                                                                                    });\n\n                                                                            }\n                                                                            else if(document.getElementById('exampleRadios2').checked)\n                                                                            {\n                                                                                \n\n                                                                                    setTimeout(function knr2() {\n\n\n                                                                                                if(MessageCles)\n                                                                                                {\n\n                                                                                                      var test2 = new Array();\n                                                                                                      listechoix.forEach(function (item) \n                                                                                                      {\n                                                                                                        let obj = Array.from(item).reduce((obj, [key, value]) => (\n                                                                                                                  Object.assign(obj, { [key]: value }) // Be careful! Maps can have non-String keys; object literals can't.\n                                                                                                                ), {});\n                                                                                                        test2.push(obj);\n                                                                                                      });\n                                                \n                                                                                                      grid.dataSource = test2;\n\n                                                                                                      var spreedsheetcomponent = document.getElementById(\"spreedsheetcomponent\");\n                                                                                                      spreedsheetcomponent.style.display = \"none\";\n\n\n                                                                                                      var gridElement = document.getElementById(\"gridElement\");\n                                                                                                      gridElement.style.display = \"block\"; \n\n\n\n                                                                                                      Vue.set(that.ChoiseQuickFill, 'choix' , 3);\n                                                                                                }\n                                                                                    });\n                                                                            \n                                                                            \n                                                                            \n\n                                                                            }\n                                                                          \n                                                                        \n                                                                      }\n                                                                  });\n\n\n\n\n                                                            }\n\n\n\n\n                                                          }\n\n                                                                              \n\n                                                    });\n\n\n\n\n\n\n\n\n                                } } ,\n\n\n\n                                { text: 'FLashFillLoopFree', tooltipText: 'FLashFillLoopFree',\n                                click : function() {\n\n                                    indicedecolenmax = 0;\n                                    indicedecolenmax = 0;\n                                    septsept = 1;\n                                    ChainePlusTest = \"\";\n                                    DataExpDemo =new Map();\n                                    var AddElement =new Map();\n                                    var AddElement2 =new Map();\n                                    var listeofObjectElement =  new Array();\n                                    usedRange = spreadsheet.ej2Instances.getActiveSheet().usedRange;\n                                    indicelignemax = usedRange.rowIndex;\n                                    indicedecolenmax = usedRange.colIndex;\n                                    sheetName = spreadsheet.ej2Instances.getActiveSheet().name;\n                                    var resultcomponent = document.getElementById(\"resultatcomponent\");\n                                    resultcomponent.style.display = \"none\";\n\n                                    spreadsheet.ej2Instances.getData(sheetName + \"!\"+ getRangeAddress([0, 0, indicelignemax, indicedecolenmax])).then( (cells)=>\n                                    {\n\n                                          \n\n                                            cells.forEach((cell)=>{\n\n                                              if(IndiceEvolue == indicedecolenmax)\n                                              {\n                                                \n                                                \n                                                  ChainePlusTest = ChainePlusTest.substring(0, ChainePlusTest.length-3)\n\n                                                  if(typeof(cell.value) == \"undefined\")\n                                                  {\n                                                    DataExpDemo = DataExpDemo.set(septsept.toString()+'***'+'' , ChainePlusTest);\n\n                                                  }\n                                                  else\n                                                  {\n                                                    DataExpDemo = DataExpDemo.set(septsept.toString()+'***'+cell.value,ChainePlusTest);\n                                                  }\n                                                  \n                                                  ChainePlusTest = '';\n                                                  IndiceEvolue = 0;\n                                                  septsept = septsept + 1;\n                                              }\n                                              else\n                                              {\n                                                  \n                                                  if(typeof(cell.value) != \"undefined\")\n                                                  {\n                                                    ChainePlusTest = ChainePlusTest + cell.value + \"+++\"; \n                                                    IndiceEvolue = IndiceEvolue + 1;\n                                                  }\n\n                                              }\n\n                                            });\n          \n                                        });\n\n                                    setTimeout(function cb() {\n\n\n                                        var jsonText = JSON.stringify(Array.from(DataExpDemo.entries()));\n                                        \n                                        axios.post(\"http://localhost:8000/FlashFill/sessions/FlashFreeLoopExs\", {\n\n                                        headers: {\n                                            'Content-Type': 'application/json',\n                                        },\n                                        data: {\n                                          \n                                          DataEntree : jsonText\n                                        }\n                                      })\n                                      .then((response) => {\n\n\n\n                                        if(response.data[\"MessageCles\"] == \"False\")\n                                        {\n                                            Vue.swal.fire({\n                                                  icon: 'error',\n                                                  title: 'Oops...',\n                                                  text: 'FlashFill Do not understant what you want!',\n                                                  footer: '<p>It can be a condition execution problem : <br> Condition for good execution : <br> <ol><li>Your data most have the same structure</li><li>You most have a least one exemple with a output</li></ol><br></p>'\n                                                });\n\n                                        }\n                                        else\n                                        {\n                                            \n                                              var DataFinalToBeReplace = response.data[\"DataFinalToBeReplace\"];\n                                              var IndiceColoneSortie = response.data[\"IndiceColoneSortie\"];\n                                              var timewastFlasfill = response.data[\"timewastFlasfill\"];\n                                              var NombreExemples = response.data[\"NombreExemples\"];\n                                              var memoryFlasfill = response.data[\"memoryFlasfill\"];\n                                              var listedesprogrammes = response.data[\"listedesprogrammes\"];\n                                              var indiceduprogrammechoisi = response.data[\"indiceduprogrammechoisi\"];\n                                              var Indiceline = 0;\n                                              var Arange= \"\";\n                                              var newObject = new Map();\n                                              var grid2 = document.getElementsByClassName(\"e-grid\")[1].ej2_instances[0];\n                                              AddElement.set('valuse',NombreExemples);\n                                              AddElement2.set('valuse',indiceduprogrammechoisi);\n\n                                              \n\n                                              Object.keys(DataFinalToBeReplace).forEach(function(prop) {\n                                                \n                                                Indiceline = parseInt(prop);\n                                                Arange = getRangeAddress([Indiceline-1, IndiceColoneSortie])\n                                                Arange = Arange.toString().split(\":\")[0]\n                                                spreadsheet.updateCell({ value: DataFinalToBeReplace[prop] },Arange);\n                                                \n                                              }); \n\n                                                \n                                              \n\n\n                                               \n                                                \n\n                                                Vue.swal.fire({\n                                                  title: '<strong><u>Statistic of FlashFill execution</u></strong>',\n                                                  icon: 'info',\n                                                  width: 400,\n                                                  html:\n                                                    '<p> Time execution :' + timewastFlasfill + 's <br>' + 'Number of programmes :' +NombreExemples + ' programme(s)<br>'+ 'Memory use :' + memoryFlasfill + 'Mo</p>' ,\n\n                                                  showCloseButton: true,\n                                                  showCancelButton: true,\n                                                  focusConfirm: false,\n                                                  confirmButtonText:\n                                                    '<i class=\"fa fa-thumbs-up\"></i> Great!',\n                                                });\n\n                                                \n                                            \n                                              let obj = Array.from(AddElement).reduce((obj, [key, value]) => (\n                                                                    Object.assign(obj, { [key]: value })\n                                                                  ), {});\n                                              let obj2 = Array.from(AddElement2).reduce((obj, [key, value]) => (\n                                                                    Object.assign(obj, { [key]: value })\n                                                                  ), {});\n                                              \n                                              Object.assign(that.$data, that.$options.data());\n                                              Vue.set(that.lenofprogrammes,0, obj);\n                                              Vue.set(that.idporgramme,0, obj2);\n                                              listedesprogrammes.forEach((element,index) =>{\n                                                  \n\n                                                    newObject.set('ID' , index)\n                                                    newObject.set('programme' , element)\n                                                    let obj3 = Array.from(newObject).reduce((obj, [key, value]) => (\n                                                                    Object.assign(obj, { [key]: value })\n                                                                  ), {});\n                                                    listeofObjectElement.push(obj3)\n\n                                                    Vue.set(that.ListeDesProgrammesRetourner, that.ListeDesProgrammesRetourner.length, element);\n\n                                                    \n\n\n\n\n                                              });\n                                              grid2.dataSource = listeofObjectElement;\n\n                                              var resultcomponent = document.getElementById(\"resultatcomponent\");\n                                              resultcomponent.style.display = \"block\";\n                                    \n                                              \n\n\n\n                                        }\n                                        \n                                        \n                                      \n                                      })\n                                      .catch((e) => {\n                                        console.log(e);\n                                      });\n                                    });\n\n                                } },\n\n\n\n\n\n                            ] \n                            \n                          \n                          \n                          \n                          \n                          }\n                          \n                          \n                          ,{ header: { text: 'Help' }, content: [{ text: 'QuickFill', tooltipText: 'QuickFill',\n                          click : function() {\n\n                                Vue.swal.fire({\n                                      title: '<strong><u>QuicFill Usage example</u></strong>',\n                                      icon: 'info',\n                                      width: 900,\n                                      html:\n                                        '<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/d_elXY2Lcfk\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>',\n                                      showCloseButton: true, /* pour la fermeture du modal */\n                                      showCancelButton: true, /* bouton cancel */\n                                      focusConfirm: false,\n                                      confirmButtonText:\n                                        '<i class=\"fa fa-thumbs-up\"></i> Great!',\n                                    });\n\n\n                          } },\n                          \n                          \n                          { text: 'FlashFill', tooltipText: 'FlashFill',\n                          click : function() {\n\n\n                              Vue.swal.fire({\n                                      title: '<strong><u>FlashFill Usage example</u></strong>',\n                                      icon: 'info',\n                                      width: 900,\n                                      html:\n                                        '<iframe width=\"768\" height=\"360\" src=\"https://www.youtube.com/embed/A7-E6sf6JOc?list=RDQMuK_M4fl3Ds8\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>',\n                                      showCloseButton: true,\n                                      showCancelButton: true,\n                                      focusConfirm: false,\n                                      confirmButtonText:\n                                        '<i class=\"fa fa-thumbs-up\"></i> Great!',\n                                    });\n\n                          } },\n                          \n                          { text: 'About', tooltipText: 'About',\n                          click : function() {\n\n\n                              Vue.swal.fire({\n                                      title: '<strong>About the project</strong>',\n                                      icon: 'info',\n                                      width: 900,\n                                      html:\n                                        '<p>QuicFill project is a project developper by Fokou Vanessa Laure (adress mail) base on the FlashFill algorithme  to test a idea of and iteractive approche using independant bloc approche to generate string progamme base on example</p>',\n                                      showCloseButton: true,\n                                      showCancelButton: true,\n                                      focusConfirm: false,\n                                      confirmButtonText:\n                                        '<i class=\"fa fa-thumbs-up\"></i> Great!',\n                                    });\n                          } },\n                          \n                          ] }]\n                      );\n                        \n                \n            },\n      \n        },\n\n\n\n\n    provide: /* defintion des elements presentes dans la grille */\n    { \n      grid: [ContextMenu, Page], \n    }, \n\n\n\n  }\n</script>\n\n<style>\n  @import \"../node_modules/@syncfusion/ej2-vue-spreadsheet/styles/material.css\";\n  @import '../node_modules/@syncfusion/ej2-base/styles/material.css';  \n  @import '../node_modules/@syncfusion/ej2-buttons/styles/material.css';\n  @import '../node_modules/@syncfusion/ej2-calendars/styles/material.css';    \n  @import '../node_modules/@syncfusion/ej2-dropdowns/styles/material.css';  \n  @import '../node_modules/@syncfusion/ej2-inputs/styles/material.css';  \n  @import '../node_modules/@syncfusion/ej2-navigations/styles/material.css';\n  @import '../node_modules/@syncfusion/ej2-popups/styles/material.css';\n  @import '../node_modules/@syncfusion/ej2-splitbuttons/styles/material.css';\n  @import '../node_modules/@syncfusion/ej2-grids/styles/material.css';\n  @import \"../node_modules/@syncfusion/ej2-spreadsheet/styles/material.css\";\n  @import \"../node_modules/sweetalert2/dist/sweetalert2.min.css\";\n  @import \"../node_modules/@syncfusion/ej2-vue-grids/styles/material.css\";\n</style>\n"]}]}