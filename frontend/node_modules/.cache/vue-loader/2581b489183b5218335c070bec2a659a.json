{"remainingRequest":"/home/knr/Documents/jj/InteractQuickFill/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/knr/Documents/jj/InteractQuickFill/frontend/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/knr/Documents/jj/InteractQuickFill/frontend/src/App.vue","mtime":1635764311523},{"path":"/home/knr/Documents/jj/InteractQuickFill/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/knr/Documents/jj/InteractQuickFill/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/knr/Documents/jj/InteractQuickFill/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/knr/Documents/jj/InteractQuickFill/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBWdWUgZnJvbSAidnVlIjsKaW1wb3J0IHsgU3ByZWFkc2hlZXRQbHVnaW4sZ2V0UmFuZ2VBZGRyZXNzfSBmcm9tICJAc3luY2Z1c2lvbi9lajItdnVlLXNwcmVhZHNoZWV0IjsKaW1wb3J0IHsgR3JpZFBsdWdpbiwgQ29udGV4dE1lbnUsIFBhZ2UgfSBmcm9tICdAc3luY2Z1c2lvbi9lajItdnVlLWdyaWRzJzsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IFZ1ZVN3ZWV0YWxlcnQyIGZyb20gJ3Z1ZS1zd2VldGFsZXJ0Mic7CgoKCgoKVnVlLnVzZShTcHJlYWRzaGVldFBsdWdpbik7IApWdWUudXNlKFZ1ZVN3ZWV0YWxlcnQyKTsgLyogcG91ciBsYSBnZXN0aW9uIGRlcyBtb2RhbHMgKi8KVnVlLnVzZShHcmlkUGx1Z2luKTsKCgoKCgpleHBvcnQgZGVmYXVsdHsKICBuYW1lOiAnQXBwJywKICBkYXRhIDogIGZ1bmN0aW9uKCl7ICAvKiBsYSBmb25jdGlvbiBkYXRhIHJldG91cm5lIGxlcyB2YXJpYWJsZXMgZHluYW1pcXVlICh2YXJpYWJsZXMgcmVhY3RpdmVzKSAqLwogICAgICByZXR1cm4gewoKCiAgICAgICAgICAgIGlkcG9yZ3JhbW1lIDogWwoKICAgICAgICAgICAgXSwgLyogTGUgbnVtZXJvIGRlIHByb2dyYW1tZSBjaG9pc2kuICovCgogICAgICAgICAgICBsZW5vZnByb2dyYW1tZXMgOiBbCgogICAgICAgICAgICBdLCAvKiBOb21icmUgZGUgcHJvZ3JhbW1lcyBvYnRlbnVlcyBhcHJlcyBleGVjdXRpb24gZGUgZmxhc2hmaWxsIG91IHF1aWNrZmlsbCAqLwoKICAgICAgICAgICAgRWxlbWVudFRvVXBkYXRlIDogMCwgIC8qIHZhcmlhYmxlIGRlIGNvbXB0YWdlIGRlcyBibG9jczogYnZsb2MgYjEsIGIyIC4uLi4uICovCgogICAgICAgICAgICBsaXN0ZUVsZW1lbnRUb3VwZGF0ZTpbCgoKICAgICAgICAgICAgXSwgLyogbGlzdGUgZGVzIGV2b2x1dGlvbiBkZXMgaWQgZGVzIGJsb2NzKi8KCiAgICAgICAgICAgIENob2lzZVF1aWNrRmlsbCA6IHsKICAgICAgICAgICAgICBjaG9peCA6IDEKICAgICAgICAgICAgfSwgLypwZXJtZXQgZGUgZGV0ZXJtaW5lciBxdWVsIHZhcmlhbnRlIGRlIFF1aWNrRmlsbCB1dGlsaXPDqSAqLwoKICAgICAgICAgICAgaWRzb3J0aWVzZWxlY3Rpb25uZXIgOnsKICAgICAgICAgICAgICAgIGlkOjEKICAgICAgICAgICAgfSwgLyogSWRlbnRpZmllciBsJ2V4ZW1wbGUgc3VyIGxlcXVlbCBvbiBjcmVlIGxlIGJsb2MqLwoKICAgICAgICAgICAgSW5kaWNlQ29sb25lU29ydGllOnsKICAgICAgICAgICAgICAgIGlkOjEKICAgICAgICAgICAgfSwvKkNvbnRpZW50IGxlIG51bWVybyBkZSBsYSBjb2xvbmUgZGUgc29ydGllKi8KCiAgICAgICAgICAgIGlkQ29sb25lVXRpbGlzZXI6ewoKICAgICAgICAgICAgICBpZDowCiAgICAgICAgICAgIH0sLyogQ29udGllbnQgaWQgZGUgbGEgY29sb25uZSBjb3VycmVudGUgKi8KCiAgICAgICAgICAgIExpc3RlRGVzUHJvZ3JhbW1lc1JldG91cm5lciA6IFsKCiAgICAgICAgICAgIF0sIC8qIENvbnRpZW50IGxhIGxpc3RlIGRlIHByb2dyYW1tZXMgcmV0b3VybmVyIHBhciBmbGFzaGZpbGwgb3UgcXVpY2tmaWxsbCAqLwoKCiAgICAgICAgICAgIExpc3RlRWxlbWVudHNFbnZveWVyUXVpY2tGaWxsOlsKCgoKICAgICAgICAgICAgXSwgIC8qIHRhYmxlYXUgY29udGVuYW50IGxlcyBkb27DqWVzIChibG9jIGRlIHNvcnRpZSArIGNvcnJlc3BvbmRhbmNlKSDDoCBlbnZveWVyIMOgIFF1aWNrRmlsbCAqLwoKCiAgICAgICAgICAgIExpc3RlRGVzU29ydGllc1F1aWNrRmlsbDpbCgoKCiAgICAgICAgICAgIF0sIC8qTGlzdGUgZGUgdG91dGVzIGxlcyBzb3J0aWVzIMOgIGVudm95ZXIgw6AgUXVpY2sgRmlsbCovCgogICAgICAgICAgICBMZXNFbnRyZWVRdWlja0ZpbGwgOgogICAgICAgICAgICBbCgoKICAgICAgICAgICAgXSwgLyogdGFibGVhdSBxdWkgc3RvY2tlIGxlcyBjaGFpbmVzIGQnZW50csOpZSBzaWdtYSBkZSBxdWlja2ZpbGwgKi8KICAgICAgICAgICAgCgogICAgICAgICAgICBMaXN0ZU9mQmxvY3M6IAogICAgICAgICAgICBbCgoKICAgICAgICAgICAgXSwgLyogY29udGllbnQgbGVzIGJsb2NzIGRlIGxhIGNoYWluZSBkZSBzb3J0aWUgKi8KCgogICAgICAgICAgICBjb250ZXh0TWVudUl0ZW1zOiAKICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB7dGV4dDogJ01ha2UgYSBibG9jJywgdGFyZ2V0OiAnLmUtY29udGVudCcsIGlkOiAnbWFrZWJsb2NrJ30sCiAgICAgICAgICAgICAgICB7dGV4dDogJ01ha2UgYSBjb25zdGFudCcsIHRhcmdldDogJy5lLWNvbnRlbnQnLCBpZDogJ21ha2Vjb25zdCd9LAogICAgICAKICAgICAgICAgICAgXSwgLyogQ29udGllbnQgbGVzIGl0ZW1zIGR1IG1lbnUgY29udGV4dHVlbCBkZSBscSBncmlkICovCgoKICAgICAgICAgICAgTGlzdGVPZklkT2ZDb3RleHRNZW51OgogICAgICAgICAgICBbCgogICAgICAgICAgICBdLCAvKiBDb250aWVudCBsZXMgaWRzIGRlcyBub3V2ZWF1IGl0ZW1zIGR1IG1lbnUgY29udGV4dHVlbCBjcsOpZSBwYXIgdXRpbGlzYXRpb24gZGVzIGl0ZW0gIm1ha2UgYSBibG9jIiwgIm1ha2UgYSBjb25zdGFudCIgKi8KCgoKICAgICAgICAgICAgTGlzdGVNZXNzYWdlc09mQ290ZXh0TWVudToKICAgICAgICAgICAgWwoKICAgICAgICAgICAgXSwgLyogQ29udGllbnQgbGVzIG1lc3NhZ2VzIGRlcyBub3V2ZWF1IGl0ZW1zIGR1IG1lbnUgY29udGV4dHVlbCBjcsOpZSBwYXIgdXRpbGlzYXRpb24gZGVzIGl0ZW0gIm1ha2UgYSBibG9jIiwgIm1ha2UgYSBjb25zdGFudCIgKi8KCgogICAgICAgICAgICBsaXN0ZVNvcnRpZXMgOiAKICAgICAgICAgICAgWwoKCiAgICAgICAgICAgIF0sIC8qIHRhYmxlYXUgY29udGVuYW50IGxlcyBjaGFpbmVzIGRlIHNvcnRpZXMgcyAqLwoKICAgICAgICAgICAgbGlzdGVFbnRyZXM6CiAgICAgICAgICAgIFsKCgogICAgICAgICAgICBdLCAvKiB0YWJsZWF1IGNvbnRlbmFudCBsZXMgY2hhaW5lcyBkJ2VudHLDqWUgc2lnbWEgcG91ciBmbGFzaEZpbGwgKi8KCiAgICAgICAgICAgIEluZGljZURlTGFDb2xvbm5lRGVTb3J0aWU6CiAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgaWQ6MQogICAgICAgICAgICB9LCAvKiBDb250aWVudCBpbmRpY2UgZGUgbGEgY29sb25uZSBkZSBzb3J0aWUgKi8KCiAgICAgICAgICAgIG9wZW5Vcmw6ICdodHRwczovL2VqMnNlcnZpY2VzLnN5bmNmdXNpb24uY29tL3Byb2R1Y3Rpb24vd2ViLXNlcnZpY2VzL2FwaS9zcHJlYWRzaGVldC9vcGVuJywKICAgICAgICAgICAgc2F2ZVVybDogJ2h0dHBzOi8vZWoyc2VydmljZXMuc3luY2Z1c2lvbi5jb20vcHJvZHVjdGlvbi93ZWItc2VydmljZXMvYXBpL3NwcmVhZHNoZWV0L3NhdmUnLAogICAgICAgICAgICAKICAgICAgICAKICAgICAgICB9OwoKICB9LAoKICBtZXRob2RzOiAKICB7CgoKICAgIGNvbnRleHRNZW51T3BlbjpmdW5jdGlvbiAoYXJncykgCiAgICB7CgogICAgICB2YXIgZ3JpZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImUtZ3JpZCIpWzBdLmVqMl9pbnN0YW5jZXNbMF07CiAgICAgIHZhciB0aGF0ID0gIHRoaXM7CiAgICAgIHZhciBudW1lcm9JZENvbG9ubmUgPSAgYXJncy5yb3dJbmZvLmNlbGxJbmRleDsKICAgICAgdmFyIG51bWVyb0RlTGlnbmUgPSBhcmdzLnJvd0luZm8ucm93SW5kZXg7CgoKICAgICAgVnVlLnNldCh0aGF0LmlkQ29sb25lVXRpbGlzZXIsJ2lkJyxudW1lcm9JZENvbG9ubmUpOwogICAgICBWdWUuc2V0KHRoYXQuaWRzb3J0aWVzZWxlY3Rpb25uZXIsJ2lkJywgbnVtZXJvRGVMaWduZSk7CgoKCiAgICAgICAgICBpZihudW1lcm9JZENvbG9ubmUgPT0gdGhhdC5JbmRpY2VDb2xvbmVTb3J0aWUuaWQpCiAgICAgICAgICB7CgogICAgICAgICAgICAgIGdyaWQuY29udGV4dE1lbnVNb2R1bGUuY29udGV4dE1lbnUuc2hvd0l0ZW1zKFsnTWFrZSBhIGJsb2MnXSk7CiAgICAgICAgICAgICAgZ3JpZC5jb250ZXh0TWVudU1vZHVsZS5jb250ZXh0TWVudS5zaG93SXRlbXMoWydNYWtlIGEgY29uc3RhbnQnXSk7CgogICAgICAgICAgICAgIGlmKHRoYXQuTGlzdGVNZXNzYWdlc09mQ290ZXh0TWVudS5sZW5ndGggPiAwKQogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgIHRoYXQuTGlzdGVNZXNzYWdlc09mQ290ZXh0TWVudS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoKGl0ZW0udGV4dCAhPSAnTWFrZSBhIGJsb2MnKSAmJiAoaXRlbS50ZXh0ICE9ICdNYWtlIGEgY29uc3RhbnQnKSkKICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmlkLmNvbnRleHRNZW51TW9kdWxlLmNvbnRleHRNZW51LmhpZGVJdGVtcyhbaXRlbS50ZXh0XSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgoKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UKICAgICAgICAgIHsKICAgICAgICAgICAgZ3JpZC5jb250ZXh0TWVudU1vZHVsZS5jb250ZXh0TWVudS5oaWRlSXRlbXMoWydNYWtlIGEgYmxvYyddKTsKICAgICAgICAgICAgZ3JpZC5jb250ZXh0TWVudU1vZHVsZS5jb250ZXh0TWVudS5oaWRlSXRlbXMoWydNYWtlIGEgY29uc3RhbnQnXSk7CgogICAgICAgICAgICBpZih0aGF0Lkxpc3RlTWVzc2FnZXNPZkNvdGV4dE1lbnUubGVuZ3RoID4gMCkKICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgIHRoYXQuTGlzdGVNZXNzYWdlc09mQ290ZXh0TWVudS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoKGl0ZW0udGV4dCAhPSAnTWFrZSBhIGJsb2MnKSAmJiAoaXRlbS50ZXh0ICE9ICdNYWtlIGEgY29uc3RhbnQnKSAmJiAobnVtZXJvRGVMaWduZSA9PSBpdGVtLmlkbGlnbmUpKQogICAgICAgICAgICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmlkLmNvbnRleHRNZW51TW9kdWxlLmNvbnRleHRNZW51LnNob3dJdGVtcyhbaXRlbS50ZXh0XSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZC5jb250ZXh0TWVudU1vZHVsZS5jb250ZXh0TWVudS5oaWRlSXRlbXMoW2l0ZW0udGV4dF0pOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB9KTsKCgogICAgICAgICAgICB9CgoKCiAgICAgICAgICB9CiAgICAgICAgCiAgICB9LAoKCiAgICAgIHJvd1NlbGVjdGVkIDogZnVuY3Rpb24oYXJncykKICAgICAgewogICAgICAgIC8qIEdlc3Rpb24gZXQgYWZmaWNoYWdlIGR1IHByb2dyYW1tZSBjaG9pc2kgZW4gaW50ZXJmYWNlLiAqLwogICAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgICAgICAgICB2YXIgaW5kZXggPSBhcmdzLmRhdGEuSUQ7CiAgICAgICAgICAgICAgVnVlLnN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICc8c3Ryb25nPjx1PlByb2dyYW1tZSBheWFudCBJRCAnICsgaW5kZXggKyAnPC91Pjwvc3Ryb25nPicsCiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2luZm8nLAogICAgICAgICAgICAgICAgICAgIHdpZHRoOiA0MDAsCiAgICAgICAgICAgICAgICAgICAgaHRtbDoKICAgICAgICAgICAgICAgICAgICAnPHA+JyArIHRoYXQuTGlzdGVEZXNQcm9ncmFtbWVzUmV0b3VybmVyW2luZGV4XSArJzwvcD4nICwKCiAgICAgICAgICAgICAgICAgICAgc2hvd0Nsb3NlQnV0dG9uOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsCiAgICAgICAgICAgICAgICAgICAgZm9jdXNDb25maXJtOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDoKICAgICAgICAgICAgICAgICAgICAnPGkgY2xhc3M9ImZhIGZhLXRodW1icy11cCI+PC9pPiBHcmVhdCEnLAogICAgICAgICAgICAgIH0pOwoKICAgICAgfSwKCgoKCiAgICAgIEJhY2tUb3NoZWF0OiBmdW5jdGlvbigpCiAgICAgIHsKCiAgICAgICAgICAvKmdlc3Rpb24gZHUgYnV0dG9uIHJldG91ciAqLwogICAgICAgICAgdmFyIHRoYXQgPSB0aGlzOyAKCiAgICAgICAgICB2YXIgc3ByZWVkc2hlZXRjb21wb25lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic3ByZWVkc2hlZXRjb21wb25lbnQiKTsKICAgICAgICAgIHNwcmVlZHNoZWV0Y29tcG9uZW50LnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOwoKCiAgICAgICAgICB2YXIgZ3JpZEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZ3JpZEVsZW1lbnQiKTsKICAgICAgICAgIGdyaWRFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7IAoKCiAgICAgICAgICBPYmplY3QuYXNzaWduKHRoYXQuJGRhdGEsIHRoYXQuJG9wdGlvbnMuZGF0YSgpKTsKCgoKICAgICAgfSwKCiAgICAgIFZ1ZVByb2dyYW1DaG9peDogZnVuY3Rpb24oKSAKICAgICAgeyAgICAKICAgICAgICAgICAgICAvKkFmZmljaGFnZSBkdSBwcm9ncmFtbWUgZXhlY3V0w6kqLwogICAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgICAgICAgICB2YXIgaW5kZXggPSB0aGF0LmlkcG9yZ3JhbW1lLnNsaWNlKDAsIDEpOwogICAgICAgICAgICAgIFZ1ZS5zd2FsLmZpcmUoewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnPHN0cm9uZz48dT5Qcm9ncmFtbWUgZXhlY3V0w6k8L3U+PC9zdHJvbmc+JywKICAgICAgICAgICAgICAgICAgICBpY29uOiAnaW5mbycsCiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDQwMCwKICAgICAgICAgICAgICAgICAgICBodG1sOgogICAgICAgICAgICAgICAgICAgICc8cD4nICsgdGhhdC5MaXN0ZURlc1Byb2dyYW1tZXNSZXRvdXJuZXJbaW5kZXhbMF0udmFsdXNlXSArJzwvcD4nICwKCiAgICAgICAgICAgICAgICAgICAgc2hvd0Nsb3NlQnV0dG9uOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsCiAgICAgICAgICAgICAgICAgICAgZm9jdXNDb25maXJtOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDoKICAgICAgICAgICAgICAgICAgICAnPGkgY2xhc3M9ImZhIGZhLXRodW1icy11cCI+PC9pPiBHcmVhdCEnLAogICAgICAgICAgICAgIH0pOwogICAgICB9LAoKICAgICAgU2VuZERhdGFRdWlja0ZpbGwgOiBmdW5jdGlvbigpCiAgICAgIHsKCiAgICAgICAgICAgIC8qRW52b2llIGRlIGRvbm7DqWVzIMOgIFF1aWNrRmlsbCovCgogICAgICAgICAgICB2YXIgdGhhdCA9ICB0aGlzOwogICAgICAgICAgICB2YXIgbGlzdGVvZk9iamVjdEVsZW1lbnQgPSAgbmV3IEFycmF5KCk7CiAgICAgICAgICAgIHZhciBuZXdPYmplY3QgPSBuZXcgTWFwKCk7CiAgICAgICAgICAgIHZhciBncmlkMiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImUtZ3JpZCIpWzFdLmVqMl9pbnN0YW5jZXNbMF07CiAgICAgICAgICAgIHZhciByZXN1bHRjb21wb25lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicmVzdWx0YXRjb21wb25lbnQiKTsKICAgICAgICAgICAgCgoKICAgICAgICAgICAgaWYodGhhdC5DaG9pc2VRdWlja0ZpbGwuY2hvaXggPT0gMSkKICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gY2IoKSB7CgoKICAgICAgICAgICAgICAgICAgICAgIHZhciBqc29uVGV4dDEgPSBKU09OLnN0cmluZ2lmeShBcnJheS5mcm9tKHRoYXQubGlzdGVFbnRyZXMpKTsKICAgICAgICAgICAgICAgICAgICAgIHZhciBqc29uVGV4dDMgPSBKU09OLnN0cmluZ2lmeShBcnJheS5mcm9tKHRoYXQuTGlzdGVFbGVtZW50c0Vudm95ZXJRdWlja0ZpbGwpKTsKCiAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgYXhpb3MucG9zdCgiaHR0cDovL2xvY2FsaG9zdDo4MDAwL1F1aWNrRmlsbC9zZXNzaW9ucy9RdWlja0V4cyIsIHsKCiAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJywKICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBEYXRhRW50cmVlQnJ1dGUgOiBqc29uVGV4dDEsIAogICAgICAgICAgICAgICAgICAgICAgICBEYXRhR2xvYmFsIDoganNvblRleHQzLAoKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewoKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgRGF0YUZpbmFsVG9CZVJlcGxhY2UgPSByZXNwb25zZS5kYXRhWyJEYXRhRmluYWxUb0JlUmVwbGFjZSJdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEluZGljZUNvbG9uZVNvcnRpZSA9IHJlc3BvbnNlLmRhdGFbIkluZGljZUNvbG9uZVNvcnRpZSJdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRpbWV3YXN0UXVpY2tmaWxsID0gcmVzcG9uc2UuZGF0YVsidGltZXdhc3RRdWlja2ZpbGwiXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZW1vcnlRdWlja2ZpbGwgPSByZXNwb25zZS5kYXRhWyJtZW1vcnlRdWlja2ZpbGwiXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBOb21icmVFeGVtcGxlcyA9IHJlc3BvbnNlLmRhdGFbIk5vbWJyZUV4ZW1wbGVzIl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdGVkZXNwcm9ncmFtbWVzID0gcmVzcG9uc2UuZGF0YVsibGlzdGVkZXNwcm9ncmFtbWVzIl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kaWNlZHVwcm9ncmFtbWVjaG9pc2kgPSByZXNwb25zZS5kYXRhWyJpbmRpY2VkdXByb2dyYW1tZWNob2lzaSJdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEFkZEVsZW1lbnQgPW5ldyBNYXAoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBBZGRFbGVtZW50MiA9bmV3IE1hcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEluZGljZWxpbmUgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEFyYW5nZT0gIiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcHJlYWRzaGVldCA9IHRoYXQuJHJlZnMuc3ByZWFkc2hlZXQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQubGlzdGVTb3J0aWVzLmZvckVhY2goZnVuY3Rpb24oaXRlbSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdFbGVtZW50ID0gbmV3IEFycmF5KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSW5kaWNlbGluZSA9IHBhcnNlSW50KGl0ZW0ucG9zaXRpb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0VsZW1lbnQucHVzaChpdGVtLk91dHB1dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXJhbmdlID0gZ2V0UmFuZ2VBZGRyZXNzKFtJbmRpY2VsaW5lLTEsIEluZGljZUNvbG9uZVNvcnRpZS0xXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcHJlYWRzaGVldC51cGRhdGVDZWxsKHsgdmFsdWU6IG5ld0VsZW1lbnQgfSxBcmFuZ2UpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRhRmluYWxUb0JlUmVwbGFjZS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3RWxlbWVudCA9IG5ldyBBcnJheSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEluZGljZWxpbmUgPSBwYXJzZUludChpdGVtLnBvc2l0aW9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdFbGVtZW50LnB1c2goaXRlbS5PdXRwdXQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFyYW5nZSA9IGdldFJhbmdlQWRkcmVzcyhbSW5kaWNlbGluZS0xLCBJbmRpY2VDb2xvbmVTb3J0aWUtMV0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ByZWFkc2hlZXQudXBkYXRlQ2VsbCh7IHZhbHVlOiBuZXdFbGVtZW50IH0sQXJhbmdlKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcHJlZWRzaGVldGNvbXBvbmVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzcHJlZWRzaGVldGNvbXBvbmVudCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ByZWVkc2hlZXRjb21wb25lbnQuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBncmlkRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJncmlkRWxlbWVudCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZEVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICJub25lIjsgCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgVnVlLnN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnPHN0cm9uZz48dT5TdGF0aXN0aWMgb2YgUXVpY2tGaWxsIGV4ZWN1dGlvbjwvdT48L3N0cm9uZz4nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnaW5mbycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiA0MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWw6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxwPiBleGVjdXRpb24gdGltZSA6JyArIHRpbWV3YXN0UXVpY2tmaWxsICsgJ3MgPGJyPicgKyAnTWVtb3J5IHVzZSA6JyArIG1lbW9yeVF1aWNrZmlsbCArICdNbyA8YnI+JyArJ051bWJlciBvZiBwcm9ncmFtcyA6JyArICBOb21icmVFeGVtcGxlcyArICcgcHJvZ3JhbShzKTwvcD4gJywKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dDbG9zZUJ1dHRvbjogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXNDb25maXJtOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxpIGNsYXNzPSJmYSBmYS10aHVtYnMtdXAiPjwvaT4gR3JlYXQhJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAoKCgoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKCiAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0aGF0LiRkYXRhLCB0aGF0LiRvcHRpb25zLmRhdGEoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgQWRkRWxlbWVudC5zZXQoJ3ZhbHVzZScsTm9tYnJlRXhlbXBsZXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgIEFkZEVsZW1lbnQyLnNldCgndmFsdXNlJyxpbmRpY2VkdXByb2dyYW1tZWNob2lzaSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvYmogPSBBcnJheS5mcm9tKEFkZEVsZW1lbnQpLnJlZHVjZSgob2JqLCBba2V5LCB2YWx1ZV0pID0+ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKG9iaiwgeyBba2V5XTogdmFsdWUgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSwge30pOwogICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvYmoyID0gQXJyYXkuZnJvbShBZGRFbGVtZW50MikucmVkdWNlKChvYmosIFtrZXksIHZhbHVlXSkgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ob2JqLCB7IFtrZXldOiB2YWx1ZSB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLCB7fSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgVnVlLnNldCh0aGF0Lmxlbm9mcHJvZ3JhbW1lcywwLCBvYmopOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgVnVlLnNldCh0aGF0LmlkcG9yZ3JhbW1lLDAsIG9iajIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RlZGVzcHJvZ3JhbW1lcy5mb3JFYWNoKChlbGVtZW50LGluZGV4KSA9PnsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdPYmplY3Quc2V0KCdJRCcgLCBpbmRleCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld09iamVjdC5zZXQoJ3Byb2dyYW1tZScgLCBlbGVtZW50KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9iajMgPSBBcnJheS5mcm9tKG5ld09iamVjdCkucmVkdWNlKChvYmosIFtrZXksIHZhbHVlXSkgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ob2JqLCB7IFtrZXldOiB2YWx1ZSB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLCB7fSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0ZW9mT2JqZWN0RWxlbWVudC5wdXNoKG9iajMpCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgVnVlLnNldCh0aGF0Lkxpc3RlRGVzUHJvZ3JhbW1lc1JldG91cm5lciwgdGhhdC5MaXN0ZURlc1Byb2dyYW1tZXNSZXRvdXJuZXIubGVuZ3RoLCBlbGVtZW50KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGdyaWQyLmRhdGFTb3VyY2UgPSBsaXN0ZW9mT2JqZWN0RWxlbWVudDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRjb21wb25lbnQuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKCgoKICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KTsKCgoKCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZih0aGF0LkNob2lzZVF1aWNrRmlsbC5jaG9peCA9PSAyKQogICAgICAgICAgICB7CgoKCgogICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiBjYigpIHsKCiAgICAgICAgICAgICAgICAgICAgICB2YXIganNvblRleHQxID0gSlNPTi5zdHJpbmdpZnkoQXJyYXkuZnJvbSh0aGF0Lmxpc3RlRW50cmVzKSk7CiAgICAgICAgICAgICAgICAgICAgICB2YXIganNvblRleHQzID0gSlNPTi5zdHJpbmdpZnkoQXJyYXkuZnJvbSh0aGF0Lkxpc3RlRWxlbWVudHNFbnZveWVyUXVpY2tGaWxsKSk7CiAgICAgICAgICAgICAgICAgICAgICB2YXIganNvblRleHQ0ID0gSlNPTi5zdHJpbmdpZnkoQXJyYXkuZnJvbSh0aGF0Lmxpc3RlU29ydGllcykpOwogICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICBheGlvcy5wb3N0KCJodHRwOi8vbG9jYWxob3N0OjgwMDAvUXVpY2tGaWxsL2ZpbHRlci9RdWlja0V4c0ZpbHRlciIsIHsKCiAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJywKICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBEYXRhRW50cmVlQnJ1dGUgOiBqc29uVGV4dDEsIAogICAgICAgICAgICAgICAgICAgICAgICBEYXRhR2xvYmFsIDoganNvblRleHQzLAogICAgICAgICAgICAgICAgICAgICAgICBNZXNTb3J0aWVzIDoganNvblRleHQ0CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKCgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIERhdGFGaW5hbFRvQmVSZXBsYWNlID0gcmVzcG9uc2UuZGF0YVsiRGF0YUZpbmFsVG9CZVJlcGxhY2UiXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBJbmRpY2VDb2xvbmVTb3J0aWUgPSByZXNwb25zZS5kYXRhWyJJbmRpY2VDb2xvbmVTb3J0aWUiXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0aW1ld2FzdFF1aWNrZmlsbCA9IHJlc3BvbnNlLmRhdGFbInRpbWV3YXN0UXVpY2tmaWxsIl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWVtb3J5UXVpY2tmaWxsID0gcmVzcG9uc2UuZGF0YVsibWVtb3J5UXVpY2tmaWxsIl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgTm9tYnJlRXhlbXBsZXMgPSByZXNwb25zZS5kYXRhWyJOb21icmVFeGVtcGxlcyJdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3RlZGVzcHJvZ3JhbW1lcyA9IHJlc3BvbnNlLmRhdGFbImxpc3RlZGVzcHJvZ3JhbW1lcyJdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGljZWR1cHJvZ3JhbW1lY2hvaXNpID0gcmVzcG9uc2UuZGF0YVsiaW5kaWNlZHVwcm9ncmFtbWVjaG9pc2kiXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBBZGRFbGVtZW50ID1uZXcgTWFwKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgQWRkRWxlbWVudDIgPW5ldyBNYXAoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBJbmRpY2VsaW5lID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBBcmFuZ2U9ICIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3ByZWFkc2hlZXQgPSB0aGF0LiRyZWZzLnNwcmVhZHNoZWV0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0Lmxpc3RlU29ydGllcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3RWxlbWVudCA9IG5ldyBBcnJheSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEluZGljZWxpbmUgPSBwYXJzZUludChpdGVtLnBvc2l0aW9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdFbGVtZW50LnB1c2goaXRlbS5PdXRwdXQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFyYW5nZSA9IGdldFJhbmdlQWRkcmVzcyhbSW5kaWNlbGluZS0xLCBJbmRpY2VDb2xvbmVTb3J0aWUtMV0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ByZWFkc2hlZXQudXBkYXRlQ2VsbCh7IHZhbHVlOiBuZXdFbGVtZW50IH0sQXJhbmdlKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0YUZpbmFsVG9CZVJlcGxhY2UuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0VsZW1lbnQgPSBuZXcgQXJyYXkoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJbmRpY2VsaW5lID0gcGFyc2VJbnQoaXRlbS5wb3NpdGlvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3RWxlbWVudC5wdXNoKGl0ZW0uT3V0cHV0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBcmFuZ2UgPSBnZXRSYW5nZUFkZHJlc3MoW0luZGljZWxpbmUtMSwgSW5kaWNlQ29sb25lU29ydGllLTFdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwcmVhZHNoZWV0LnVwZGF0ZUNlbGwoeyB2YWx1ZTogbmV3RWxlbWVudCB9LEFyYW5nZSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3ByZWVkc2hlZXRjb21wb25lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic3ByZWVkc2hlZXRjb21wb25lbnQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwcmVlZHNoZWV0Y29tcG9uZW50LnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOwoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ3JpZEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZ3JpZEVsZW1lbnQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyaWRFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7IAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZ1ZS5zd2FsLmZpcmUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJzxzdHJvbmc+PHU+U3RhdGlzdGljIG9mIFF1aWNrRmlsbCBleGVjdXRpb248L3U+PC9zdHJvbmc+JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2luZm8nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogNDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8cD4gVGltZSBleGVjdXRpb24gOicgKyB0aW1ld2FzdFF1aWNrZmlsbCArICdzIDxicj4nICsgJ01lbW9yeSB1c2UgOicgKyBtZW1vcnlRdWlja2ZpbGwgKyAnTW8gPGJyPicgKydOdW1iZXIgb2YgcHJvZ3JhbXMgOicgKyAgTm9tYnJlRXhlbXBsZXMgKyAnIHByb2dyYW0ocyk8L3A+ICcsCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93Q2xvc2VCdXR0b246IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzQ29uZmlybTogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8aSBjbGFzcz0iZmEgZmEtdGh1bWJzLXVwIj48L2k+IEdyZWF0IScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKCgoKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhhdC4kZGF0YSwgdGhhdC4kb3B0aW9ucy5kYXRhKCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgIEFkZEVsZW1lbnQuc2V0KCd2YWx1c2UnLE5vbWJyZUV4ZW1wbGVzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBBZGRFbGVtZW50Mi5zZXQoJ3ZhbHVzZScsaW5kaWNlZHVwcm9ncmFtbWVjaG9pc2kpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb2JqID0gQXJyYXkuZnJvbShBZGRFbGVtZW50KS5yZWR1Y2UoKG9iaiwgW2tleSwgdmFsdWVdKSA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihvYmosIHsgW2tleV06IHZhbHVlIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksIHt9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb2JqMiA9IEFycmF5LmZyb20oQWRkRWxlbWVudDIpLnJlZHVjZSgob2JqLCBba2V5LCB2YWx1ZV0pID0+ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKG9iaiwgeyBba2V5XTogdmFsdWUgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSwge30pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZ1ZS5zZXQodGhhdC5sZW5vZnByb2dyYW1tZXMsMCwgb2JqKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZ1ZS5zZXQodGhhdC5pZHBvcmdyYW1tZSwwLCBvYmoyKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0ZWRlc3Byb2dyYW1tZXMuZm9yRWFjaCgoZWxlbWVudCxpbmRleCkgPT57CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3T2JqZWN0LnNldCgnSUQnICwgaW5kZXgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdPYmplY3Quc2V0KCdwcm9ncmFtbWUnICwgZWxlbWVudCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvYmozID0gQXJyYXkuZnJvbShuZXdPYmplY3QpLnJlZHVjZSgob2JqLCBba2V5LCB2YWx1ZV0pID0+ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKG9iaiwgeyBba2V5XTogdmFsdWUgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSwge30pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdGVvZk9iamVjdEVsZW1lbnQucHVzaChvYmozKQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZ1ZS5zZXQodGhhdC5MaXN0ZURlc1Byb2dyYW1tZXNSZXRvdXJuZXIsIHRoYXQuTGlzdGVEZXNQcm9ncmFtbWVzUmV0b3VybmVyLmxlbmd0aCwgZWxlbWVudCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBncmlkMi5kYXRhU291cmNlID0gbGlzdGVvZk9iamVjdEVsZW1lbnQ7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0Y29tcG9uZW50LnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCgoKCiAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYodGhhdC5DaG9pc2VRdWlja0ZpbGwuY2hvaXggPT0gMykKICAgICAgICAgICAgewoKCgoKCiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uIGNiKCkgewoKCiAgICAgICAgICAgICAgICAgICAgICB2YXIganNvblRleHQxID0gSlNPTi5zdHJpbmdpZnkoQXJyYXkuZnJvbSh0aGF0Lmxpc3RlRW50cmVzKSk7CiAgICAgICAgICAgICAgICAgICAgICB2YXIganNvblRleHQzID0gSlNPTi5zdHJpbmdpZnkoQXJyYXkuZnJvbSh0aGF0Lkxpc3RlRWxlbWVudHNFbnZveWVyUXVpY2tGaWxsKSk7CiAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgIGF4aW9zLnBvc3QoImh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9RdWlja0ZpbGwvbWFueWJsb2NzL1F1aWNrRXhzTWFueUJsb2NrIiwgewoKICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLAogICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIERhdGFFbnRyZWVCcnV0ZSA6IGpzb25UZXh0MSwgCiAgICAgICAgICAgICAgICAgICAgICAgIERhdGFHbG9iYWwgOiBqc29uVGV4dDMKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewoKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgRGF0YUZpbmFsVG9CZVJlcGxhY2UgPSByZXNwb25zZS5kYXRhWyJEYXRhRmluYWxUb0JlUmVwbGFjZSJdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEluZGljZUNvbG9uZVNvcnRpZSA9IHJlc3BvbnNlLmRhdGFbIkluZGljZUNvbG9uZVNvcnRpZSJdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRpbWV3YXN0UXVpY2tmaWxsID0gcmVzcG9uc2UuZGF0YVsidGltZXdhc3RRdWlja2ZpbGwiXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZW1vcnlRdWlja2ZpbGwgPSByZXNwb25zZS5kYXRhWyJtZW1vcnlRdWlja2ZpbGwiXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBOb21icmVFeGVtcGxlcyA9IHJlc3BvbnNlLmRhdGFbIk5vbWJyZUV4ZW1wbGVzIl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdGVkZXNwcm9ncmFtbWVzID0gcmVzcG9uc2UuZGF0YVsibGlzdGVkZXNwcm9ncmFtbWVzIl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kaWNlZHVwcm9ncmFtbWVjaG9pc2kgPSByZXNwb25zZS5kYXRhWyJpbmRpY2VkdXByb2dyYW1tZWNob2lzaSJdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEFkZEVsZW1lbnQgPW5ldyBNYXAoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBBZGRFbGVtZW50MiA9bmV3IE1hcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEluZGljZWxpbmUgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEFyYW5nZT0gIiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcHJlYWRzaGVldCA9IHRoYXQuJHJlZnMuc3ByZWFkc2hlZXQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5saXN0ZVNvcnRpZXMuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0VsZW1lbnQgPSBuZXcgQXJyYXkoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJbmRpY2VsaW5lID0gcGFyc2VJbnQoaXRlbS5wb3NpdGlvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3RWxlbWVudC5wdXNoKGl0ZW0uT3V0cHV0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBcmFuZ2UgPSBnZXRSYW5nZUFkZHJlc3MoW0luZGljZWxpbmUtMSwgSW5kaWNlQ29sb25lU29ydGllLTFdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwcmVhZHNoZWV0LnVwZGF0ZUNlbGwoeyB2YWx1ZTogbmV3RWxlbWVudCB9LEFyYW5nZSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGFGaW5hbFRvQmVSZXBsYWNlLmZvckVhY2goZnVuY3Rpb24oaXRlbSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdFbGVtZW50ID0gbmV3IEFycmF5KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSW5kaWNlbGluZSA9IHBhcnNlSW50KGl0ZW0ucG9zaXRpb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0VsZW1lbnQucHVzaChpdGVtLk91dHB1dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXJhbmdlID0gZ2V0UmFuZ2VBZGRyZXNzKFtJbmRpY2VsaW5lLTEsIEluZGljZUNvbG9uZVNvcnRpZS0xXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcHJlYWRzaGVldC51cGRhdGVDZWxsKHsgdmFsdWU6IG5ld0VsZW1lbnQgfSxBcmFuZ2UpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNwcmVlZHNoZWV0Y29tcG9uZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNwcmVlZHNoZWV0Y29tcG9uZW50Iik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcHJlZWRzaGVldGNvbXBvbmVudC5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdyaWRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImdyaWRFbGVtZW50Iik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmlkRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOyAKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBWdWUuc3dhbC5maXJlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICc8c3Ryb25nPjx1PlN0YXRpc3RpYyBvZiBRdWlja0ZpbGwgZXhlY3V0aW9uPC91Pjwvc3Ryb25nPicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICdpbmZvJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDQwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPHA+IFRpbWUgZXhlY3V0aW9uIDonICsgdGltZXdhc3RRdWlja2ZpbGwgKyAncyA8YnI+JyArICdNZW1vcnkgdXNlIDonICsgbWVtb3J5UXVpY2tmaWxsICsgJ01vIDxicj4nICsnTnVtYmVyIG9mIHByb2dyYW1zIDonICsgIE5vbWJyZUV4ZW1wbGVzICsgJyBwcm9ncmFtKHMpPC9wPiAnLAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0Nsb3NlQnV0dG9uOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb2N1c0NvbmZpcm06IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGkgY2xhc3M9ImZhIGZhLXRodW1icy11cCI+PC9pPiBHcmVhdCEnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCgoKCgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHRoYXQuJGRhdGEsIHRoYXQuJG9wdGlvbnMuZGF0YSgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICBBZGRFbGVtZW50LnNldCgndmFsdXNlJyxOb21icmVFeGVtcGxlcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgQWRkRWxlbWVudDIuc2V0KCd2YWx1c2UnLGluZGljZWR1cHJvZ3JhbW1lY2hvaXNpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9iaiA9IEFycmF5LmZyb20oQWRkRWxlbWVudCkucmVkdWNlKChvYmosIFtrZXksIHZhbHVlXSkgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ob2JqLCB7IFtrZXldOiB2YWx1ZSB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLCB7fSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9iajIgPSBBcnJheS5mcm9tKEFkZEVsZW1lbnQyKS5yZWR1Y2UoKG9iaiwgW2tleSwgdmFsdWVdKSA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihvYmosIHsgW2tleV06IHZhbHVlIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksIHt9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBWdWUuc2V0KHRoYXQubGVub2Zwcm9ncmFtbWVzLDAsIG9iaik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBWdWUuc2V0KHRoYXQuaWRwb3JncmFtbWUsMCwgb2JqMik7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdGVkZXNwcm9ncmFtbWVzLmZvckVhY2goKGVsZW1lbnQsaW5kZXgpID0+ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld09iamVjdC5zZXQoJ0lEJyAsIGluZGV4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3T2JqZWN0LnNldCgncHJvZ3JhbW1lJyAsIGVsZW1lbnQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb2JqMyA9IEFycmF5LmZyb20obmV3T2JqZWN0KS5yZWR1Y2UoKG9iaiwgW2tleSwgdmFsdWVdKSA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihvYmosIHsgW2tleV06IHZhbHVlIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksIHt9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3Rlb2ZPYmplY3RFbGVtZW50LnB1c2gob2JqMykKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBWdWUuc2V0KHRoYXQuTGlzdGVEZXNQcm9ncmFtbWVzUmV0b3VybmVyLCB0aGF0Lkxpc3RlRGVzUHJvZ3JhbW1lc1JldG91cm5lci5sZW5ndGgsIGVsZW1lbnQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZDIuZGF0YVNvdXJjZSA9IGxpc3Rlb2ZPYmplY3RFbGVtZW50OwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdGNvbXBvbmVudC5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAoKCgogICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgfQoKCgogICAgICB9LAogICAgICBjb250ZXh0TWVudUNsaWNrOiBmdW5jdGlvbihhcmdzKSAKICAgICAgewoKCiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgICAgICAgdmFyIGdyaWQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJlLWdyaWQiKVswXS5lajJfaW5zdGFuY2VzWzBdOwoKICAgICAgICAgICAgaWYodGhhdC5DaG9pc2VRdWlja0ZpbGwuY2hvaXggPT0gMykKICAgICAgICAgICAgewoKCiAgICAgICAgICAgICAgICAgIGlmKGFyZ3MuaXRlbS5pZCA9PT0gJ21ha2VibG9jaycpIAogICAgICAgICAgICAgICAgICB7ICAgICAgIAoKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCJjb3B5Iik7CgogICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4gCiAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCBuYXZpZ2F0b3IuY2xpcGJvYXJkLnJlYWRUZXh0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEFkZEJsb2MgPW5ldyBNYXAoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgSW5mb0Jsb2NNZW51RGlzdGluZ3VlID0gbmV3IE1hcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBBZGR0b0NvbnRleE1lbnUgPSBuZXcgTWFwKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEV0c1ByZXNlbnQgPSAgZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkRXN0UHJlc2VudCA9IGZhbHNlOwoKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCgoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5MaXN0ZU9mSWRPZkNvdGV4dE1lbnUuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGl0ZW0gPT0gdGV4dCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV0c1ByZXNlbnQgPSAgdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihFdHNQcmVzZW50KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgnIEJsb2MgZGVqw6AgY3JlZXInKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5saXN0ZUVsZW1lbnRUb3VwZGF0ZS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLGluZGV4KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGluZGV4ID09IHBhcnNlSW50KHRoYXQuaWRzb3J0aWVzZWxlY3Rpb25uZXIuaWQsIDEwKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkRXN0UHJlc2VudCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaWRFc3RQcmVzZW50ID09IGZhbHNlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWdWUuc2V0KHRoYXQubGlzdGVFbGVtZW50VG91cGRhdGUscGFyc2VJbnQodGhhdC5pZHNvcnRpZXNlbGVjdGlvbm5lci5pZCwgMTApLCAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFkZEJsb2Muc2V0KCdtZXNzYWdlJyx0ZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBZGRCbG9jLnNldCgnTmFtZUJsb2MnLCdiJyt0aGF0Lmxpc3RlRWxlbWVudFRvdXBkYXRlW3BhcnNlSW50KHRoYXQuaWRzb3J0aWVzZWxlY3Rpb25uZXIuaWQsIDEwKV0rJyoqKicrdGV4dCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFkZHRvQ29udGV4TWVudS5zZXQoJ3RleHQnICwgJ0NvbnRpZW50IGxlIGJsb2MgJyArIHRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFkZHRvQ29udGV4TWVudS5zZXQoJ3RhcmdldCcgLCAnLmUtY29udGVudCcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFkZHRvQ29udGV4TWVudS5zZXQoJ2lkJyAsIHRleHQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJbmZvQmxvY01lbnVEaXN0aW5ndWUuc2V0KCd0ZXh0JyAsICdDb250aWVudCBsZSBibG9jICcgKyB0ZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJbmZvQmxvY01lbnVEaXN0aW5ndWUuc2V0KCdpZGxpZ25lJyAsIHBhcnNlSW50KHRoYXQuaWRzb3J0aWVzZWxlY3Rpb25uZXIuaWQsIDEwKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvYmogPSBBcnJheS5mcm9tKEFkZEJsb2MpLnJlZHVjZSgob2JqLCBba2V5LCB2YWx1ZV0pID0+ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihvYmosIHsgW2tleV06IHZhbHVlIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLCB7fSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9iajIgPSBBcnJheS5mcm9tKEFkZHRvQ29udGV4TWVudSkucmVkdWNlKChvYmosIFtrZXksIHZhbHVlXSkgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKG9iaiwgeyBba2V5XTogdmFsdWUgfSkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLCB7fSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9iajMgPSBBcnJheS5mcm9tKEluZm9CbG9jTWVudURpc3Rpbmd1ZSkucmVkdWNlKChvYmosIFtrZXksIHZhbHVlXSkgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKG9iaiwgeyBba2V5XTogdmFsdWUgfSkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLCB7fSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyaWQuY29udGV4dE1lbnVNb2R1bGUuY29udGV4dE1lbnUuaW5zZXJ0QWZ0ZXIoIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbb2JqMl0sIHRoYXQuY29udGV4dE1lbnVJdGVtc1t0aGF0LmNvbnRleHRNZW51SXRlbXMubGVuZ3RoLTFdLmlkLCB0cnVlKTsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWdWUuc2V0KHRoYXQuTGlzdGVPZkJsb2NzLHRoYXQuTGlzdGVPZkJsb2NzLmxlbmd0aCwgb2JqKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWdWUuc2V0KHRoYXQuTGlzdGVPZklkT2ZDb3RleHRNZW51LHRoYXQuTGlzdGVPZklkT2ZDb3RleHRNZW51Lmxlbmd0aCwgdGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVnVlLnNldCh0aGF0Lkxpc3RlTWVzc2FnZXNPZkNvdGV4dE1lbnUsdGhhdC5MaXN0ZU1lc3NhZ2VzT2ZDb3RleHRNZW51Lmxlbmd0aCwgb2JqMyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVnVlLnNldCh0aGF0Lmxpc3RlRWxlbWVudFRvdXBkYXRlLHBhcnNlSW50KHRoYXQuaWRzb3J0aWVzZWxlY3Rpb25uZXIuaWQsIDEwKSwgdGhhdC5saXN0ZUVsZW1lbnRUb3VwZGF0ZVtwYXJzZUludCh0aGF0Lmlkc29ydGllc2VsZWN0aW9ubmVyLmlkLCAxMCldICsgMSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFkZEJsb2Muc2V0KCdtZXNzYWdlJyx0ZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBZGRCbG9jLnNldCgnTmFtZUJsb2MnLCdiJyt0aGF0Lmxpc3RlRWxlbWVudFRvdXBkYXRlW3BhcnNlSW50KHRoYXQuaWRzb3J0aWVzZWxlY3Rpb25uZXIuaWQsIDEwKV0rJyoqKicrdGV4dCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFkZHRvQ29udGV4TWVudS5zZXQoJ3RleHQnICwgJ0NvbnRpZW50IGxlIGJsb2MgJyArIHRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFkZHRvQ29udGV4TWVudS5zZXQoJ3RhcmdldCcgLCAnLmUtY29udGVudCcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFkZHRvQ29udGV4TWVudS5zZXQoJ2lkJyAsIHRleHQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJbmZvQmxvY01lbnVEaXN0aW5ndWUuc2V0KCd0ZXh0JyAsICdDb250aWVudCBsZSBibG9jICcgKyB0ZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJbmZvQmxvY01lbnVEaXN0aW5ndWUuc2V0KCdpZGxpZ25lJyAsIHBhcnNlSW50KHRoYXQuaWRzb3J0aWVzZWxlY3Rpb25uZXIuaWQsIDEwKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvYmogPSBBcnJheS5mcm9tKEFkZEJsb2MpLnJlZHVjZSgob2JqLCBba2V5LCB2YWx1ZV0pID0+ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihvYmosIHsgW2tleV06IHZhbHVlIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLCB7fSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9iajIgPSBBcnJheS5mcm9tKEFkZHRvQ29udGV4TWVudSkucmVkdWNlKChvYmosIFtrZXksIHZhbHVlXSkgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKG9iaiwgeyBba2V5XTogdmFsdWUgfSkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLCB7fSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9iajMgPSBBcnJheS5mcm9tKEluZm9CbG9jTWVudURpc3Rpbmd1ZSkucmVkdWNlKChvYmosIFtrZXksIHZhbHVlXSkgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKG9iaiwgeyBba2V5XTogdmFsdWUgfSkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLCB7fSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyaWQuY29udGV4dE1lbnVNb2R1bGUuY29udGV4dE1lbnUuaW5zZXJ0QWZ0ZXIoIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbb2JqMl0sIHRoYXQuY29udGV4dE1lbnVJdGVtc1t0aGF0LmNvbnRleHRNZW51SXRlbXMubGVuZ3RoLTFdLmlkLCB0cnVlKTsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWdWUuc2V0KHRoYXQuTGlzdGVPZkJsb2NzLHRoYXQuTGlzdGVPZkJsb2NzLmxlbmd0aCwgb2JqKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWdWUuc2V0KHRoYXQuTGlzdGVPZklkT2ZDb3RleHRNZW51LHRoYXQuTGlzdGVPZklkT2ZDb3RleHRNZW51Lmxlbmd0aCwgdGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVnVlLnNldCh0aGF0Lkxpc3RlTWVzc2FnZXNPZkNvdGV4dE1lbnUsdGhhdC5MaXN0ZU1lc3NhZ2VzT2ZDb3RleHRNZW51Lmxlbmd0aCwgb2JqMyk7CgoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAyMDApOwogICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGVsc2UgaWYoYXJncy5pdGVtLmlkID09PSAnbWFrZWNvbnN0JykKICAgICAgICAgICAgICAgICAgewoKCgoKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoImNvcHkiKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChhc3luYyAoKSA9PiAKICAgICAgICAgICAgICAgICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBBZGRCbG9jID1uZXcgTWFwKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEV0c1ByZXNlbnQgPSAgZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBuZXcgTWFwKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkRXN0UHJlc2VudCA9IGZhbHNlOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgbmF2aWdhdG9yLmNsaXBib2FyZC5yZWFkVGV4dCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0Lkxpc3RlT2ZJZE9mQ290ZXh0TWVudS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihpdGVtID09IHRleHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV0c1ByZXNlbnQgPSAgdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihFdHNQcmVzZW50KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCcgQmxvYyBkZWphIGNyZWVyJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5saXN0ZUVsZW1lbnRUb3VwZGF0ZS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLGluZGV4KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihpbmRleCA9PSBwYXJzZUludCh0aGF0Lmlkc29ydGllc2VsZWN0aW9ubmVyLmlkLCAxMCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkRXN0UHJlc2VudCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaWRFc3RQcmVzZW50ID09IGZhbHNlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZ1ZS5zZXQodGhhdC5saXN0ZUVsZW1lbnRUb3VwZGF0ZSxwYXJzZUludCh0aGF0Lmlkc29ydGllc2VsZWN0aW9ubmVyLmlkLCAxMCksIDEpOyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudCA9IG5ldyBNYXAoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBZGRCbG9jLnNldCgnbWVzc2FnZScsJ0xlIGJsb2MgJyArIHRleHQgKyAnIGVzdCB1bmUgIGNvbnN0YW50ZScpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWRkQmxvYy5zZXQoJ05hbWVCbG9jJywnYicrdGhhdC5saXN0ZUVsZW1lbnRUb3VwZGF0ZVtwYXJzZUludCh0aGF0Lmlkc29ydGllc2VsZWN0aW9ubmVyLmlkLCAxMCldKycqKionK3RleHQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zZXQoJ2InK3RoYXQubGlzdGVFbGVtZW50VG91cGRhdGVbcGFyc2VJbnQodGhhdC5pZHNvcnRpZXNlbGVjdGlvbm5lci5pZCwgMTApXSsnKioqJyt0ZXh0LCJDb25zdFN0ciIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNldCgnRW50cmVyJyAsIHRoYXQubGlzdGVTb3J0aWVzW3BhcnNlSW50KHRoYXQuaWRzb3J0aWVzZWxlY3Rpb25uZXIuaWQsIDEwKV0uRW50cmVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zZXQoJ091dHB1dCcgLCB0aGF0Lmxpc3RlU29ydGllc1twYXJzZUludCh0aGF0Lmlkc29ydGllc2VsZWN0aW9ubmVyLmlkLCAxMCldLk91dHB1dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9iaiA9IEFycmF5LmZyb20oQWRkQmxvYykucmVkdWNlKChvYmosIFtrZXksIHZhbHVlXSkgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ob2JqLCB7IFtrZXldOiB2YWx1ZSB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLCB7fSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb2JqMiA9IEFycmF5LmZyb20oZWxlbWVudCkucmVkdWNlKChvYmoyLCBba2V5LCB2YWx1ZV0pID0+ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ob2JqMiwgeyBba2V5XTogdmFsdWUgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLCB7fSk7CgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZ1ZS5zZXQodGhhdC5MaXN0ZU9mQmxvY3MsdGhhdC5MaXN0ZU9mQmxvY3MubGVuZ3RoLCBvYmopOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVnVlLnNldCh0aGF0Lkxpc3RlRWxlbWVudHNFbnZveWVyUXVpY2tGaWxsLCB0aGF0Lkxpc3RlRWxlbWVudHNFbnZveWVyUXVpY2tGaWxsLmxlbmd0aCwgb2JqMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWdWUuc2V0KHRoYXQubGlzdGVFbGVtZW50VG91cGRhdGUscGFyc2VJbnQodGhhdC5pZHNvcnRpZXNlbGVjdGlvbm5lci5pZCwgMTApLCB0aGF0Lmxpc3RlRWxlbWVudFRvdXBkYXRlW3BhcnNlSW50KHRoYXQuaWRzb3J0aWVzZWxlY3Rpb25uZXIuaWQsIDEwKV0gKyAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBuZXcgTWFwKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFkZEJsb2Muc2V0KCdtZXNzYWdlJywnTGUgYmxvYyAnICsgdGV4dCArICcgZXN0IHVuZSAgY29uc3RhbnRlJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWRkQmxvYy5zZXQoJ05hbWVCbG9jJywnYicrdGhhdC5saXN0ZUVsZW1lbnRUb3VwZGF0ZVtwYXJzZUludCh0aGF0Lmlkc29ydGllc2VsZWN0aW9ubmVyLmlkLCAxMCldKycqKionK3RleHQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0KCdiJyt0aGF0Lmxpc3RlRWxlbWVudFRvdXBkYXRlW3BhcnNlSW50KHRoYXQuaWRzb3J0aWVzZWxlY3Rpb25uZXIuaWQsIDEwKV0rJyoqKicrdGV4dCwiQ29uc3RTdHIiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0KCdFbnRyZXInICwgdGhhdC5saXN0ZVNvcnRpZXNbcGFyc2VJbnQodGhhdC5pZHNvcnRpZXNlbGVjdGlvbm5lci5pZCwgMTApXS5FbnRyZXIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zZXQoJ091dHB1dCcgLCB0aGF0Lmxpc3RlU29ydGllc1twYXJzZUludCh0aGF0Lmlkc29ydGllc2VsZWN0aW9ubmVyLmlkLCAxMCldLk91dHB1dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb2JqID0gQXJyYXkuZnJvbShBZGRCbG9jKS5yZWR1Y2UoKG9iaiwgW2tleSwgdmFsdWVdKSA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ob2JqLCB7IFtrZXldOiB2YWx1ZSB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSwge30pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvYmoyID0gQXJyYXkuZnJvbShlbGVtZW50KS5yZWR1Y2UoKG9iajIsIFtrZXksIHZhbHVlXSkgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ob2JqMiwgeyBba2V5XTogdmFsdWUgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSwge30pOwoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZ1ZS5zZXQodGhhdC5MaXN0ZU9mQmxvY3MsdGhhdC5MaXN0ZU9mQmxvY3MubGVuZ3RoLCBvYmopOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZ1ZS5zZXQodGhhdC5MaXN0ZUVsZW1lbnRzRW52b3llclF1aWNrRmlsbCwgdGhhdC5MaXN0ZUVsZW1lbnRzRW52b3llclF1aWNrRmlsbC5sZW5ndGgsIG9iajIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAoKCgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKCgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMjAwKTsKCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgZWxzZSBpZih0aGF0Lkxpc3RlT2ZJZE9mQ290ZXh0TWVudS5zb21lKGUgPT4gZSA9PT0gYXJncy5pdGVtLmlkKSkKICAgICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoImNvcHkiKTsKCgoKICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGFzeW5jICgpID0+IAogICAgICAgICAgICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IG5hdmlnYXRvci5jbGlwYm9hcmQucmVhZFRleHQoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5MaXN0ZU9mQmxvY3MuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGl0ZW0ubWVzc2FnZSA9PSBhcmdzLml0ZW0uaWQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IG5ldyBNYXAoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNldChpdGVtLk5hbWVCbG9jLHRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNldCgnRW50cmVyJyAsIHRoYXQubGlzdGVTb3J0aWVzW3BhcnNlSW50KHRoYXQuaWRzb3J0aWVzZWxlY3Rpb25uZXIuaWQsIDEwKV0uRW50cmVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0KCdPdXRwdXQnICwgdGhhdC5saXN0ZVNvcnRpZXNbcGFyc2VJbnQodGhhdC5pZHNvcnRpZXNlbGVjdGlvbm5lci5pZCwgMTApXS5PdXRwdXQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coInRlc3QgZGVzIHRlc3QgIDogIiAsIGFyZ3MuZXZlbnQudGFyZ2V0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0KCdLZXlPZkVsZW1lbnQnICwgInYiICsgKHBhcnNlSW50KHRoYXQuaWRDb2xvbmVVdGlsaXNlci5pZCkrMSkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmIDogIiAsIGVsZW1lbnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9iaiA9IEFycmF5LmZyb20oZWxlbWVudCkucmVkdWNlKChvYmosIFtrZXksIHZhbHVlXSkgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ob2JqLCB7IFtrZXldOiB2YWx1ZSB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLCB7fSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVnVlLnNldCh0aGF0Lkxpc3RlRWxlbWVudHNFbnZveWVyUXVpY2tGaWxsLCB0aGF0Lkxpc3RlRWxlbWVudHNFbnZveWVyUXVpY2tGaWxsLmxlbmd0aCwgb2JqKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMjAwKTsKCgogICAgICAgICAgICAgICAgICAKCgoKCiAgICAgICAgICAgICAgICAgIH0KCgoKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgIHsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICBpZihhcmdzLml0ZW0uaWQgPT09ICdtYWtlYmxvY2snKSAKICAgICAgICAgICAgICAgICAgeyAgICAgICAKCiAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCJjb3B5Iik7CgogICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4gCiAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCBuYXZpZ2F0b3IuY2xpcGJvYXJkLnJlYWRUZXh0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEFkZEJsb2MgPW5ldyBNYXAoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgSW5mb0Jsb2NNZW51RGlzdGluZ3VlID0gbmV3IE1hcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBBZGR0b0NvbnRleE1lbnUgPSBuZXcgTWFwKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEV0c1ByZXNlbnQgPSAgZmFsc2U7CgoKCgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0Lkxpc3RlT2ZJZE9mQ290ZXh0TWVudS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaXRlbSA9PSB0ZXh0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXRzUHJlc2VudCA9ICB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKEV0c1ByZXNlbnQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCcgQmxvYyBkZWphIGNyZWVyJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LkVsZW1lbnRUb1VwZGF0ZSA9IHRoYXQuRWxlbWVudFRvVXBkYXRlICsxIDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWRkQmxvYy5zZXQoJ21lc3NhZ2UnLHRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFkZEJsb2Muc2V0KCdOYW1lQmxvYycsJ2InK3RoYXQuRWxlbWVudFRvVXBkYXRlKycqKionK3RleHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEluZm9CbG9jTWVudURpc3Rpbmd1ZS5zZXQoJ3RleHQnICwgJ0NvbnRpZW50IGxlIGJsb2MgJyArIHRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEluZm9CbG9jTWVudURpc3Rpbmd1ZS5zZXQoJ2lkbGlnbmUnICwgcGFyc2VJbnQodGhhdC5pZHNvcnRpZXNlbGVjdGlvbm5lci5pZCwgMTApKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWRkdG9Db250ZXhNZW51LnNldCgndGV4dCcgLCAnQ29udGllbnQgbGUgYmxvYyAnICsgdGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWRkdG9Db250ZXhNZW51LnNldCgndGFyZ2V0JyAsICcuZS1jb250ZW50Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWRkdG9Db250ZXhNZW51LnNldCgnaWQnICwgdGV4dCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvYmogPSBBcnJheS5mcm9tKEFkZEJsb2MpLnJlZHVjZSgob2JqLCBba2V5LCB2YWx1ZV0pID0+ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihvYmosIHsgW2tleV06IHZhbHVlIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLCB7fSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9iajIgPSBBcnJheS5mcm9tKEFkZHRvQ29udGV4TWVudSkucmVkdWNlKChvYmosIFtrZXksIHZhbHVlXSkgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKG9iaiwgeyBba2V5XTogdmFsdWUgfSkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLCB7fSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9iajMgPSBBcnJheS5mcm9tKEluZm9CbG9jTWVudURpc3Rpbmd1ZSkucmVkdWNlKChvYmosIFtrZXksIHZhbHVlXSkgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKG9iaiwgeyBba2V5XTogdmFsdWUgfSkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLCB7fSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyaWQuY29udGV4dE1lbnVNb2R1bGUuY29udGV4dE1lbnUuaW5zZXJ0QWZ0ZXIoIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbb2JqMl0sIHRoYXQuY29udGV4dE1lbnVJdGVtc1t0aGF0LmNvbnRleHRNZW51SXRlbXMubGVuZ3RoLTFdLmlkLCB0cnVlKTsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWdWUuc2V0KHRoYXQuTGlzdGVPZkJsb2NzLHRoYXQuTGlzdGVPZkJsb2NzLmxlbmd0aCwgb2JqKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWdWUuc2V0KHRoYXQuTGlzdGVPZklkT2ZDb3RleHRNZW51LHRoYXQuTGlzdGVPZklkT2ZDb3RleHRNZW51Lmxlbmd0aCwgdGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVnVlLnNldCh0aGF0Lkxpc3RlTWVzc2FnZXNPZkNvdGV4dE1lbnUsdGhhdC5MaXN0ZU1lc3NhZ2VzT2ZDb3RleHRNZW51Lmxlbmd0aCwgb2JqMyk7CgoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAyMDApOwogICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGVsc2UgaWYoYXJncy5pdGVtLmlkID09PSAnbWFrZWNvbnN0JykKICAgICAgICAgICAgICAgICAgewoKCgoKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoImNvcHkiKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChhc3luYyAoKSA9PiAKICAgICAgICAgICAgICAgICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBBZGRCbG9jID1uZXcgTWFwKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEV0c1ByZXNlbnQgPSAgZmFsc2U7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCBuYXZpZ2F0b3IuY2xpcGJvYXJkLnJlYWRUZXh0KCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuTGlzdGVPZklkT2ZDb3RleHRNZW51LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGl0ZW0gPT0gdGV4dCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXRzUHJlc2VudCA9ICB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKEV0c1ByZXNlbnQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoJyBCbG9jIGRlamEgY3JlZXInKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuRWxlbWVudFRvVXBkYXRlID0gdGhhdC5FbGVtZW50VG9VcGRhdGUgKzEgOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gbmV3IE1hcCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBZGRCbG9jLnNldCgnbWVzc2FnZScsJ0xlIGJsb2MgJyArIHRleHQgKyAnIGVzdCB1bmUgIGNvbnN0YW50ZScpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFkZEJsb2Muc2V0KCdOYW1lQmxvYycsJ2InK3RoYXQuRWxlbWVudFRvVXBkYXRlKycqKionK3RleHQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0KCdiJyt0aGF0LkVsZW1lbnRUb1VwZGF0ZSsnKioqJyt0ZXh0LCJDb25zdFN0ciIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zZXQoJ0VudHJlcicgLCB0aGF0Lmxpc3RlU29ydGllc1swXS5FbnRyZXIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zZXQoJ091dHB1dCcgLCB0aGF0Lmxpc3RlU29ydGllc1swXS5PdXRwdXQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9iaiA9IEFycmF5LmZyb20oQWRkQmxvYykucmVkdWNlKChvYmosIFtrZXksIHZhbHVlXSkgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKG9iaiwgeyBba2V5XTogdmFsdWUgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksIHt9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb2JqMiA9IEFycmF5LmZyb20oZWxlbWVudCkucmVkdWNlKChvYmoyLCBba2V5LCB2YWx1ZV0pID0+ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKG9iajIsIHsgW2tleV06IHZhbHVlIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksIHt9KTsKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWdWUuc2V0KHRoYXQuTGlzdGVPZkJsb2NzLHRoYXQuTGlzdGVPZkJsb2NzLmxlbmd0aCwgb2JqKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWdWUuc2V0KHRoYXQuTGlzdGVFbGVtZW50c0Vudm95ZXJRdWlja0ZpbGwsIHRoYXQuTGlzdGVFbGVtZW50c0Vudm95ZXJRdWlja0ZpbGwubGVuZ3RoLCBvYmoyKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCgoKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgoKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAyMDApOwoKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgZWxzZSBpZih0aGF0Lkxpc3RlT2ZJZE9mQ290ZXh0TWVudS5zb21lKGUgPT4gZSA9PT0gYXJncy5pdGVtLmlkKSkKICAgICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoImNvcHkiKTsKCgoKICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGFzeW5jICgpID0+IAogICAgICAgICAgICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IG5hdmlnYXRvci5jbGlwYm9hcmQucmVhZFRleHQoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5MaXN0ZU9mQmxvY3MuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGl0ZW0ubWVzc2FnZSA9PSBhcmdzLml0ZW0uaWQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IG5ldyBNYXAoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0KGl0ZW0uTmFtZUJsb2MsdGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNldCgnRW50cmVyJyAsIHRoYXQubGlzdGVTb3J0aWVzWzBdLkVudHJlcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNldCgnT3V0cHV0JyAsIHRoYXQubGlzdGVTb3J0aWVzWzBdLk91dHB1dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zZXQoJ0tleU9mRWxlbWVudCcgLCAidiIgKyAocGFyc2VJbnQodGhhdC5pZENvbG9uZVV0aWxpc2VyLmlkKSsxKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coImZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmYgOiAiICwgZWxlbWVudCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb2JqID0gQXJyYXkuZnJvbShlbGVtZW50KS5yZWR1Y2UoKG9iaiwgW2tleSwgdmFsdWVdKSA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihvYmosIHsgW2tleV06IHZhbHVlIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksIHt9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWdWUuc2V0KHRoYXQuTGlzdGVFbGVtZW50c0Vudm95ZXJRdWlja0ZpbGwsIHRoYXQuTGlzdGVFbGVtZW50c0Vudm95ZXJRdWlja0ZpbGwubGVuZ3RoLCBvYmopOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAyMDApOwoKCiAgICAgICAgICAgICAgICAgIAoKCgoKICAgICAgICAgICAgICAgICAgfQoKCiAgICAgICAgICAgIH0KCgoKCgogICAgICB9LAogICAgICBjb250ZXh0TWVudUJlZm9yZU9wZW46IGZ1bmN0aW9uICgpIAogICAgICB7ICAgIAogICAgICAgICAgICAgIHZhciBzcHJlYWRzaGVldCA9IHRoaXMuJHJlZnMuc3ByZWFkc2hlZXQ7CiAgICAgICAgICAgICAgc3ByZWFkc2hlZXQucmVtb3ZlQ29udGV4dE1lbnVJdGVtcyhbJ1Bhc3RlIFNwZWNpYWwnXSwgZmFsc2UpOwogICAgICB9LCAgLyogRm9uY3Rpb24gcXVpIHMnZXhlY3V0ZSBhdmFudCBsJ291dmVydHVyZSBkdSBtZW51IGNvbnRleHR1ZWwgZGUgbGEgcGFnZSBkJ2FjY3VlaWwoc3ByZWFkc2hlZXQpICovCiAgICAgIHJvd0RhdGFCb3VuZDogZnVuY3Rpb24gKGFyZ3MpIHsKICAgICAgICAKICAgICAgICAgdmFyIHRoYXQgPSB0aGlzOwogICAgICAgICAKICAgICAgICAgdmFyIGluZGV4ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGF0LmlkcG9yZ3JhbW1lLnNsaWNlKDAsIDEpKSk7CgogICAgICAgICAKICAgICAgICAgaWYgKGFyZ3MuZGF0YS5JRCA9PSBpbmRleFswXS52YWx1c2UpCiAgICAgICAgIHsKICAgICAgICAgICAgCiAgICAgICAgICAgIGFyZ3Mucm93LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICJNaXN0eVJvc2UiOwogICAgICAgICAgICAvL2FyZ3Mucm93LmNzcygiYmFja2dyb3VuZENvbG9yIiwgIiNGM0MzQzMiKTsvKmN1c3RvbSBjc3MgYXBwbGllZCB0byB0aGUgcm93ICovCiAgICAgICAgIH0KCiAgICAgICAgICAgICAKIAogICAgIH0sCiAgICAgY3JlYXRlZDogZnVuY3Rpb24gKCkgCiAgICAgewogICAgICAgICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7ICAvKiBwZXJtZXQgZGUgbWFuaXB1bGVyIGxlcyB2YXJpYWJsZXMgcXVlIHJldG91cm5lIGxhIGZvbmN0aW9uIGRhdGEgKi8KICAgICAgICAgICAgICAgICAgdmFyIHNwcmVhZHNoZWV0ID0gdGhhdC4kcmVmcy5zcHJlYWRzaGVldDsKICAgICAgICAgICAgICAgICAgdmFyIHVzZWRSYW5nZSA9IDA7CiAgICAgICAgICAgICAgICAgIHZhciBpbmRpY2VsaWduZW1heCA9IDA7CiAgICAgICAgICAgICAgICAgIHZhciBpbmRpY2VkZWNvbGVubWF4ID0gMDsKICAgICAgICAgICAgICAgICAgdmFyIHNlcHRzZXB0ID0gMDsKICAgICAgICAgICAgICAgICAgdmFyIHNoZWV0TmFtZSA9IDA7IC8qIG5vbSBkZSBsYSBmZXVpbGxlIGRlIGNhbGN1bCBhY3RpdmUgKi8KICAgICAgICAgICAgICAgICAgdmFyIEluZGljZUV2b2x1ZSA9IDA7IAogICAgICAgICAgICAgICAgICB2YXIgQ2hhaW5lUGx1c1Rlc3QgPSAiIjsKICAgICAgICAgICAgICAgICAgdmFyIERhdGFFeHBEZW1vID1uZXcgTWFwKCk7IC8qIENvbnRpZW50IGxlIGpldSBkZSBkb25uw6llcyAoZW50csOpZSwgc29ydGllKSAqLwogICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0Y29tcG9uZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInJlc3VsdGF0Y29tcG9uZW50Iik7IC8qIFJlY3VwZXJlIGxhIGdyaWxsZSBkZXMgcmVzdWx0YXRzICovCiAgICAgICAgICAgICAgICAgIHJlc3VsdGNvbXBvbmVudC5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwoKCgoKICAgICAgICAgICAgICAgICAgc3ByZWFkc2hlZXQuaGlkZVJpYmJvblRhYnMoWydIb21lJyAsICdGb3JtdWxhcycgLCAnRGF0YScsJ0luc2VydCcgLCAnVmlldyddKTsgLyogbWFzcXVlIGxlcyBlbGVtZW50cyBwcmlzIGVuIGFyZ3VtZW50IHN1ciBsZSBydWJhbiAqLwogICAgICAgICAgICAgICAgICBzcHJlYWRzaGVldC5hZGRSaWJib25UYWJzKFsgIC8qIGFqb3V0IGxlcyBub3V2ZWF1eCBtZW51IHN1ciBsZSBydWJhbiAqLwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgeyBoZWFkZXI6IHsgdGV4dDogJ0dlbmVyYXRlUmVzdWx0JyB9LCBjb250ZW50OiAKICAgICAgICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyp7IHRleHQ6ICdGTGFzaEZpbGwnLCB0b29sdGlwVGV4dDogJ0ZsYXNoRmlsbCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2sgOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHRjb21wb25lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicmVzdWx0YXRjb21wb25lbnQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdGNvbXBvbmVudC5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kaWNlZGVjb2xlbm1heCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGljZWRlY29sZW5tYXggPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXB0c2VwdCA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoYWluZVBsdXNUZXN0ID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGFFeHBEZW1vID1uZXcgTWFwKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZWRSYW5nZSA9IHNwcmVhZHNoZWV0LmVqMkluc3RhbmNlcy5nZXRBY3RpdmVTaGVldCgpLnVzZWRSYW5nZTsgLy9jb250aWVudCBsYSBwbGFnZSBhY3RpdmV2KGluZGljZSBsYSBkZXJuaWVyZSBsaWduZSwgaW5kaWNlIGRlcm5pZXJlIGNvbG9uZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kaWNlbGlnbmVtYXggPSB1c2VkUmFuZ2Uucm93SW5kZXg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGljZWRlY29sZW5tYXggPSB1c2VkUmFuZ2UuY29sSW5kZXg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoZWV0TmFtZSA9IHNwcmVhZHNoZWV0LmVqMkluc3RhbmNlcy5nZXRBY3RpdmVTaGVldCgpLm5hbWU7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcHJlYWRzaGVldC5lajJJbnN0YW5jZXMuZ2V0RGF0YShzaGVldE5hbWUgKyAiISIrIGdldFJhbmdlQWRkcmVzcyhbMCwgMCwgaW5kaWNlbGlnbmVtYXgsIGluZGljZWRlY29sZW5tYXhdKSkudGhlbiggKGNlbGxzKT0+IC8vIHJlY3VwZXJlIGxlcyBkb25uw6llcyBkZSBsYSBwbGFnZSBhY3RpdmUgZXQgZWZmZXR1ZSB1biB0cmFpdGVtZW50IHBvcHVyIGNoYXF1ZSBjZWxsdWxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbHMuZm9yRWFjaCgoY2VsbCk9PnsgLy8gY2VsbHMgY29udGllbnQgbCdlbnNlbWJsZSBkZSB0b3V0ZXMgbGVzIGNlbGx1bGVzCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoSW5kaWNlRXZvbHVlID09IGluZGljZWRlY29sZW5tYXgpIC8vIEluZGljZUV2b2x1ZSBwZXJtZXQgZGUgcGFyY291cmlyIGxlcyBjb2xvbmVzIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWN1cGVyYXRpb24gZGUgbGEgY2hhaW5lIGRlIHNvcnRpZSBzIDogZWxsZSBwZXV0IGV0cmUgdmlkZSBvdSBub24KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGFpbmVQbHVzVGVzdCA9IENoYWluZVBsdXNUZXN0LnN1YnN0cmluZygwLCBDaGFpbmVQbHVzVGVzdC5sZW5ndGgtMykgLy8gb24gc3VycGltZSBsYSBkZXJuaWVyZSBjaGFpbmUgIisrKyIgCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZihjZWxsLnZhbHVlKSA9PSAidW5kZWZpbmVkIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRhRXhwRGVtbyA9IERhdGFFeHBEZW1vLnNldChzZXB0c2VwdC50b1N0cmluZygpKycqKionKycnICwgQ2hhaW5lUGx1c1Rlc3QpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9zZXB0c2VwdCBjb250aWVudCBsJ2luZGljZSBkZSBsYSBsaWduZSBlbiBjb3VycyBkZSB0cmFpdGVtZW50CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0YUV4cERlbW8gPSBEYXRhRXhwRGVtby5zZXQoc2VwdHNlcHQudG9TdHJpbmcoKSsnKioqJytjZWxsLnZhbHVlLENoYWluZVBsdXNUZXN0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERhdGFFeHBEZW1vIGVzdCB1biBkaWNvIHF1aSBjb250aWVudCBsZXMgZXhlbXBsZSBkJ2VudHJlZSBzb3J0aWUgLCBzdG9ja8OpcyBzdXIgdW5lIGNlcnRhaW5lIGZvcm1lIHByZW5xbnQgZW4gY29tcHRlIGxlIG51bWVybyBkZSBsaWduZSBkZSBjaGFxdWUgZXhwIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGFpbmVQbHVzVGVzdCA9ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEluZGljZUV2b2x1ZSA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VwdHNlcHQgPSBzZXB0c2VwdCArIDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2V0dGUgcGFydGllIG5vdXMgcGVybWV0IGRlIHJlY3VwZXJlciBsYSBjaGFpbmUgZCdlbnRyw6llIHNpZ21hLiBMYSByZWN1cGVyYXRpb24gc2UgZmFpdCB0YW50IHF1J29uIGEgcGEgYXR0ZWludCBsYSBkZW5pZXJlIGNvbG9uZSBhY3RpdmUuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodHlwZW9mKGNlbGwudmFsdWUpICE9ICJ1bmRlZmluZWQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoYWluZVBsdXNUZXN0ID0gQ2hhaW5lUGx1c1Rlc3QgKyBjZWxsLnZhbHVlICsgIisrKyI7IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSW5kaWNlRXZvbHVlID0gSW5kaWNlRXZvbHVlICsgMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uIGNiKCkgeyAgLy8gc2V0VGltZW91dCBpbmRpcXVlIHF1ZSBscSBmb25jdGlvbiBjYigpIGRvaXQgcydleGVjdXRlciBlbiBkZXJuaWVyZSBwb3NpdGlvbiAKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGpzb25UZXh0ID0gSlNPTi5zdHJpbmdpZnkoQXJyYXkuZnJvbShEYXRhRXhwRGVtby5lbnRyaWVzKCkpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXhpb3MucG9zdCgiaHR0cDovL2xvY2FsaG9zdDo4MDAwL0ZsYXNoRmlsbC9zZXNzaW9ucy9GbGFzaEV4cyIsIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICAvLyBoZWFkZXJzIHBlcm1ldCBkZSBkZWZpbmlyIGxlIHR5cGUgZGUgY29udGVudSBxdSdvbiB2ZXV0IGVudm95ZXIgOiBwIGlsIHMnYWdpdCBkJ3VuIGNvbnRlbnUganNvbiBkYW5zIG5vdHJlIGNhcyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGFFbnRyZWUgOiBqc29uVGV4dCAgLy8gRGF0YUVudHJlZSBzdG9ja2Ugbm9zIGRvbsOpZXMganNvbiAsIHF1aSBzb250IGVuc3VpdGUgdHJhaXTDqWVzICBhdSBuaXZlYXUgZHUgYmFja2VuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CgoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihyZXNwb25zZS5kYXRhWyJNZXNzYWdlQ2xlcyJdID09ICJGYWxzZSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVnVlLnN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2Vycm9yJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ09vcHMuLi4nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICdGbGFzaEZpbGwgRG8gbm90IHVuZGVyc3RhbnQgd2hhdCB5b3Ugd2FudCEnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvb3RlcjogJzxwPkl0IGNhbiBiZSBhIGNvbmRpdGlvbiBleGVjdXRpb24gcHJvYmxlbSA6IDxicj4gQ29uZGl0aW9uIGZvciBnb29kIGV4ZWN1dGlvbiA6IDxicj4gPG9sPjxsaT5Zb3VyIGRhdGEgbW9zdCBoYXZlIHRoZSBzYW1lIHN0cnVjdHVyZTwvbGk+PGxpPllvdSBtb3N0IGhhdmUgYSBsZWFzdCBvbmUgZXhlbXBsZSB3aXRoIGEgb3V0cHV0PC9saT48L29sPjxicj48L3A+JwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgRGF0YUZpbmFsVG9CZVJlcGxhY2UgPSByZXNwb25zZS5kYXRhWyJEYXRhRmluYWxUb0JlUmVwbGFjZSJdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEluZGljZUNvbG9uZVNvcnRpZSA9IHJlc3BvbnNlLmRhdGFbIkluZGljZUNvbG9uZVNvcnRpZSJdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRpbWV3YXN0Rmxhc2ZpbGwgPSByZXNwb25zZS5kYXRhWyJ0aW1ld2FzdEZsYXNmaWxsIl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgTm9tYnJlRXhlbXBsZXMgPSByZXNwb25zZS5kYXRhWyJOb21icmVFeGVtcGxlcyJdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1lbW9yeUZsYXNmaWxsID0gcmVzcG9uc2UuZGF0YVsibWVtb3J5Rmxhc2ZpbGwiXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBJbmRpY2VsaW5lID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBBcmFuZ2U9ICIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoRGF0YUZpbmFsVG9CZVJlcGxhY2UpLmZvckVhY2goZnVuY3Rpb24ocHJvcCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSW5kaWNlbGluZSA9IHBhcnNlSW50KHByb3ApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBcmFuZ2UgPSBnZXRSYW5nZUFkZHJlc3MoW0luZGljZWxpbmUtMSwgSW5kaWNlQ29sb25lU29ydGllXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXJhbmdlID0gQXJhbmdlLnRvU3RyaW5nKCkuc3BsaXQoIjoiKVswXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcHJlYWRzaGVldC51cGRhdGVDZWxsKHsgdmFsdWU6IERhdGFGaW5hbFRvQmVSZXBsYWNlW3Byb3BdIH0sQXJhbmdlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsgCgoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZ1ZS5zd2FsLmZpcmUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnPHN0cm9uZz48dT5TdGF0aXN0aWMgb2YgRmxhc2hGaWxsIGV4ZWN1dGlvbjwvdT48L3N0cm9uZz4nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICdpbmZvJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogNDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWw6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPHA+IFRpbWUgZXhlY3V0aW9uIDonICsgdGltZXdhc3RGbGFzZmlsbCArICdzIDxicj4nICsgJ051bWJlciBvZiBwcm9ncmFtbWVzIDonICsgJ01lbW9yeSB1c2UgOicgKyBtZW1vcnlGbGFzZmlsbCArICdNbyA8YnI+JyArIE5vbWJyZUV4ZW1wbGVzICsgJyBwcm9ncmFtbWUocyk8L3A+ICcsCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dDbG9zZUJ1dHRvbjogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzQ29uZmlybTogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGkgY2xhc3M9ImZhIGZhLXRodW1icy11cCI+PC9pPiBHcmVhdCEnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKCgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gfSwqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgdGV4dDogJ1F1aWNrRmlsbCcsIHRvb2x0aXBUZXh0OiAnUXVpY2tGaWxsJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2sgOiBmdW5jdGlvbigpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CgoKCgoKCgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRpY2VkZWNvbGVubWF4ID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRpY2VkZWNvbGVubWF4ID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXB0c2VwdCA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hhaW5lUGx1c1Rlc3QgPSAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRhRXhwRGVtbyA9bmV3IE1hcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZWRSYW5nZSA9IHNwcmVhZHNoZWV0LmVqMkluc3RhbmNlcy5nZXRBY3RpdmVTaGVldCgpLnVzZWRSYW5nZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRpY2VsaWduZW1heCA9IHVzZWRSYW5nZS5yb3dJbmRleDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRpY2VkZWNvbGVubWF4ID0gdXNlZFJhbmdlLmNvbEluZGV4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZ1ZS5zZXQodGhhdC5JbmRpY2VDb2xvbmVTb3J0aWUgLCAnaWQnICwgaW5kaWNlZGVjb2xlbm1heCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hlZXROYW1lID0gc3ByZWFkc2hlZXQuZWoySW5zdGFuY2VzLmdldEFjdGl2ZVNoZWV0KCkubmFtZTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBncmlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiZS1ncmlkIilbMF0uZWoyX2luc3RhbmNlc1swXTsgLy8gcmVjdXBlcmF0aW9uIGRlIGxhIEdyaWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgSW5pdGlhbGl6ZXIgPSBuZXcgQXJyYXkoKTsKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBFbGVtZW50TWFwSW5zdGFuY2VFbnRyZWUgPSAgbmV3IE1hcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBFbGVtZW50SW50ZXJtZWRpYXJlTWFwSW5zdGFuY2VFbnRyZWUgPSAgbmV3IE1hcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBFbGVtZW50TWFwSW5zdGFuY2VTb3J0aWUgPSAgbmV3IE1hcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBFbGVtZW50TWFwSW5zdGFuY2VTb3J0aWUyID0gIG5ldyBNYXAoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdGVjaG9peCA9IG5ldyBBcnJheSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWNvdXBlcnNvcnRpZXIgPSBuZXcgQXJyYXkoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVjb3VwZXJlbnRyZWUgPSBuZXcgQXJyYXkoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgTWVzc2FnZUNsZXMgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHRjb21wb25lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicmVzdWx0YXRjb21wb25lbnQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRjb21wb25lbnQuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZC5kYXRhU291cmNlID0gSW5pdGlhbGl6ZXI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZC5jb2x1bW5zID0gSW5pdGlhbGl6ZXI7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwcmVhZHNoZWV0LmVqMkluc3RhbmNlcy5nZXREYXRhKHNoZWV0TmFtZSArICIhIisgZ2V0UmFuZ2VBZGRyZXNzKFswLCAwLCBpbmRpY2VsaWduZW1heCwgaW5kaWNlZGVjb2xlbm1heF0pKS50aGVuKCAoY2VsbHMpPT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxzLmZvckVhY2goKGNlbGwpPT57CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoSW5kaWNlRXZvbHVlID09IGluZGljZWRlY29sZW5tYXgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGFpbmVQbHVzVGVzdCA9IENoYWluZVBsdXNUZXN0LnN1YnN0cmluZygwLCBDaGFpbmVQbHVzVGVzdC5sZW5ndGgtMykKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodHlwZW9mKGNlbGwudmFsdWUpID09ICJ1bmRlZmluZWQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0YUV4cERlbW8uc2V0KHNlcHRzZXB0LnRvU3RyaW5nKCkrJyoqKicrJycgLCBDaGFpbmVQbHVzVGVzdCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRhRXhwRGVtby5zZXQoc2VwdHNlcHQudG9TdHJpbmcoKSsnKioqJytjZWxsLnZhbHVlLCBDaGFpbmVQbHVzVGVzdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoYWluZVBsdXNUZXN0ID0gJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSW5kaWNlRXZvbHVlID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXB0c2VwdCA9IHNlcHRzZXB0ICsgMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0eXBlb2YoY2VsbC52YWx1ZSkgIT0gInVuZGVmaW5lZCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hhaW5lUGx1c1Rlc3QgPSBDaGFpbmVQbHVzVGVzdCArIGNlbGwudmFsdWUgKyAiKysrIjsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJbmRpY2VFdm9sdWUgPSBJbmRpY2VFdm9sdWUgKyAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uIGNiKCkgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGFFeHBEZW1vLmZvckVhY2goKHZhbHVlLCBrZXkpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih2YWx1ZSA9PT0gIiIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVnVlLnN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnZXJyb3InLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdPb3BzLi4uJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICdRdWlja0ZpbGwgRG8gbm90IHVuZGVyc3RhbnQgd2hhdCB5b3Ugd2FudCEnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9vdGVyOiAnPHA+SXQgY2FuIGJlIGEgY29uZGl0aW9uIGV4ZWN1dGlvbiBwcm9ibGVtIDogPGJyPiBDb25kaXRpb24gZm9yIGdvb2QgZXhlY3V0aW9uIDogPGJyPiA8b2w+PGxpPllvdXIgZGF0YSBtb3N0IGhhdmUgdGhlIHNhbWUgc3RydWN0dXJlPC9saT48bGk+WW91IG1vc3QgaGF2ZSBhIGxlYXN0IG9uZSBleGVtcGxlIHdpdGggYSBvdXRwdXQ8L2xpPjwvb2w+PGJyPjwvcD4nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZUNsZXMgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRWxlbWVudE1hcEluc3RhbmNlRW50cmVlID0gbmV3IE1hcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFbGVtZW50TWFwSW5zdGFuY2VTb3J0aWUgPSBuZXcgTWFwKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVsZW1lbnRNYXBJbnN0YW5jZVNvcnRpZTIgPSBuZXcgTWFwKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVsZW1lbnRJbnRlcm1lZGlhcmVNYXBJbnN0YW5jZUVudHJlZSA9ICBuZXcgTWFwKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlY291cGVyZW50cmVlID0gdmFsdWUuc3BsaXQoIisrKyIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNvdXBlcnNvcnRpZXIgPSBrZXkuc3BsaXQoIioqKiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihkZWNvdXBlcnNvcnRpZXIubGVuZ3RoID4xICYmIGRlY291cGVyc29ydGllclsxXSAhPSAiIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHZhbHVlICE9ICIiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNvdXBlcmVudHJlZS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRWxlbWVudEludGVybWVkaWFyZU1hcEluc3RhbmNlRW50cmVlLnNldCgidiIrKGluZGV4KzEpLnRvU3RyaW5nKCksIGl0ZW0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRWxlbWVudE1hcEluc3RhbmNlU29ydGllLnNldCgidiIrKGluZGV4KzEpLnRvU3RyaW5nKCksIGl0ZW0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb2JqID0gQXJyYXkuZnJvbShFbGVtZW50SW50ZXJtZWRpYXJlTWFwSW5zdGFuY2VFbnRyZWUpLnJlZHVjZSgob2JqLCBba2V5LCB2YWx1ZV0pID0+ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKG9iaiwgeyBba2V5XTogdmFsdWUgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSwge30pOwoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRWxlbWVudE1hcEluc3RhbmNlU29ydGllMi5zZXQoIkVudHJlciIgLCBvYmopOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVsZW1lbnRNYXBJbnN0YW5jZVNvcnRpZS5zZXQoIk91dHB1dCIgLCBkZWNvdXBlcnNvcnRpZXJbMV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVsZW1lbnRNYXBJbnN0YW5jZVNvcnRpZTIuc2V0KCJPdXRwdXQiICwgZGVjb3VwZXJzb3J0aWVyWzFdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFbGVtZW50TWFwSW5zdGFuY2VTb3J0aWUyLnNldCgicG9zaXRpb24iICwgZGVjb3VwZXJzb3J0aWVyWzBdKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdGVjaG9peC5wdXNoKEVsZW1lbnRNYXBJbnN0YW5jZVNvcnRpZSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvYmoyID0gQXJyYXkuZnJvbShFbGVtZW50TWFwSW5zdGFuY2VTb3J0aWUyKS5yZWR1Y2UoKG9iaiwgW2tleSwgdmFsdWVdKSA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihvYmosIHsgW2tleV06IHZhbHVlIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksIHt9KTsKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZ1ZS5zZXQodGhhdC5saXN0ZVNvcnRpZXMsdGhhdC5saXN0ZVNvcnRpZXMubGVuZ3RoLG9iajIpCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodmFsdWUgIT0gIiIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNvdXBlcmVudHJlZS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRWxlbWVudEludGVybWVkaWFyZU1hcEluc3RhbmNlRW50cmVlLnNldCgidiIrKGluZGV4KzEpLnRvU3RyaW5nKCksIGl0ZW0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvYmogPSBBcnJheS5mcm9tKEVsZW1lbnRJbnRlcm1lZGlhcmVNYXBJbnN0YW5jZUVudHJlZSkucmVkdWNlKChvYmosIFtrZXksIHZhbHVlXSkgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ob2JqLCB7IFtrZXldOiB2YWx1ZSB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLCB7fSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRWxlbWVudE1hcEluc3RhbmNlRW50cmVlLnNldCgiRW50cmVyIiAsIG9iaik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRWxlbWVudE1hcEluc3RhbmNlRW50cmVlLnNldCgicG9zaXRpb24iICwgZGVjb3VwZXJzb3J0aWVyWzBdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb2JqMiA9IEFycmF5LmZyb20oRWxlbWVudE1hcEluc3RhbmNlRW50cmVlKS5yZWR1Y2UoKG9iaiwgW2tleSwgdmFsdWVdKSA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihvYmosIHsgW2tleV06IHZhbHVlIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksIHt9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWdWUuc2V0KHRoYXQubGlzdGVFbnRyZXMgLHRoYXQubGlzdGVFbnRyZXMubGVuZ3RoLG9iajIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCgoKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKE1lc3NhZ2VDbGVzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihsaXN0ZWNob2l4Lmxlbmd0aCA9PSAxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24ga25yKCkgewoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKE1lc3NhZ2VDbGVzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVzdDIgPSBuZXcgQXJyYXkoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNvcnRpZVV0aWxpc2VyID0gbGlzdGVjaG9peFswXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvYmogPSBBcnJheS5mcm9tKHNvcnRpZVV0aWxpc2VyKS5yZWR1Y2UoKG9iaiwgW2tleSwgdmFsdWVdKSA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ob2JqLCB7IFtrZXldOiB2YWx1ZSB9KSAvLyBCZSBjYXJlZnVsISBNYXBzIGNhbiBoYXZlIG5vbi1TdHJpbmcga2V5czsgb2JqZWN0IGxpdGVyYWxzIGNhbid0LgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSwge30pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXN0Mi5wdXNoKG9iaik7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmlkLmRhdGFTb3VyY2UgPSB0ZXN0MjsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNwcmVlZHNoZWV0Y29tcG9uZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNwcmVlZHNoZWV0Y29tcG9uZW50Iik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ByZWVkc2hlZXRjb21wb25lbnQuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBncmlkRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJncmlkRWxlbWVudCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyaWRFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZ1ZS5zd2FsLmZpcmUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnUXVlIGRlc2lyZXIgdm91cyBmYWlyZSBhdmVjIFF1aWNrRklsbCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbDogYAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWNoZWNrIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9ImZvcm0tY2hlY2staW5wdXQiIHR5cGU9InJhZGlvIiBuYW1lPSJleGFtcGxlUmFkaW9zIiBpZD0iZXhhbXBsZVJhZGlvczEiIHZhbHVlPSJvcHRpb24xIiBjaGVja2VkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iZm9ybS1jaGVjay1sYWJlbCIgZm9yPSJleGFtcGxlUmFkaW9zMSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZhaXJlIGR1IGZpbHRyYWdlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tY2hlY2siPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz0iZm9ybS1jaGVjay1pbnB1dCIgdHlwZT0icmFkaW8iIG5hbWU9ImV4YW1wbGVSYWRpb3MiIGlkPSJleGFtcGxlUmFkaW9zMiIgdmFsdWU9Im9wdGlvbjIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iZm9ybS1jaGVjay1sYWJlbCIgZm9yPSJleGFtcGxlUmFkaW9zMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGYWlyZSBkZXMgYmxvY3Mgc3VyIHBsdWlzZXVycyBleGVtcGxlcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXNDb25maXJtOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVDb25maXJtOiAoKSA9PiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4YW1wbGVSYWRpb3MxJykuY2hlY2tlZCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiBrbnIoKSB7CgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKE1lc3NhZ2VDbGVzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlc3QyID0gbmV3IEFycmF5KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzb3J0aWVVdGlsaXNlciA9IGxpc3RlY2hvaXhbMF07CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9iaiA9IEFycmF5LmZyb20oc29ydGllVXRpbGlzZXIpLnJlZHVjZSgob2JqLCBba2V5LCB2YWx1ZV0pID0+ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ob2JqLCB7IFtrZXldOiB2YWx1ZSB9KSAvLyBCZSBjYXJlZnVsISBNYXBzIGNhbiBoYXZlIG5vbi1TdHJpbmcga2V5czsgb2JqZWN0IGxpdGVyYWxzIGNhbid0LgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksIHt9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVzdDIucHVzaChvYmopOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZC5kYXRhU291cmNlID0gdGVzdDI7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNwcmVlZHNoZWV0Y29tcG9uZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNwcmVlZHNoZWV0Y29tcG9uZW50Iik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcHJlZWRzaGVldGNvbXBvbmVudC5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ3JpZEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZ3JpZEVsZW1lbnQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyaWRFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOyAKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWdWUuc2V0KHRoYXQuQ2hvaXNlUXVpY2tGaWxsLCAnY2hvaXgnICwgMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4YW1wbGVSYWRpb3MyJykuY2hlY2tlZCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24ga25yMigpIHsKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoTWVzc2FnZUNsZXMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlc3QyID0gbmV3IEFycmF5KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0ZWNob2l4LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb2JqID0gQXJyYXkuZnJvbShpdGVtKS5yZWR1Y2UoKG9iaiwgW2tleSwgdmFsdWVdKSA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKG9iaiwgeyBba2V5XTogdmFsdWUgfSkgLy8gQmUgY2FyZWZ1bCEgTWFwcyBjYW4gaGF2ZSBub24tU3RyaW5nIGtleXM7IG9iamVjdCBsaXRlcmFscyBjYW4ndC4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLCB7fSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlc3QyLnB1c2gob2JqKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmlkLmRhdGFTb3VyY2UgPSB0ZXN0MjsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3ByZWVkc2hlZXRjb21wb25lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic3ByZWVkc2hlZXRjb21wb25lbnQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwcmVlZHNoZWV0Y29tcG9uZW50LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBncmlkRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJncmlkRWxlbWVudCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZEVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7IAoKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVnVlLnNldCh0aGF0LkNob2lzZVF1aWNrRmlsbCwgJ2Nob2l4JyAsIDMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCgoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgoKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgoKCgoKCgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSB9ICwKCgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0ZXh0OiAnRkxhc2hGaWxsTChzaW1wbGlmeSkpJywgdG9vbHRpcFRleHQ6ICdGTGFzaEZpbGwoc2ltcGxpZnkpKScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrIDogZnVuY3Rpb24oKSB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kaWNlZGVjb2xlbm1heCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRpY2VkZWNvbGVubWF4ID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcHRzZXB0ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoYWluZVBsdXNUZXN0ID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRhRXhwRGVtbyA9bmV3IE1hcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEFkZEVsZW1lbnQgPW5ldyBNYXAoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBBZGRFbGVtZW50MiA9bmV3IE1hcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3Rlb2ZPYmplY3RFbGVtZW50ID0gIG5ldyBBcnJheSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlZFJhbmdlID0gc3ByZWFkc2hlZXQuZWoySW5zdGFuY2VzLmdldEFjdGl2ZVNoZWV0KCkudXNlZFJhbmdlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kaWNlbGlnbmVtYXggPSB1c2VkUmFuZ2Uucm93SW5kZXg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRpY2VkZWNvbGVubWF4ID0gdXNlZFJhbmdlLmNvbEluZGV4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hlZXROYW1lID0gc3ByZWFkc2hlZXQuZWoySW5zdGFuY2VzLmdldEFjdGl2ZVNoZWV0KCkubmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHRjb21wb25lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicmVzdWx0YXRjb21wb25lbnQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdGNvbXBvbmVudC5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwcmVhZHNoZWV0LmVqMkluc3RhbmNlcy5nZXREYXRhKHNoZWV0TmFtZSArICIhIisgZ2V0UmFuZ2VBZGRyZXNzKFswLCAwLCBpbmRpY2VsaWduZW1heCwgaW5kaWNlZGVjb2xlbm1heF0pKS50aGVuKCAoY2VsbHMpPT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxzLmZvckVhY2goKGNlbGwpPT57CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKEluZGljZUV2b2x1ZSA9PSBpbmRpY2VkZWNvbGVubWF4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoYWluZVBsdXNUZXN0ID0gQ2hhaW5lUGx1c1Rlc3Quc3Vic3RyaW5nKDAsIENoYWluZVBsdXNUZXN0Lmxlbmd0aC0zKQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodHlwZW9mKGNlbGwudmFsdWUpID09ICJ1bmRlZmluZWQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0YUV4cERlbW8gPSBEYXRhRXhwRGVtby5zZXQoc2VwdHNlcHQudG9TdHJpbmcoKSsnKioqJysnJyAsIENoYWluZVBsdXNUZXN0KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0YUV4cERlbW8gPSBEYXRhRXhwRGVtby5zZXQoc2VwdHNlcHQudG9TdHJpbmcoKSsnKioqJytjZWxsLnZhbHVlLENoYWluZVBsdXNUZXN0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hhaW5lUGx1c1Rlc3QgPSAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSW5kaWNlRXZvbHVlID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VwdHNlcHQgPSBzZXB0c2VwdCArIDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0eXBlb2YoY2VsbC52YWx1ZSkgIT0gInVuZGVmaW5lZCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGFpbmVQbHVzVGVzdCA9IENoYWluZVBsdXNUZXN0ICsgY2VsbC52YWx1ZSArICIrKysiOyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJbmRpY2VFdm9sdWUgPSBJbmRpY2VFdm9sdWUgKyAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gY2IoKSB7CgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIganNvblRleHQgPSBKU09OLnN0cmluZ2lmeShBcnJheS5mcm9tKERhdGFFeHBEZW1vLmVudHJpZXMoKSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF4aW9zLnBvc3QoImh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9GbGFzaEZpbGwvc2Vzc2lvbnMvRmxhc2hGcmVlTG9vcEV4cyIsIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRhRW50cmVlIDoganNvblRleHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewoKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJlc3BvbnNlLmRhdGFbIk1lc3NhZ2VDbGVzIl0gPT0gIkZhbHNlIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZ1ZS5zd2FsLmZpcmUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnZXJyb3InLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ09vcHMuLi4nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnRmxhc2hGaWxsIERvIG5vdCB1bmRlcnN0YW50IHdoYXQgeW91IHdhbnQhJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9vdGVyOiAnPHA+SXQgY2FuIGJlIGEgY29uZGl0aW9uIGV4ZWN1dGlvbiBwcm9ibGVtIDogPGJyPiBDb25kaXRpb24gZm9yIGdvb2QgZXhlY3V0aW9uIDogPGJyPiA8b2w+PGxpPllvdXIgZGF0YSBtb3N0IGhhdmUgdGhlIHNhbWUgc3RydWN0dXJlPC9saT48bGk+WW91IG1vc3QgaGF2ZSBhIGxlYXN0IG9uZSBleGVtcGxlIHdpdGggYSBvdXRwdXQ8L2xpPjwvb2w+PGJyPjwvcD4nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgRGF0YUZpbmFsVG9CZVJlcGxhY2UgPSByZXNwb25zZS5kYXRhWyJEYXRhRmluYWxUb0JlUmVwbGFjZSJdOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgSW5kaWNlQ29sb25lU29ydGllID0gcmVzcG9uc2UuZGF0YVsiSW5kaWNlQ29sb25lU29ydGllIl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRpbWV3YXN0Rmxhc2ZpbGwgPSByZXNwb25zZS5kYXRhWyJ0aW1ld2FzdEZsYXNmaWxsIl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIE5vbWJyZUV4ZW1wbGVzID0gcmVzcG9uc2UuZGF0YVsiTm9tYnJlRXhlbXBsZXMiXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWVtb3J5Rmxhc2ZpbGwgPSByZXNwb25zZS5kYXRhWyJtZW1vcnlGbGFzZmlsbCJdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsaXN0ZWRlc3Byb2dyYW1tZXMgPSByZXNwb25zZS5kYXRhWyJsaXN0ZWRlc3Byb2dyYW1tZXMiXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kaWNlZHVwcm9ncmFtbWVjaG9pc2kgPSByZXNwb25zZS5kYXRhWyJpbmRpY2VkdXByb2dyYW1tZWNob2lzaSJdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBJbmRpY2VsaW5lID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgQXJhbmdlPSAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3T2JqZWN0ID0gbmV3IE1hcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBncmlkMiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImUtZ3JpZCIpWzFdLmVqMl9pbnN0YW5jZXNbMF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWRkRWxlbWVudC5zZXQoJ3ZhbHVzZScsTm9tYnJlRXhlbXBsZXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFkZEVsZW1lbnQyLnNldCgndmFsdXNlJyxpbmRpY2VkdXByb2dyYW1tZWNob2lzaSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhEYXRhRmluYWxUb0JlUmVwbGFjZSkuZm9yRWFjaChmdW5jdGlvbihwcm9wKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEluZGljZWxpbmUgPSBwYXJzZUludChwcm9wKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFyYW5nZSA9IGdldFJhbmdlQWRkcmVzcyhbSW5kaWNlbGluZS0xLCBJbmRpY2VDb2xvbmVTb3J0aWVdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXJhbmdlID0gQXJhbmdlLnRvU3RyaW5nKCkuc3BsaXQoIjoiKVswXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ByZWFkc2hlZXQudXBkYXRlQ2VsbCh7IHZhbHVlOiBEYXRhRmluYWxUb0JlUmVwbGFjZVtwcm9wXSB9LEFyYW5nZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsgCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWdWUuc3dhbC5maXJlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICc8c3Ryb25nPjx1PlN0YXRpc3RpYyBvZiBGbGFzaEZpbGwgKHNpbXBsaWZ5KSBleGVjdXRpb248L3U+PC9zdHJvbmc+JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2luZm8nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogNDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8cD4gRXhlY3V0aW9uIHRpbWU6JyArIHRpbWV3YXN0Rmxhc2ZpbGwgKyAncyA8YnI+JyArICdOdW1iZXIgb2YgcHJvZ3JhbXMgOicgK05vbWJyZUV4ZW1wbGVzICsgJyBwcm9ncmFtKHMpPGJyPicrICdNZW1vcnkgdXNlIDonICsgbWVtb3J5Rmxhc2ZpbGwgKyAnTW88L3A+JyAsCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93Q2xvc2VCdXR0b246IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzQ29uZmlybTogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8aSBjbGFzcz0iZmEgZmEtdGh1bWJzLXVwIj48L2k+IEdyZWF0IScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9iaiA9IEFycmF5LmZyb20oQWRkRWxlbWVudCkucmVkdWNlKChvYmosIFtrZXksIHZhbHVlXSkgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKG9iaiwgeyBba2V5XTogdmFsdWUgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksIHt9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb2JqMiA9IEFycmF5LmZyb20oQWRkRWxlbWVudDIpLnJlZHVjZSgob2JqLCBba2V5LCB2YWx1ZV0pID0+ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihvYmosIHsgW2tleV06IHZhbHVlIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLCB7fSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0aGF0LiRkYXRhLCB0aGF0LiRvcHRpb25zLmRhdGEoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVnVlLnNldCh0aGF0Lmxlbm9mcHJvZ3JhbW1lcywwLCBvYmopOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZ1ZS5zZXQodGhhdC5pZHBvcmdyYW1tZSwwLCBvYmoyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0ZWRlc3Byb2dyYW1tZXMuZm9yRWFjaCgoZWxlbWVudCxpbmRleCkgPT57CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdPYmplY3Quc2V0KCdJRCcgLCBpbmRleCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdPYmplY3Quc2V0KCdwcm9ncmFtbWUnICwgZWxlbWVudCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb2JqMyA9IEFycmF5LmZyb20obmV3T2JqZWN0KS5yZWR1Y2UoKG9iaiwgW2tleSwgdmFsdWVdKSA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ob2JqLCB7IFtrZXldOiB2YWx1ZSB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSwge30pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3Rlb2ZPYmplY3RFbGVtZW50LnB1c2gob2JqMykKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVnVlLnNldCh0aGF0Lkxpc3RlRGVzUHJvZ3JhbW1lc1JldG91cm5lciwgdGhhdC5MaXN0ZURlc1Byb2dyYW1tZXNSZXRvdXJuZXIubGVuZ3RoLCBlbGVtZW50KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCgoKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyaWQyLmRhdGFTb3VyY2UgPSBsaXN0ZW9mT2JqZWN0RWxlbWVudDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdGNvbXBvbmVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJyZXN1bHRhdGNvbXBvbmVudCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdGNvbXBvbmVudC5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAoKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSB9LAoKCgoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgXSAKICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAseyBoZWFkZXI6IHsgdGV4dDogJ0hlbHAnIH0sIGNvbnRlbnQ6IFt7IHRleHQ6ICdRdWlja0ZpbGwnLCB0b29sdGlwVGV4dDogJ1F1aWNrRmlsbCcsCiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrIDogZnVuY3Rpb24oKSB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWdWUuc3dhbC5maXJlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICc8c3Ryb25nPjx1PlF1aWNGaWxsIFVzYWdlIGV4YW1wbGU8L3U+PC9zdHJvbmc+JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2luZm8nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogOTAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8aWZyYW1lIHdpZHRoPSI1NjAiIGhlaWdodD0iMzE1IiBzcmM9Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL2VtYmVkL2RfZWxYWTJMY2ZrIiBmcmFtZWJvcmRlcj0iMCIgYWxsb3c9ImFjY2VsZXJvbWV0ZXI7IGF1dG9wbGF5OyBjbGlwYm9hcmQtd3JpdGU7IGVuY3J5cHRlZC1tZWRpYTsgZ3lyb3Njb3BlOyBwaWN0dXJlLWluLXBpY3R1cmUiIGFsbG93ZnVsbHNjcmVlbj48L2lmcmFtZT4nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93Q2xvc2VCdXR0b246IHRydWUsIC8qIHBvdXIgbGEgZmVybWV0dXJlIGR1IG1vZGFsICovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsIC8qIGJvdXRvbiBjYW5jZWwgKi8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXNDb25maXJtOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxpIGNsYXNzPSJmYSBmYS10aHVtYnMtdXAiPjwvaT4gR3JlYXQhJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKCiAgICAgICAgICAgICAgICAgICAgICAgIH0gfSwKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB7IHRleHQ6ICdGbGFzaEZpbGwnLCB0b29sdGlwVGV4dDogJ0ZsYXNoRmlsbCcsCiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrIDogZnVuY3Rpb24oKSB7CgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZ1ZS5zd2FsLmZpcmUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJzxzdHJvbmc+PHU+Rmxhc2hGaWxsIFVzYWdlIGV4YW1wbGU8L3U+PC9zdHJvbmc+JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2luZm8nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogOTAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8aWZyYW1lIHdpZHRoPSI3NjgiIGhlaWdodD0iMzYwIiBzcmM9Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL2VtYmVkL0E3LUU2c2Y2Sk9jP2xpc3Q9UkRRTXVLX000ZmwzRHM4IiB0aXRsZT0iWW91VHViZSB2aWRlbyBwbGF5ZXIiIGZyYW1lYm9yZGVyPSIwIiBhbGxvdz0iYWNjZWxlcm9tZXRlcjsgYXV0b3BsYXk7IGNsaXBib2FyZC13cml0ZTsgZW5jcnlwdGVkLW1lZGlhOyBneXJvc2NvcGU7IHBpY3R1cmUtaW4tcGljdHVyZSIgYWxsb3dmdWxsc2NyZWVuPjwvaWZyYW1lPicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dDbG9zZUJ1dHRvbjogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXNDb25maXJtOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxpIGNsYXNzPSJmYSBmYS10aHVtYnMtdXAiPjwvaT4gR3JlYXQhJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgfSB9LAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgeyB0ZXh0OiAnQWJvdXQnLCB0b29sdGlwVGV4dDogJ0Fib3V0JywKICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2sgOiBmdW5jdGlvbigpIHsKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgVnVlLnN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnPHN0cm9uZz5BYm91dCB0aGUgcHJvamVjdDwvc3Ryb25nPicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICdpbmZvJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDkwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPHA+UXVpY0ZpbGwgcHJvamVjdCBpcyBhIHByb2plY3QgZGV2ZWxvcHBlciBieSBGb2tvdSBWYW5lc3NhIExhdXJlIChhZHJlc3MgbWFpbCkgYmFzZSBvbiB0aGUgRmxhc2hGaWxsIGFsZ29yaXRobWUgIHRvIHRlc3QgYSBpZGVhIG9mIGFuZCBpdGVyYWN0aXZlIGFwcHJvY2hlIHVzaW5nIGluZGVwZW5kYW50IGJsb2MgYXBwcm9jaGUgdG8gZ2VuZXJhdGUgc3RyaW5nIHByb2dhbW1lIGJhc2Ugb24gZXhhbXBsZTwvcD4nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93Q2xvc2VCdXR0b246IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzQ29uZmlybTogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8aSBjbGFzcz0iZmEgZmEtdGh1bWJzLXVwIj48L2k+IEdyZWF0IScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSB9LAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgXSB9XQogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAKICAgICAgICAgIH0sCiAgICAKICAgICAgfSwKCgoKCiAgcHJvdmlkZTogLyogZGVmaW50aW9uIGRlcyBlbGVtZW50cyBwcmVzZW50ZXMgZGFucyBsYSBncmlsbGUgKi8KICB7IAogICAgZ3JpZDogW0NvbnRleHRNZW51LCBQYWdlXSwgCiAgfSwgCgoKCn0K"},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA;AACA;AACA;AACA;AACA;;;;;;AAMA;AACA;AACA;;;;;;AAMA;AACA;AACA;AACA;;;AAGA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;;AAGA;;;;AAIA;;;AAGA;;;;AAIA;;AAEA;AACA;;;AAGA;;;AAGA;AACA;;;AAGA;;;AAGA;AACA;;AAEA;AACA;;AAEA;;;AAGA;AACA;;AAEA;;;;AAIA;AACA;;AAEA;;;AAGA;AACA;;;AAGA;;AAEA;AACA;;;AAGA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;;AAEA;;AAEA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;;;;AAIA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;;;;AAIA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;AAKA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;;;AAGA;;;;AAIA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;;AAEA;;;AAGA;AACA;;;;AAIA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;AAIA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AAWA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;;AAGA;;;;;;;;AAQA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;;;;;AAKA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;AAIA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AAWA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;;AAGA;;;;;;;;AAQA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;AAMA;;;AAGA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;AAIA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AAWA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;;AAGA;;;;;;;;AAQA;AACA;AACA;AACA;AACA;;AAEA;;;;AAIA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;;AAGA;AACA;;;;;AAKA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AAQA;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;AAIA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;AAKA;AACA;AACA;;;;AAIA;AACA;AACA;;;AAGA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;AAKA;AACA;AACA;;;;AAIA;;;AAGA;;AAEA;;;AAGA;AACA;AACA;;;;;AAKA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;AAEA;AACA;;AAEA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;;AAGA;;;;AAIA;;AAEA;AACA;;AAEA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;;AAEA;;;;;;AAMA;;;;;;;AAOA;;AAEA;AACA;AACA;;AAEA;;;;AAIA;AACA;;AAEA;;AAEA;;;AAGA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;;;;AAIA;;;;;;;;AAQA;;;;AAIA;AACA;AACA;;;AAGA;AACA;;;;;AAKA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AAMA;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;AAKA;AACA;AACA;;;;AAIA;;AAEA;;;AAGA;AACA;AACA;;;;;AAKA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;;;;;;;AAOA;;;;;;;AAOA;;AAEA;;AAEA;AACA;;AAEA;;;;AAIA;AACA;;AAEA;;AAEA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;;;;AAIA;;;;;;;;AAQA;;;AAGA;;;;;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;AAGA;AACA;;AAEA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;;AAGA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;AAEA;AACA;AACA;AACA;;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;AAMA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;;;;;;;;;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;;AAGA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;;AAGA;;AAEA;;;;AAIA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;;;AAGA;;AAEA;;;;;;AAMA;AACA;;AAEA;AACA;;;AAGA;;;AAGA;AACA;;AAEA;;;AAGA;;;AAGA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;;;AAGA;;;;AAIA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;;AAGA;AACA;;;;AAIA;AACA;AACA;;;;;AAKA;;;AAGA;AACA;;;;;AAKA;;;;;AAKA;;;;AAIA;;;;;;;;;AASA;;;;AAIA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;AAIA;;AAEA;AACA;;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;;AAGA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;AAEA;AACA;AACA;AACA;;AAEA;;;;;;;;;AASA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AAOA;AACA;;AAEA;AACA;;;;;;AAMA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;;;;;;AAMA;;;;;;AAMA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;;AAGA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;;AAEA;;;;;AAKA;AACA;AACA;AACA;;;;AAIA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n  <div id=\"app\">\n    <div id=\"gridElement\" height='270px'  style=\"display:none;\">\n      <strong><u>Contruction des blocs</u></strong> \n        <div>\n              <ul>\n                  <li v-for=\"bloc in ListeOfBlocs\" :key=\"bloc.message\">\n                    {{ bloc.message }} <!-- Gestion du menu contextuelle dans la grille -->\n                  </li>\n              </ul>\n            </div>\n                  <button @click=\"SendDataQuickFill\">Envoyer</button>\n                  <button @click=\"BackTosheat\">Retour</button>\n            <div>\n        </div>\n\n      <hr>\n\n      <ejs-grid ref='grid' id='gridcomp' :allowSelection='true' :allowPaging='true' height='100%' :contextMenuItems='contextMenuItems' :contextMenuOpen='contextMenuOpen' :contextMenuClick='contextMenuClick'> </ejs-grid>\n    </div>\n    \n    <div id=\"spreedsheetcomponent\">\n\n\n      <ejs-spreadsheet ref=\"spreadsheet\" :created=\"created\" :openUrl=\"openUrl\" :saveUrl=\"saveUrl\"  :allowHyperlink=\"false\" :allowImage=\"false\" :allowSorting=\"false\" :allowFiltering=\"false\" :contextMenuBeforeOpen=\"contextMenuBeforeOpen\">\n      </ejs-spreadsheet>\n\n    </div>\n\n\n\n      <div id=\"resultatcomponent\"> <!-- Affichage des programmes -->\n              <hr>\n              <strong><u>Liste des programmes</u></strong>\n              \n              <div>\n                    <p> nombre de programme (s) : <span v-for=\"item in lenofprogrammes.slice(0, 1)\" :key=\"item.valuse\"> {{ item.valuse }} </span> , le programme choisi est   la position numro : <span v-for=\"item in idporgramme.slice(0, 1)\" :key=\"item.valuse\"> {{ item.valuse }} </span>  </p>\n                  </div>\n                        <button @click=\"VueProgramChoix\">Programme execut</button>\n                  <div>\n              </div> \n            <ejs-grid ref='grid2' id='gridcomprresult' :allowSelection='true' :allowPaging='true'  :row-data-bound='rowDataBound' :rowSelected='rowSelected' height='100%'>\n            </ejs-grid>\n\n    </div>\n\n  </div>\n</template>\n\n<script>\n  import Vue from \"vue\";\n  import { SpreadsheetPlugin,getRangeAddress} from \"@syncfusion/ej2-vue-spreadsheet\";\n  import { GridPlugin, ContextMenu, Page } from '@syncfusion/ej2-vue-grids';\n  import axios from \"axios\";\n  import VueSweetalert2 from 'vue-sweetalert2';\n\n\n\n\n\n  Vue.use(SpreadsheetPlugin); \n  Vue.use(VueSweetalert2); /* pour la gestion des modals */\n  Vue.use(GridPlugin);\n\n\n\n\n\n  export default{\n    name: 'App',\n    data :  function(){  /* la fonction data retourne les variables dynamique (variables reactives) */\n        return {\n\n\n              idporgramme : [\n\n              ], /* Le numero de programme choisi. */\n\n              lenofprogrammes : [\n\n              ], /* Nombre de programmes obtenues apres execution de flashfill ou quickfill */\n\n              ElementToUpdate : 0,  /* variable de comptage des blocs: bvloc b1, b2 ..... */\n\n              listeElementToupdate:[\n\n\n              ], /* liste des evolution des id des blocs*/\n\n              ChoiseQuickFill : {\n                choix : 1\n              }, /*permet de determiner quel variante de QuickFill utilis */\n\n              idsortieselectionner :{\n                  id:1\n              }, /* Identifier l'exemple sur lequel on cree le bloc*/\n\n              IndiceColoneSortie:{\n                  id:1\n              },/*Contient le numero de la colone de sortie*/\n\n              idColoneUtiliser:{\n\n                id:0\n              },/* Contient id de la colonne courrente */\n\n              ListeDesProgrammesRetourner : [\n\n              ], /* Contient la liste de programmes retourner par flashfill ou quickfilll */\n\n\n              ListeElementsEnvoyerQuickFill:[\n\n\n\n              ],  /* tableau contenant les dones (bloc de sortie + correspondance)  envoyer  QuickFill */\n\n\n              ListeDesSortiesQuickFill:[\n\n\n\n              ], /*Liste de toutes les sorties  envoyer  Quick Fill*/\n\n              LesEntreeQuickFill :\n              [\n\n\n              ], /* tableau qui stocke les chaines d'entre sigma de quickfill */\n              \n\n              ListeOfBlocs: \n              [\n\n\n              ], /* contient les blocs de la chaine de sortie */\n\n\n              contextMenuItems: \n              [\n                  \n                  {text: 'Make a bloc', target: '.e-content', id: 'makeblock'},\n                  {text: 'Make a constant', target: '.e-content', id: 'makeconst'},\n        \n              ], /* Contient les items du menu contextuel de lq grid */\n\n\n              ListeOfIdOfCotextMenu:\n              [\n\n              ], /* Contient les ids des nouveau items du menu contextuel cre par utilisation des item \"make a bloc\", \"make a constant\" */\n\n\n\n              ListeMessagesOfCotextMenu:\n              [\n\n              ], /* Contient les messages des nouveau items du menu contextuel cre par utilisation des item \"make a bloc\", \"make a constant\" */\n\n\n              listeSorties : \n              [\n\n\n              ], /* tableau contenant les chaines de sorties s */\n\n              listeEntres:\n              [\n\n\n              ], /* tableau contenant les chaines d'entre sigma pour flashFill */\n\n              IndiceDeLaColonneDeSortie:\n              {\n\n                id:1\n              }, /* Contient indice de la colonne de sortie */\n\n              openUrl: 'https://ej2services.syncfusion.com/production/web-services/api/spreadsheet/open',\n              saveUrl: 'https://ej2services.syncfusion.com/production/web-services/api/spreadsheet/save',\n              \n          \n          };\n\n    },\n\n    methods: \n    {\n\n\n      contextMenuOpen:function (args) \n      {\n\n        var grid = document.getElementsByClassName(\"e-grid\")[0].ej2_instances[0];\n        var that =  this;\n        var numeroIdColonne =  args.rowInfo.cellIndex;\n        var numeroDeLigne = args.rowInfo.rowIndex;\n\n\n        Vue.set(that.idColoneUtiliser,'id',numeroIdColonne);\n        Vue.set(that.idsortieselectionner,'id', numeroDeLigne);\n\n\n\n            if(numeroIdColonne == that.IndiceColoneSortie.id)\n            {\n\n                grid.contextMenuModule.contextMenu.showItems(['Make a bloc']);\n                grid.contextMenuModule.contextMenu.showItems(['Make a constant']);\n\n                if(that.ListeMessagesOfCotextMenu.length > 0)\n                {\n                        that.ListeMessagesOfCotextMenu.forEach(function (item) {\n                            if((item.text != 'Make a bloc') && (item.text != 'Make a constant'))\n                            {\n                              grid.contextMenuModule.contextMenu.hideItems([item.text]);\n\n                            }\n\n                      });\n                  }\n\n\n            }\n            else\n            {\n              grid.contextMenuModule.contextMenu.hideItems(['Make a bloc']);\n              grid.contextMenuModule.contextMenu.hideItems(['Make a constant']);\n\n              if(that.ListeMessagesOfCotextMenu.length > 0)\n              {\n\n                  that.ListeMessagesOfCotextMenu.forEach(function (item) {\n                            if((item.text != 'Make a bloc') && (item.text != 'Make a constant') && (numeroDeLigne == item.idligne))\n                            {\n\n                              grid.contextMenuModule.contextMenu.showItems([item.text]);\n\n                            }\n                            else\n                            {\n                              grid.contextMenuModule.contextMenu.hideItems([item.text]);\n                            }\n\n                  });\n\n\n              }\n\n\n\n            }\n          \n      },\n\n\n        rowSelected : function(args)\n        {\n          /* Gestion et affichage du programme choisi en interface. */\n                var that = this;\n                var index = args.data.ID;\n                Vue.swal.fire({\n                      title: '<strong><u>Programme ayant ID ' + index + '</u></strong>',\n                      icon: 'info',\n                      width: 400,\n                      html:\n                      '<p>' + that.ListeDesProgrammesRetourner[index] +'</p>' ,\n\n                      showCloseButton: true,\n                      showCancelButton: true,\n                      focusConfirm: false,\n                      confirmButtonText:\n                      '<i class=\"fa fa-thumbs-up\"></i> Great!',\n                });\n\n        },\n\n\n\n\n        BackTosheat: function()\n        {\n\n            /*gestion du button retour */\n            var that = this; \n\n            var spreedsheetcomponent = document.getElementById(\"spreedsheetcomponent\");\n            spreedsheetcomponent.style.display = \"block\";\n\n\n            var gridElement = document.getElementById(\"gridElement\");\n            gridElement.style.display = \"none\"; \n\n\n            Object.assign(that.$data, that.$options.data());\n\n\n\n        },\n\n        VueProgramChoix: function() \n        {    \n                /*Affichage du programme execut*/\n                var that = this;\n                var index = that.idporgramme.slice(0, 1);\n                Vue.swal.fire({\n                      title: '<strong><u>Programme execut</u></strong>',\n                      icon: 'info',\n                      width: 400,\n                      html:\n                      '<p>' + that.ListeDesProgrammesRetourner[index[0].valuse] +'</p>' ,\n\n                      showCloseButton: true,\n                      showCancelButton: true,\n                      focusConfirm: false,\n                      confirmButtonText:\n                      '<i class=\"fa fa-thumbs-up\"></i> Great!',\n                });\n        },\n\n        SendDataQuickFill : function()\n        {\n\n              /*Envoie de donnes  QuickFill*/\n\n              var that =  this;\n              var listeofObjectElement =  new Array();\n              var newObject = new Map();\n              var grid2 = document.getElementsByClassName(\"e-grid\")[1].ej2_instances[0];\n              var resultcomponent = document.getElementById(\"resultatcomponent\");\n              \n\n\n              if(that.ChoiseQuickFill.choix == 1)\n              {\n\n                  setTimeout(function cb() {\n\n\n                        var jsonText1 = JSON.stringify(Array.from(that.listeEntres));\n                        var jsonText3 = JSON.stringify(Array.from(that.ListeElementsEnvoyerQuickFill));\n\n                        \n                        \n                        axios.post(\"http://localhost:8000/QuickFill/sessions/QuickExs\", {\n\n                        headers: {\n                            'Content-Type': 'application/json',\n                        },\n                        data: {\n                          \n                          DataEntreeBrute : jsonText1, \n                          DataGlobal : jsonText3,\n\n                        }\n                      })\n                      .then((response) => {\n\n\n\n                              \n                              var DataFinalToBeReplace = response.data[\"DataFinalToBeReplace\"];\n                              var IndiceColoneSortie = response.data[\"IndiceColoneSortie\"];\n                              var timewastQuickfill = response.data[\"timewastQuickfill\"];\n                              var memoryQuickfill = response.data[\"memoryQuickfill\"];\n                              var NombreExemples = response.data[\"NombreExemples\"];\n                              var listedesprogrammes = response.data[\"listedesprogrammes\"];\n                              var indiceduprogrammechoisi = response.data[\"indiceduprogrammechoisi\"];\n                              var AddElement =new Map();\n                              var AddElement2 =new Map();\n                              var Indiceline = 0;\n                              var Arange= \"\"\n                              var spreadsheet = that.$refs.spreadsheet;\n                              \n                              \n\n                              that.listeSorties.forEach(function(item) {\n                                  var newElement = new Array();\n                                  Indiceline = parseInt(item.position);\n                                  newElement.push(item.Output);\n                                  Arange = getRangeAddress([Indiceline-1, IndiceColoneSortie-1])\n                                  spreadsheet.updateCell({ value: newElement },Arange);\n\n                              });\n\n\n                              DataFinalToBeReplace.forEach(function(item) {\n                                  var newElement = new Array();\n                                  Indiceline = parseInt(item.position);\n                                  newElement.push(item.Output);\n                                  Arange = getRangeAddress([Indiceline-1, IndiceColoneSortie-1])\n                                  spreadsheet.updateCell({ value: newElement },Arange);\n\n                              });\n\n\n\n                              var spreedsheetcomponent = document.getElementById(\"spreedsheetcomponent\");\n                              spreedsheetcomponent.style.display = \"block\";\n\n\n                              var gridElement = document.getElementById(\"gridElement\");\n                              gridElement.style.display = \"none\"; \n\n                              Vue.swal.fire({\n                                title: '<strong><u>Statistic of QuickFill execution</u></strong>',\n                                icon: 'info',\n                                width: 400,\n                                html:\n                                  '<p> execution time :' + timewastQuickfill + 's <br>' + 'Memory use :' + memoryQuickfill + 'Mo <br>' +'Number of programs :' +  NombreExemples + ' program(s)</p> ',\n\n                                showCloseButton: true,\n                                showCancelButton: true,\n                                focusConfirm: false,\n                                confirmButtonText:\n                                  '<i class=\"fa fa-thumbs-up\"></i> Great!',\n                              });\n\n                            \n                              \n\n\n\n\n\n                              \n\n                            Object.assign(that.$data, that.$options.data());\n                            \n                            \n                            AddElement.set('valuse',NombreExemples);\n                            AddElement2.set('valuse',indiceduprogrammechoisi);\n\n                            let obj = Array.from(AddElement).reduce((obj, [key, value]) => (\n                                                                            Object.assign(obj, { [key]: value })\n                                                                          ), {});\n                            let obj2 = Array.from(AddElement2).reduce((obj, [key, value]) => (\n                                                                            Object.assign(obj, { [key]: value })\n                                                                          ), {});\n\n                              Vue.set(that.lenofprogrammes,0, obj);\n                              Vue.set(that.idporgramme,0, obj2);\n\n                              listedesprogrammes.forEach((element,index) =>{\n                                  \n\n                              newObject.set('ID' , index)\n                              newObject.set('programme' , element)\n                              let obj3 = Array.from(newObject).reduce((obj, [key, value]) => (\n                                              Object.assign(obj, { [key]: value })\n                                            ), {});\n                              listeofObjectElement.push(obj3)\n\n                              Vue.set(that.ListeDesProgrammesRetourner, that.ListeDesProgrammesRetourner.length, element);\n\n                            });\n\n                            grid2.dataSource = listeofObjectElement;\n\n                              \n                            resultcomponent.style.display = \"block\";\n                                    \n\n\n\n                        \n                        \n                        \n                      })\n                      .catch((e) => {\n                        console.log(e);\n                      });\n                  });\n\n\n\n\n              }\n              else if(that.ChoiseQuickFill.choix == 2)\n              {\n\n\n\n\n                  setTimeout(function cb() {\n\n                        var jsonText1 = JSON.stringify(Array.from(that.listeEntres));\n                        var jsonText3 = JSON.stringify(Array.from(that.ListeElementsEnvoyerQuickFill));\n                        var jsonText4 = JSON.stringify(Array.from(that.listeSorties));\n                        \n                        axios.post(\"http://localhost:8000/QuickFill/filter/QuickExsFilter\", {\n\n                        headers: {\n                            'Content-Type': 'application/json',\n                        },\n                        data: {\n                          \n                          DataEntreeBrute : jsonText1, \n                          DataGlobal : jsonText3,\n                          MesSorties : jsonText4\n                        }\n                      })\n                      .then((response) => {\n\n\n\n                              \n                              var DataFinalToBeReplace = response.data[\"DataFinalToBeReplace\"];\n                              var IndiceColoneSortie = response.data[\"IndiceColoneSortie\"];\n                              var timewastQuickfill = response.data[\"timewastQuickfill\"];\n                              var memoryQuickfill = response.data[\"memoryQuickfill\"];\n                              var NombreExemples = response.data[\"NombreExemples\"];\n                              var listedesprogrammes = response.data[\"listedesprogrammes\"];\n                              var indiceduprogrammechoisi = response.data[\"indiceduprogrammechoisi\"];\n                              var AddElement =new Map();\n                              var AddElement2 =new Map();\n                              var Indiceline = 0;\n                              var Arange= \"\"\n                              var spreadsheet = that.$refs.spreadsheet;\n                              \n                              \n\n                              that.listeSorties.forEach(function(item) {\n                                  var newElement = new Array();\n                                  Indiceline = parseInt(item.position);\n                                  newElement.push(item.Output);\n                                  Arange = getRangeAddress([Indiceline-1, IndiceColoneSortie-1])\n                                  spreadsheet.updateCell({ value: newElement },Arange);\n\n                              });\n\n\n                              DataFinalToBeReplace.forEach(function(item) {\n                                  var newElement = new Array();\n                                  Indiceline = parseInt(item.position);\n                                  newElement.push(item.Output);\n                                  Arange = getRangeAddress([Indiceline-1, IndiceColoneSortie-1])\n                                  spreadsheet.updateCell({ value: newElement },Arange);\n\n                              });\n\n\n\n                              var spreedsheetcomponent = document.getElementById(\"spreedsheetcomponent\");\n                              spreedsheetcomponent.style.display = \"block\";\n\n\n                              var gridElement = document.getElementById(\"gridElement\");\n                              gridElement.style.display = \"none\"; \n\n                              Vue.swal.fire({\n                                title: '<strong><u>Statistic of QuickFill execution</u></strong>',\n                                icon: 'info',\n                                width: 400,\n                                html:\n                                  '<p> Time execution :' + timewastQuickfill + 's <br>' + 'Memory use :' + memoryQuickfill + 'Mo <br>' +'Number of programs :' +  NombreExemples + ' program(s)</p> ',\n\n                                showCloseButton: true,\n                                showCancelButton: true,\n                                focusConfirm: false,\n                                confirmButtonText:\n                                  '<i class=\"fa fa-thumbs-up\"></i> Great!',\n                              });\n\n                            \n                              \n\n\n\n\n\n                              \n\n                            Object.assign(that.$data, that.$options.data());\n                            \n                            \n                            AddElement.set('valuse',NombreExemples);\n                            AddElement2.set('valuse',indiceduprogrammechoisi);\n\n                            let obj = Array.from(AddElement).reduce((obj, [key, value]) => (\n                                                                            Object.assign(obj, { [key]: value })\n                                                                          ), {});\n                            let obj2 = Array.from(AddElement2).reduce((obj, [key, value]) => (\n                                                                            Object.assign(obj, { [key]: value })\n                                                                          ), {});\n\n                              Vue.set(that.lenofprogrammes,0, obj);\n                              Vue.set(that.idporgramme,0, obj2);\n\n                              listedesprogrammes.forEach((element,index) =>{\n                                  \n\n                              newObject.set('ID' , index)\n                              newObject.set('programme' , element)\n                              let obj3 = Array.from(newObject).reduce((obj, [key, value]) => (\n                                              Object.assign(obj, { [key]: value })\n                                            ), {});\n                              listeofObjectElement.push(obj3)\n\n                              Vue.set(that.ListeDesProgrammesRetourner, that.ListeDesProgrammesRetourner.length, element);\n\n                            });\n\n                            grid2.dataSource = listeofObjectElement;\n\n                              \n                            resultcomponent.style.display = \"block\";\n                                    \n\n\n\n                        \n                        \n                        \n                      })\n                      .catch((e) => {\n                        console.log(e);\n                      });\n                  });\n\n              }\n              else if(that.ChoiseQuickFill.choix == 3)\n              {\n\n\n\n\n\n                  setTimeout(function cb() {\n\n\n                        var jsonText1 = JSON.stringify(Array.from(that.listeEntres));\n                        var jsonText3 = JSON.stringify(Array.from(that.ListeElementsEnvoyerQuickFill));\n                        \n                        axios.post(\"http://localhost:8000/QuickFill/manyblocs/QuickExsManyBlock\", {\n\n                        headers: {\n                            'Content-Type': 'application/json',\n                        },\n                        data: {\n                          \n                          DataEntreeBrute : jsonText1, \n                          DataGlobal : jsonText3\n                        }\n                      })\n                      .then((response) => {\n\n\n\n                              \n                              var DataFinalToBeReplace = response.data[\"DataFinalToBeReplace\"];\n                              var IndiceColoneSortie = response.data[\"IndiceColoneSortie\"];\n                              var timewastQuickfill = response.data[\"timewastQuickfill\"];\n                              var memoryQuickfill = response.data[\"memoryQuickfill\"];\n                              var NombreExemples = response.data[\"NombreExemples\"];\n                              var listedesprogrammes = response.data[\"listedesprogrammes\"];\n                              var indiceduprogrammechoisi = response.data[\"indiceduprogrammechoisi\"];\n                              var AddElement =new Map();\n                              var AddElement2 =new Map();\n                              var Indiceline = 0;\n                              var Arange= \"\"\n                              var spreadsheet = that.$refs.spreadsheet;\n                              \n                              \n                              that.listeSorties.forEach(function(item) {\n                                  var newElement = new Array();\n                                  Indiceline = parseInt(item.position);\n                                  newElement.push(item.Output);\n                                  Arange = getRangeAddress([Indiceline-1, IndiceColoneSortie-1])\n                                  spreadsheet.updateCell({ value: newElement },Arange);\n\n                              });\n\n\n                              DataFinalToBeReplace.forEach(function(item) {\n                                  var newElement = new Array();\n                                  Indiceline = parseInt(item.position);\n                                  newElement.push(item.Output);\n                                  Arange = getRangeAddress([Indiceline-1, IndiceColoneSortie-1])\n                                  spreadsheet.updateCell({ value: newElement },Arange);\n\n                              });\n\n\n\n                              var spreedsheetcomponent = document.getElementById(\"spreedsheetcomponent\");\n                              spreedsheetcomponent.style.display = \"block\";\n\n\n                              var gridElement = document.getElementById(\"gridElement\");\n                              gridElement.style.display = \"none\"; \n\n                              Vue.swal.fire({\n                                title: '<strong><u>Statistic of QuickFill execution</u></strong>',\n                                icon: 'info',\n                                width: 400,\n                                html:\n                                  '<p> Time execution :' + timewastQuickfill + 's <br>' + 'Memory use :' + memoryQuickfill + 'Mo <br>' +'Number of programs :' +  NombreExemples + ' program(s)</p> ',\n\n                                showCloseButton: true,\n                                showCancelButton: true,\n                                focusConfirm: false,\n                                confirmButtonText:\n                                  '<i class=\"fa fa-thumbs-up\"></i> Great!',\n                              });\n\n                            \n                              \n\n\n\n\n\n                              \n\n                            Object.assign(that.$data, that.$options.data());\n                            \n                            \n                            AddElement.set('valuse',NombreExemples);\n                            AddElement2.set('valuse',indiceduprogrammechoisi);\n\n                            let obj = Array.from(AddElement).reduce((obj, [key, value]) => (\n                                                                            Object.assign(obj, { [key]: value })\n                                                                          ), {});\n                            let obj2 = Array.from(AddElement2).reduce((obj, [key, value]) => (\n                                                                            Object.assign(obj, { [key]: value })\n                                                                          ), {});\n\n                              Vue.set(that.lenofprogrammes,0, obj);\n                              Vue.set(that.idporgramme,0, obj2);\n\n                              listedesprogrammes.forEach((element,index) =>{\n                                  \n\n                              newObject.set('ID' , index)\n                              newObject.set('programme' , element)\n                              let obj3 = Array.from(newObject).reduce((obj, [key, value]) => (\n                                              Object.assign(obj, { [key]: value })\n                                            ), {});\n                              listeofObjectElement.push(obj3)\n\n                              Vue.set(that.ListeDesProgrammesRetourner, that.ListeDesProgrammesRetourner.length, element);\n\n                            });\n\n                            grid2.dataSource = listeofObjectElement;\n\n                              \n                            resultcomponent.style.display = \"block\";\n                                    \n\n\n\n                        \n                        \n                        \n                      })\n                      .catch((e) => {\n                        console.log(e);\n                      });\n                  });\n\n              }\n\n \n\n        },\n        contextMenuClick: function(args) \n        {\n\n\n              var that = this;\n              var grid = document.getElementsByClassName(\"e-grid\")[0].ej2_instances[0];\n\n              if(that.ChoiseQuickFill.choix == 3)\n              {\n\n\n                    if(args.item.id === 'makeblock') \n                    {       \n\n                          \n                            \n\n                            document.execCommand(\"copy\");\n\n                            setTimeout(async () => \n                            {\n                                  const text = await navigator.clipboard.readText();\n                                  var AddBloc =new Map();\n                                  var InfoBlocMenuDistingue = new Map();\n                                  var AddtoContexMenu = new Map();\n                                  var EtsPresent =  false;\n                                  var idEstPresent = false;\n\n\n\n                                 \n\n\n\n                                  that.ListeOfIdOfCotextMenu.forEach(function (item) {\n\n                                      \n                                      if(item == text)\n                                      {\n\n                                          EtsPresent =  true;\n                                      }\n                                  });\n\n                                  if(EtsPresent)\n                                  {\n\n                                    alert(' Bloc dej creer')\n                                  }\n                                  else\n                                  {\n                                        \n\n\n                                        that.listeElementToupdate.forEach(function (item,index) {\n                                            if(index == parseInt(that.idsortieselectionner.id, 10))\n                                            {\n                                              idEstPresent = true;\n                                            }\n                                        });\n\n                                        if(idEstPresent == false)\n                                        {\n                                              Vue.set(that.listeElementToupdate,parseInt(that.idsortieselectionner.id, 10), 1);\n                                              \n\n\n                                              AddBloc.set('message',text);\n                                              AddBloc.set('NameBloc','b'+that.listeElementToupdate[parseInt(that.idsortieselectionner.id, 10)]+'***'+text);\n\n                                              AddtoContexMenu.set('text' , 'Contient le bloc ' + text);\n                                              AddtoContexMenu.set('target' , '.e-content');\n                                              AddtoContexMenu.set('id' , text);\n\n                                              InfoBlocMenuDistingue.set('text' , 'Contient le bloc ' + text);\n                                              InfoBlocMenuDistingue.set('idligne' , parseInt(that.idsortieselectionner.id, 10));\n\n                                              let obj = Array.from(AddBloc).reduce((obj, [key, value]) => (\n                                                                          Object.assign(obj, { [key]: value })\n                                                                        ), {});\n                                              let obj2 = Array.from(AddtoContexMenu).reduce((obj, [key, value]) => (\n                                                                          Object.assign(obj, { [key]: value }) \n                                                                        ), {});\n                                              \n                                              let obj3 = Array.from(InfoBlocMenuDistingue).reduce((obj, [key, value]) => (\n                                                                          Object.assign(obj, { [key]: value }) \n                                                                        ), {});\n\n                                              grid.contextMenuModule.contextMenu.insertAfter( \n                                                  [obj2], that.contextMenuItems[that.contextMenuItems.length-1].id, true); \n                                            \n                                              \n                                              \n\n                                              Vue.set(that.ListeOfBlocs,that.ListeOfBlocs.length, obj);\n                                              Vue.set(that.ListeOfIdOfCotextMenu,that.ListeOfIdOfCotextMenu.length, text);\n                                              Vue.set(that.ListeMessagesOfCotextMenu,that.ListeMessagesOfCotextMenu.length, obj3);\n                                              \n\n\n                                        }\n                                        else\n                                        {\n\n\n                                             Vue.set(that.listeElementToupdate,parseInt(that.idsortieselectionner.id, 10), that.listeElementToupdate[parseInt(that.idsortieselectionner.id, 10)] + 1);\n\n                                              AddBloc.set('message',text);\n                                              AddBloc.set('NameBloc','b'+that.listeElementToupdate[parseInt(that.idsortieselectionner.id, 10)]+'***'+text);\n\n                                              AddtoContexMenu.set('text' , 'Contient le bloc ' + text);\n                                              AddtoContexMenu.set('target' , '.e-content');\n                                              AddtoContexMenu.set('id' , text);\n\n                                              InfoBlocMenuDistingue.set('text' , 'Contient le bloc ' + text);\n                                              InfoBlocMenuDistingue.set('idligne' , parseInt(that.idsortieselectionner.id, 10));\n\n                                              let obj = Array.from(AddBloc).reduce((obj, [key, value]) => (\n                                                                          Object.assign(obj, { [key]: value })\n                                                                        ), {});\n                                              let obj2 = Array.from(AddtoContexMenu).reduce((obj, [key, value]) => (\n                                                                          Object.assign(obj, { [key]: value }) \n                                                                        ), {});\n                                              \n                                              let obj3 = Array.from(InfoBlocMenuDistingue).reduce((obj, [key, value]) => (\n                                                                          Object.assign(obj, { [key]: value }) \n                                                                        ), {});\n\n                                              grid.contextMenuModule.contextMenu.insertAfter( \n                                                  [obj2], that.contextMenuItems[that.contextMenuItems.length-1].id, true); \n                                            \n                                              \n                                              \n\n                                              Vue.set(that.ListeOfBlocs,that.ListeOfBlocs.length, obj);\n                                              Vue.set(that.ListeOfIdOfCotextMenu,that.ListeOfIdOfCotextMenu.length, text);\n                                              Vue.set(that.ListeMessagesOfCotextMenu,that.ListeMessagesOfCotextMenu.length, obj3);\n\n\n\n                                        }\n\n\n                                  }\n\n                            }, 200);\n                        \n                          \n                    }\n                    else if(args.item.id === 'makeconst')\n                    {\n\n\n\n\n                          document.execCommand(\"copy\");\n\n                            setTimeout(async () => \n                            {\n\n                                  var AddBloc =new Map();\n                                  var EtsPresent =  false;\n                                  var element = new Map();\n                                  var idEstPresent = false;\n\n                                  const text = await navigator.clipboard.readText();\n\n                                  that.ListeOfIdOfCotextMenu.forEach(function (item) {\n\n                                          \n                                          if(item == text)\n                                          {\n\n                                              EtsPresent =  true;\n                                          }\n                                      });\n\n                                      if(EtsPresent)\n                                      {\n\n                                        alert(' Bloc deja creer')\n                                      }\n                                      else\n                                      {\n                                            that.listeElementToupdate.forEach(function (item,index) {\n                                                if(index == parseInt(that.idsortieselectionner.id, 10))\n                                                {\n                                                  idEstPresent = true;\n                                                }\n                                            });\n                                          if(idEstPresent == false)\n                                          {                            \n                                                Vue.set(that.listeElementToupdate,parseInt(that.idsortieselectionner.id, 10), 1);                \n                                            \n                                                \n                                                \n                                                element = new Map();\n\n                                                AddBloc.set('message','Le bloc ' + text + ' est une  constante');\n                                                AddBloc.set('NameBloc','b'+that.listeElementToupdate[parseInt(that.idsortieselectionner.id, 10)]+'***'+text);\n\n                                                  element.set('b'+that.listeElementToupdate[parseInt(that.idsortieselectionner.id, 10)]+'***'+text,\"ConstStr\");\n                                                  element.set('Entrer' , that.listeSorties[parseInt(that.idsortieselectionner.id, 10)].Entrer);\n                                                  element.set('Output' , that.listeSorties[parseInt(that.idsortieselectionner.id, 10)].Output);\n                                                \n\n\n                                                let obj = Array.from(AddBloc).reduce((obj, [key, value]) => (\n                                                                            Object.assign(obj, { [key]: value })\n                                                                          ), {});\n                                                let obj2 = Array.from(element).reduce((obj2, [key, value]) => (\n                                                                              Object.assign(obj2, { [key]: value })\n                                                                            ), {});\n\n\n                                              \n                                                Vue.set(that.ListeOfBlocs,that.ListeOfBlocs.length, obj);\n                                                Vue.set(that.ListeElementsEnvoyerQuickFill, that.ListeElementsEnvoyerQuickFill.length, obj2);\n                                          }\n                                          else\n                                          {\n\n\n                                                    Vue.set(that.listeElementToupdate,parseInt(that.idsortieselectionner.id, 10), that.listeElementToupdate[parseInt(that.idsortieselectionner.id, 10)] + 1);\n                                                \n                                                    \n                                                    \n                                                    element = new Map();\n\n                                                    AddBloc.set('message','Le bloc ' + text + ' est une  constante');\n                                                    AddBloc.set('NameBloc','b'+that.listeElementToupdate[parseInt(that.idsortieselectionner.id, 10)]+'***'+text);\n\n                                                      element.set('b'+that.listeElementToupdate[parseInt(that.idsortieselectionner.id, 10)]+'***'+text,\"ConstStr\");\n                                                      element.set('Entrer' , that.listeSorties[parseInt(that.idsortieselectionner.id, 10)].Entrer);\n                                                      element.set('Output' , that.listeSorties[parseInt(that.idsortieselectionner.id, 10)].Output);\n                                                    \n\n\n                                                    let obj = Array.from(AddBloc).reduce((obj, [key, value]) => (\n                                                                                Object.assign(obj, { [key]: value })\n                                                                              ), {});\n                                                    let obj2 = Array.from(element).reduce((obj2, [key, value]) => (\n                                                                                  Object.assign(obj2, { [key]: value })\n                                                                                ), {});\n\n\n                                                  \n                                                    Vue.set(that.ListeOfBlocs,that.ListeOfBlocs.length, obj);\n                                                    Vue.set(that.ListeElementsEnvoyerQuickFill, that.ListeElementsEnvoyerQuickFill.length, obj2);\n                                          \n                                          }\n                                            \n\n\n\n\n                                      }\n\n\n\n\n                                \n                                  \n                            }, 200);\n\n                    }\n                    else if(that.ListeOfIdOfCotextMenu.some(e => e === args.item.id))\n                    {\n\n                          document.execCommand(\"copy\");\n\n\n\n                            setTimeout(async () => \n                            {\n\n                                  const text = await navigator.clipboard.readText();\n\n                                  that.ListeOfBlocs.forEach(function (item) {\n\n                                      \n                                      if(item.message == args.item.id)\n                                      {\n\n                                          var element = new Map();\n\n                                          element.set(item.NameBloc,text);\n                                          \n                                          element.set('Entrer' , that.listeSorties[parseInt(that.idsortieselectionner.id, 10)].Entrer);\n                                          element.set('Output' , that.listeSorties[parseInt(that.idsortieselectionner.id, 10)].Output);\n                                          console.log(\"test des test  : \" , args.event.target);\n                                          element.set('KeyOfElement' , \"v\" + (parseInt(that.idColoneUtiliser.id)+1));\n\n                                          console.log(\"fffffffffffffffffffffffff : \" , element);\n                                          let obj = Array.from(element).reduce((obj, [key, value]) => (\n                                                                      Object.assign(obj, { [key]: value })\n                                                                    ), {});\n\n                                          Vue.set(that.ListeElementsEnvoyerQuickFill, that.ListeElementsEnvoyerQuickFill.length, obj);\n\n                                          \n                                      }\n                                  });\n\n                                \n                                  \n                            }, 200);\n\n\n                    \n\n\n\n\n                    }\n\n\n\n              }\n              else\n              {\n\n              \n                    if(args.item.id === 'makeblock') \n                    {       \n\n                            \n                            \n\n                            document.execCommand(\"copy\");\n\n                            setTimeout(async () => \n                            {\n                                  const text = await navigator.clipboard.readText();\n                                  var AddBloc =new Map();\n                                  var InfoBlocMenuDistingue = new Map();\n                                  var AddtoContexMenu = new Map();\n                                  var EtsPresent =  false;\n\n\n\n\n\n                                  that.ListeOfIdOfCotextMenu.forEach(function (item) {\n\n                                      \n                                      if(item == text)\n                                      {\n\n                                          EtsPresent =  true;\n                                      }\n                                  });\n\n                                  if(EtsPresent)\n                                  {\n\n                                    alert(' Bloc deja creer')\n                                  }\n                                  else\n                                  {\n                                        that.ElementToUpdate = that.ElementToUpdate +1 ;\n\n                                        AddBloc.set('message',text);\n                                        AddBloc.set('NameBloc','b'+that.ElementToUpdate+'***'+text);\n                                        InfoBlocMenuDistingue.set('text' , 'Contient le bloc ' + text);\n                                        InfoBlocMenuDistingue.set('idligne' , parseInt(that.idsortieselectionner.id, 10));\n                                        \n\n                                        AddtoContexMenu.set('text' , 'Contient le bloc ' + text);\n                                        AddtoContexMenu.set('target' , '.e-content');\n                                        AddtoContexMenu.set('id' , text);\n\n                                        let obj = Array.from(AddBloc).reduce((obj, [key, value]) => (\n                                                                    Object.assign(obj, { [key]: value })\n                                                                  ), {});\n                                        let obj2 = Array.from(AddtoContexMenu).reduce((obj, [key, value]) => (\n                                                                    Object.assign(obj, { [key]: value }) \n                                                                  ), {});\n                                        \n                                        let obj3 = Array.from(InfoBlocMenuDistingue).reduce((obj, [key, value]) => (\n                                                                          Object.assign(obj, { [key]: value }) \n                                                                        ), {});\n\n                                        grid.contextMenuModule.contextMenu.insertAfter( \n                                            [obj2], that.contextMenuItems[that.contextMenuItems.length-1].id, true); \n                                      \n                                        \n                                        \n\n                                        Vue.set(that.ListeOfBlocs,that.ListeOfBlocs.length, obj);\n                                        Vue.set(that.ListeOfIdOfCotextMenu,that.ListeOfIdOfCotextMenu.length, text);\n                                        Vue.set(that.ListeMessagesOfCotextMenu,that.ListeMessagesOfCotextMenu.length, obj3);\n\n\n\n                                  }\n\n                            }, 200);\n                        \n                          \n                    }\n                    else if(args.item.id === 'makeconst')\n                    {\n\n\n\n\n                          document.execCommand(\"copy\");\n\n                            setTimeout(async () => \n                            {\n\n                                  var AddBloc =new Map();\n                                  var EtsPresent =  false;\n\n                                  const text = await navigator.clipboard.readText();\n\n                                  that.ListeOfIdOfCotextMenu.forEach(function (item) {\n\n                                          \n                                          if(item == text)\n                                          {\n\n                                              EtsPresent =  true;\n                                          }\n                                      });\n\n                                      if(EtsPresent)\n                                      {\n\n                                        alert(' Bloc deja creer')\n                                      }\n                                      else\n                                      {\n                                        \n                                        that.ElementToUpdate = that.ElementToUpdate +1 ;\n                                        var element = new Map();\n\n                                        AddBloc.set('message','Le bloc ' + text + ' est une  constante');\n                                        AddBloc.set('NameBloc','b'+that.ElementToUpdate+'***'+text);\n\n                                          element.set('b'+that.ElementToUpdate+'***'+text,\"ConstStr\");\n                                          element.set('Entrer' , that.listeSorties[0].Entrer);\n                                          element.set('Output' , that.listeSorties[0].Output);\n                                        \n\n\n                                        let obj = Array.from(AddBloc).reduce((obj, [key, value]) => (\n                                                                    Object.assign(obj, { [key]: value })\n                                                                  ), {});\n                                        let obj2 = Array.from(element).reduce((obj2, [key, value]) => (\n                                                                      Object.assign(obj2, { [key]: value })\n                                                                    ), {});\n\n\n                                      \n                                        Vue.set(that.ListeOfBlocs,that.ListeOfBlocs.length, obj);\n                                        Vue.set(that.ListeElementsEnvoyerQuickFill, that.ListeElementsEnvoyerQuickFill.length, obj2);\n\n                                        \n\n\n\n\n                                      }\n\n\n\n\n                                \n                                  \n                            }, 200);\n\n                    }\n\n                    else if(that.ListeOfIdOfCotextMenu.some(e => e === args.item.id))\n                    {\n\n                          document.execCommand(\"copy\");\n\n\n\n                            setTimeout(async () => \n                            {\n\n                                  const text = await navigator.clipboard.readText();\n\n                                  that.ListeOfBlocs.forEach(function (item) {\n\n                                      \n                                      if(item.message == args.item.id)\n                                      {\n\n                                          var element = new Map();\n                                          element.set(item.NameBloc,text);\n                                          element.set('Entrer' , that.listeSorties[0].Entrer);\n                                          element.set('Output' , that.listeSorties[0].Output);\n                                           element.set('KeyOfElement' , \"v\" + (parseInt(that.idColoneUtiliser.id)+1));\n                                           console.log(\"fffffffffffffffffffffffff : \" , element);\n                                          let obj = Array.from(element).reduce((obj, [key, value]) => (\n                                                                      Object.assign(obj, { [key]: value })\n                                                                    ), {});\n\n                                          Vue.set(that.ListeElementsEnvoyerQuickFill, that.ListeElementsEnvoyerQuickFill.length, obj);\n\n                                          \n                                      }\n                                  });\n\n                                \n                                  \n                            }, 200);\n\n\n                    \n\n\n\n\n                    }\n\n\n              }\n\n\n\n\n\n        },\n        contextMenuBeforeOpen: function () \n        {    \n                var spreadsheet = this.$refs.spreadsheet;\n                spreadsheet.removeContextMenuItems(['Paste Special'], false);\n        },  /* Fonction qui s'execute avant l'ouverture du menu contextuel de la page d'accueil(spreadsheet) */\n        rowDataBound: function (args) {\n          \n           var that = this;\n           \n           var index = JSON.parse(JSON.stringify(that.idporgramme.slice(0, 1)));\n\n           \n           if (args.data.ID == index[0].valuse)\n           {\n              \n              args.row.style.backgroundColor = \"MistyRose\";\n              //args.row.css(\"backgroundColor\", \"#F3C3C3\");/*custom css applied to the row */\n           }\n\n               \n   \n       },\n       created: function () \n       {\n                    var that = this;  /* permet de manipuler les variables que retourne la fonction data */\n                    var spreadsheet = that.$refs.spreadsheet;\n                    var usedRange = 0;\n                    var indicelignemax = 0;\n                    var indicedecolenmax = 0;\n                    var septsept = 0;\n                    var sheetName = 0; /* nom de la feuille de calcul active */\n                    var IndiceEvolue = 0; \n                    var ChainePlusTest = \"\";\n                    var DataExpDemo =new Map(); /* Contient le jeu de donnes (entre, sortie) */\n                    var resultcomponent = document.getElementById(\"resultatcomponent\"); /* Recupere la grille des resultats */\n                    resultcomponent.style.display = \"none\";\n\n\n\n\n                    spreadsheet.hideRibbonTabs(['Home' , 'Formulas' , 'Data','Insert' , 'View']); /* masque les elements pris en argument sur le ruban */\n                    spreadsheet.addRibbonTabs([  /* ajout les nouveaux menu sur le ruban */\n                          \n                          { header: { text: 'GenerateResult' }, content: \n                            [\n                              \n                                  \n                                /*{ text: 'FLashFill', tooltipText: 'FlashFill',\n                                  click : function() {\n                                    var resultcomponent = document.getElementById(\"resultatcomponent\");\n                                    resultcomponent.style.display = \"none\";\n\n                                      indicedecolenmax = 0;\n                                      indicedecolenmax = 0;\n                                      septsept = 1;\n                                      ChainePlusTest = \"\";\n                                      DataExpDemo =new Map();\n                                      usedRange = spreadsheet.ej2Instances.getActiveSheet().usedRange; //contient la plage activev(indice la derniere ligne, indice derniere colone)\n                                      indicelignemax = usedRange.rowIndex;\n                                      indicedecolenmax = usedRange.colIndex;\n                                      sheetName = spreadsheet.ej2Instances.getActiveSheet().name;\n\n                                      spreadsheet.ej2Instances.getData(sheetName + \"!\"+ getRangeAddress([0, 0, indicelignemax, indicedecolenmax])).then( (cells)=> // recupere les donnes de la plage active et effetue un traitement popur chaque cellule\n                                      {\n\n                                              cells.forEach((cell)=>{ // cells contient l'ensemble de toutes les cellules\n\n                                                if(IndiceEvolue == indicedecolenmax) // IndiceEvolue permet de parcourir les colones \n                                                {\n                                                  \n                                                    // Recuperation de la chaine de sortie s : elle peut etre vide ou non\n                                                    ChainePlusTest = ChainePlusTest.substring(0, ChainePlusTest.length-3) // on surpime la derniere chaine \"+++\" \n\n                                                    if(typeof(cell.value) == \"undefined\")\n                                                    {\n                                                      DataExpDemo = DataExpDemo.set(septsept.toString()+'***'+'' , ChainePlusTest);\n                                                      //septsept contient l'indice de la ligne en cours de traitement\n\n                                                    }\n                                                    else\n                                                    {\n                                                      DataExpDemo = DataExpDemo.set(septsept.toString()+'***'+cell.value,ChainePlusTest);\n                                                      // DataExpDemo est un dico qui contient les exemple d'entree sortie , stocks sur une certaine forme prenqnt en compte le numero de ligne de chaque exp \n                                                    }\n                                                    \n                                                    ChainePlusTest = '';\n                                                    IndiceEvolue = 0;\n                                                    septsept = septsept + 1;\n                                                }\n                                                else\n                                                {\n                                                    // cette partie nous permet de recuperer la chaine d'entre sigma. La recuperation se fait tant qu'on a pa atteint la deniere colone active.\n                                                    if(typeof(cell.value) != \"undefined\")\n                                                    {\n                                                      ChainePlusTest = ChainePlusTest + cell.value + \"+++\"; \n                                                      IndiceEvolue = IndiceEvolue + 1;\n                                                    }\n\n                                                }\n\n                                              });\n            \n                                          });\n\n                                      setTimeout(function cb() {  // setTimeout indique que lq fonction cb() doit s'executer en derniere position \n\n\n                                          var jsonText = JSON.stringify(Array.from(DataExpDemo.entries()));\n                                          \n                                          axios.post(\"http://localhost:8000/FlashFill/sessions/FlashExs\", {\n\n                                          headers: {  // headers permet de definir le type de contenu qu'on veut envoyer : p il s'agit d'un contenu json dans notre cas \n                                              'Content-Type': 'application/json',\n                                          },\n                                          data: {\n                                            \n                                            DataEntree : jsonText  // DataEntree stocke nos dones json , qui sont ensuite traites  au niveau du backend\n                                          }\n                                        })\n                                        .then((response) => {\n\n\n\n                                          if(response.data[\"MessageCles\"] == \"False\")\n                                          {\n                                              Vue.swal.fire({\n                                                    icon: 'error',\n                                                    title: 'Oops...',\n                                                    text: 'FlashFill Do not understant what you want!',\n                                                    footer: '<p>It can be a condition execution problem : <br> Condition for good execution : <br> <ol><li>Your data most have the same structure</li><li>You most have a least one exemple with a output</li></ol><br></p>'\n                                                  });\n\n                                          }\n                                          else\n                                          {\n                                              \n                                                var DataFinalToBeReplace = response.data[\"DataFinalToBeReplace\"];\n                                                var IndiceColoneSortie = response.data[\"IndiceColoneSortie\"];\n                                                var timewastFlasfill = response.data[\"timewastFlasfill\"];\n                                                var NombreExemples = response.data[\"NombreExemples\"];\n                                                var memoryFlasfill = response.data[\"memoryFlasfill\"];\n                                                var Indiceline = 0;\n                                                var Arange= \"\"\n                                                \n\n\n                                                Object.keys(DataFinalToBeReplace).forEach(function(prop) {\n                                                  \n                                                  Indiceline = parseInt(prop);\n                                                  Arange = getRangeAddress([Indiceline-1, IndiceColoneSortie])\n                                                  Arange = Arange.toString().split(\":\")[0]\n                                                  spreadsheet.updateCell({ value: DataFinalToBeReplace[prop] },Arange);\n                                                  \n                                                }); \n\n\n\n                                                  Vue.swal.fire({\n                                                    title: '<strong><u>Statistic of FlashFill execution</u></strong>',\n                                                    icon: 'info',\n                                                    width: 400,\n                                                    html:\n                                                      '<p> Time execution :' + timewastFlasfill + 's <br>' + 'Number of programmes :' + 'Memory use :' + memoryFlasfill + 'Mo <br>' + NombreExemples + ' programme(s)</p> ',\n\n                                                    showCloseButton: true,\n                                                    showCancelButton: true,\n                                                    focusConfirm: false,\n                                                    confirmButtonText:\n                                                      '<i class=\"fa fa-thumbs-up\"></i> Great!',\n                                                  });\n                                      \n                                                \n\n\n\n                                          }\n                                          \n                                          \n                                        \n                                        })\n                                        .catch((e) => {\n                                          console.log(e);\n                                        });\n                                      });\n\n                                } },*/\n                                \n                                \n                                { text: 'QuickFill', tooltipText: 'QuickFill',\n                                click : function() \n                                {\n\n\n\n\n\n\n\n\n                                              indicedecolenmax = 0;\n                                              indicedecolenmax = 0;\n                                              septsept = 1;\n                                              ChainePlusTest = \"\";\n                                              DataExpDemo =new Map();\n                                              usedRange = spreadsheet.ej2Instances.getActiveSheet().usedRange;\n                                              indicelignemax = usedRange.rowIndex;\n                                              indicedecolenmax = usedRange.colIndex;\n                                              Vue.set(that.IndiceColoneSortie , 'id' , indicedecolenmax);\n                                              sheetName = spreadsheet.ej2Instances.getActiveSheet().name;\n\n                                                        \n                                              var grid = document.getElementsByClassName(\"e-grid\")[0].ej2_instances[0]; // recuperation de la Grid\n                                              var Initializer = new Array();\n\n\n                                              var ElementMapInstanceEntree =  new Map();\n                                              var ElementIntermediareMapInstanceEntree =  new Map();\n                                              var ElementMapInstanceSortie =  new Map();\n                                              var ElementMapInstanceSortie2 =  new Map();\n                                              var listechoix = new Array();\n                                              var decoupersortier = new Array();\n                                              var decouperentree = new Array();\n                                              var MessageCles = true;\n                                              var resultcomponent = document.getElementById(\"resultatcomponent\");\n                                              resultcomponent.style.display = \"none\";\n\n                                              grid.dataSource = Initializer;\n                                              grid.columns = Initializer;\n\n                                              spreadsheet.ej2Instances.getData(sheetName + \"!\"+ getRangeAddress([0, 0, indicelignemax, indicedecolenmax])).then( (cells)=>\n                                              {\n\n                                                    cells.forEach((cell)=>{\n\n                                                      if(IndiceEvolue == indicedecolenmax)\n                                                      {\n                                                        \n                                                        \n                                                          ChainePlusTest = ChainePlusTest.substring(0, ChainePlusTest.length-3)\n\n                                                          if(typeof(cell.value) == \"undefined\")\n                                                          {\n                                                              DataExpDemo.set(septsept.toString()+'***'+'' , ChainePlusTest);\n\n                                                          }\n                                                          else\n                                                          {\n                                                              DataExpDemo.set(septsept.toString()+'***'+cell.value, ChainePlusTest);\n                                                          }\n                                                          \n                                                          ChainePlusTest = '';\n                                                          IndiceEvolue = 0;\n                                                          septsept = septsept + 1;\n                                                      }\n                                                      else\n                                                      {\n                                                          \n                                                          if(typeof(cell.value) != \"undefined\")\n                                                          {\n                                                            ChainePlusTest = ChainePlusTest + cell.value + \"+++\"; \n                                                            IndiceEvolue = IndiceEvolue + 1;\n                                                          }\n\n                                                      }\n\n                                                    });\n          \n                                              });\n\n                                              setTimeout(function cb() {\n\n                                                        \n                                                        DataExpDemo.forEach((value, key) => {\n                                                          \n                                                          if(value === \"\")\n                                                          {\n\n                                                              Vue.swal.fire({\n                                                                  icon: 'error',\n                                                                  title: 'Oops...',\n                                                                  text: 'QuickFill Do not understant what you want!',\n                                                                  footer: '<p>It can be a condition execution problem : <br> Condition for good execution : <br> <ol><li>Your data most have the same structure</li><li>You most have a least one exemple with a output</li></ol><br></p>'\n                                                                });\n\n\n                                                              MessageCles = false;\n\n                                                              return;\n\n                                                          }\n                                                          else\n                                                          {\n\n\n                                                                    ElementMapInstanceEntree = new Map();\n                                                                    ElementMapInstanceSortie = new Map();\n                                                                    ElementMapInstanceSortie2 = new Map();\n                                                                    ElementIntermediareMapInstanceEntree =  new Map();\n                                                                    decouperentree = value.split(\"+++\");\n                                                                    decoupersortier = key.split(\"***\");\n                                                                    \n                                                                    \n\n                                                                    if(decoupersortier.length >1 && decoupersortier[1] != \"\")\n                                                                    {\n\n                                                                        if(value != \"\")\n                                                                        {\n\n                                                                            decouperentree.forEach(function (item, index) {\n                                                                              ElementIntermediareMapInstanceEntree.set(\"v\"+(index+1).toString(), item);\n                                                                              ElementMapInstanceSortie.set(\"v\"+(index+1).toString(), item);\n                                                                              \n                                                                            });\n\n\n                                                                            let obj = Array.from(ElementIntermediareMapInstanceEntree).reduce((obj, [key, value]) => (\n                                                                            Object.assign(obj, { [key]: value })\n                                                                          ), {});\n\n\n                                                                            ElementMapInstanceSortie2.set(\"Entrer\" , obj);\n                                                                            ElementMapInstanceSortie.set(\"Output\" , decoupersortier[1]);\n                                                                            ElementMapInstanceSortie2.set(\"Output\" , decoupersortier[1]);\n                                                                            ElementMapInstanceSortie2.set(\"position\" , decoupersortier[0]);\n\n                                                                            listechoix.push(ElementMapInstanceSortie);\n\n                                                                            let obj2 = Array.from(ElementMapInstanceSortie2).reduce((obj, [key, value]) => (\n                                                                            Object.assign(obj, { [key]: value })\n                                                                          ), {});\n\n\n                                                                            Vue.set(that.listeSorties,that.listeSorties.length,obj2)\n\n                                                                        }\n\n\n\n                                                                    }\n                                                                    else\n                                                                    {\n\n                                                                          if(value != \"\")\n                                                                          {\n                                                                            decouperentree.forEach(function (item, index) {\n                                                                              ElementIntermediareMapInstanceEntree.set(\"v\"+(index+1).toString(), item);\n                                                                            });\n                                                                            let obj = Array.from(ElementIntermediareMapInstanceEntree).reduce((obj, [key, value]) => (\n                                                                            Object.assign(obj, { [key]: value })\n                                                                          ), {});\n                                                                            ElementMapInstanceEntree.set(\"Entrer\" , obj);\n                                                                            ElementMapInstanceEntree.set(\"position\" , decoupersortier[0]);\n                                                                            let obj2 = Array.from(ElementMapInstanceEntree).reduce((obj, [key, value]) => (\n                                                                            Object.assign(obj, { [key]: value })\n                                                                          ), {});\n                                                                            Vue.set(that.listeEntres ,that.listeEntres.length,obj2)\n                                                                            \n                                                                          }\n                                                                          \n\n                                                                    }\n\n\n                                                          }\n\n                                                        });\n\n\n\n\n\n                                                          if(MessageCles)\n                                                          {\n\n                                                            if(listechoix.length == 1)\n                                                            {\n\n\n                                                                    setTimeout(function knr() {\n\n\n                                                                                if(MessageCles)\n                                                                                {\n\n                                                                                      var test2 = new Array();\n                                                                                    \n                                                                                      \n                                                                                      var sortieUtiliser = listechoix[0];\n                                                                                      \n\n                                                                                        let obj = Array.from(sortieUtiliser).reduce((obj, [key, value]) => (\n                                                                                                  Object.assign(obj, { [key]: value }) // Be careful! Maps can have non-String keys; object literals can't.\n                                                                                                ), {});\n                                                                                      \n                                                                                        test2.push(obj);                                                  \n                                                                                                                                        \n                                                                                        grid.dataSource = test2;\n\n                                                                                        var spreedsheetcomponent = document.getElementById(\"spreedsheetcomponent\");\n                                                                                        spreedsheetcomponent.style.display = \"none\";\n\n\n                                                                                        var gridElement = document.getElementById(\"gridElement\");\n                                                                                        gridElement.style.display = \"block\"; \n                                                                                }\n                                                                    });\n                                                              \n                                                            }\n                                                            else\n                                                            {\n\n                                                                Vue.swal.fire({\n                                                                      title: 'Que desirer vous faire avec QuickFIll',\n                                                                      html: `\n                                                                                <div class=\"form-check\">\n                                                                                  <input class=\"form-check-input\" type=\"radio\" name=\"exampleRadios\" id=\"exampleRadios1\" value=\"option1\" checked>\n                                                                                  <label class=\"form-check-label\" for=\"exampleRadios1\">\n                                                                                      Faire du filtrage\n                                                                                  </label>\n                                                                                </div>\n                                                                                <div class=\"form-check\">\n                                                                                  <input class=\"form-check-input\" type=\"radio\" name=\"exampleRadios\" id=\"exampleRadios2\" value=\"option2\">\n                                                                                  <label class=\"form-check-label\" for=\"exampleRadios2\">\n                                                                                    Faire des blocs sur pluiseurs exemples\n                                                                                  </label>\n                                                                                </div>\n                                                                      `,\n                                                                      focusConfirm: false,\n                                                                      preConfirm: () => \n                                                                      {\n                                                                        \n                                                                            if (document.getElementById('exampleRadios1').checked)\n                                                                            {\n                                                                                  setTimeout(function knr() {\n\n\n                                                                                                if(MessageCles)\n                                                                                                {\n                                                                                                    \n                                                                                                      var test2 = new Array();\n                                                                                                    \n                                                                                                      \n                                                                                                      var sortieUtiliser = listechoix[0];\n\n                                                                                                      \n\n                                                                                                      let obj = Array.from(sortieUtiliser).reduce((obj, [key, value]) => (\n                                                                                                                  Object.assign(obj, { [key]: value }) // Be careful! Maps can have non-String keys; object literals can't.\n                                                                                                                ), {});\n                                                                                                      \n                                                                                                      test2.push(obj);                                                  \n                                                                                                                                                        \n                                                                                                      grid.dataSource = test2;\n\n                                                                                                      var spreedsheetcomponent = document.getElementById(\"spreedsheetcomponent\");\n                                                                                                      spreedsheetcomponent.style.display = \"none\";\n\n\n                                                                                                      var gridElement = document.getElementById(\"gridElement\");\n                                                                                                      gridElement.style.display = \"block\"; \n\n                                                                                                      Vue.set(that.ChoiseQuickFill, 'choix' , 2);\n                                                                                                }\n                                                                                    });\n\n                                                                            }\n                                                                            else if(document.getElementById('exampleRadios2').checked)\n                                                                            {\n                                                                                \n\n                                                                                    setTimeout(function knr2() {\n\n\n                                                                                                if(MessageCles)\n                                                                                                {\n\n                                                                                                      var test2 = new Array();\n                                                                                                      listechoix.forEach(function (item) \n                                                                                                      {\n                                                                                                        let obj = Array.from(item).reduce((obj, [key, value]) => (\n                                                                                                                  Object.assign(obj, { [key]: value }) // Be careful! Maps can have non-String keys; object literals can't.\n                                                                                                                ), {});\n                                                                                                        test2.push(obj);\n                                                                                                      });\n                                                \n                                                                                                      grid.dataSource = test2;\n\n                                                                                                      var spreedsheetcomponent = document.getElementById(\"spreedsheetcomponent\");\n                                                                                                      spreedsheetcomponent.style.display = \"none\";\n\n\n                                                                                                      var gridElement = document.getElementById(\"gridElement\");\n                                                                                                      gridElement.style.display = \"block\"; \n\n\n\n                                                                                                      Vue.set(that.ChoiseQuickFill, 'choix' , 3);\n                                                                                                }\n                                                                                    });\n                                                                            \n                                                                            \n                                                                            \n\n                                                                            }\n                                                                          \n                                                                        \n                                                                      }\n                                                                  });\n\n\n\n\n                                                            }\n\n\n\n\n                                                          }\n\n                                                                              \n\n                                                    });\n\n\n\n\n\n\n\n\n                                } } ,\n\n\n\n                                { text: 'FLashFillL(simplify))', tooltipText: 'FLashFill(simplify))',\n                                click : function() {\n\n                                    indicedecolenmax = 0;\n                                    indicedecolenmax = 0;\n                                    septsept = 1;\n                                    ChainePlusTest = \"\";\n                                    DataExpDemo =new Map();\n                                    var AddElement =new Map();\n                                    var AddElement2 =new Map();\n                                    var listeofObjectElement =  new Array();\n                                    usedRange = spreadsheet.ej2Instances.getActiveSheet().usedRange;\n                                    indicelignemax = usedRange.rowIndex;\n                                    indicedecolenmax = usedRange.colIndex;\n                                    sheetName = spreadsheet.ej2Instances.getActiveSheet().name;\n                                    var resultcomponent = document.getElementById(\"resultatcomponent\");\n                                    resultcomponent.style.display = \"none\";\n\n                                    spreadsheet.ej2Instances.getData(sheetName + \"!\"+ getRangeAddress([0, 0, indicelignemax, indicedecolenmax])).then( (cells)=>\n                                    {\n\n                                          \n\n                                            cells.forEach((cell)=>{\n\n                                              if(IndiceEvolue == indicedecolenmax)\n                                              {\n                                                \n                                                \n                                                  ChainePlusTest = ChainePlusTest.substring(0, ChainePlusTest.length-3)\n\n                                                  if(typeof(cell.value) == \"undefined\")\n                                                  {\n                                                    DataExpDemo = DataExpDemo.set(septsept.toString()+'***'+'' , ChainePlusTest);\n\n                                                  }\n                                                  else\n                                                  {\n                                                    DataExpDemo = DataExpDemo.set(septsept.toString()+'***'+cell.value,ChainePlusTest);\n                                                  }\n                                                  \n                                                  ChainePlusTest = '';\n                                                  IndiceEvolue = 0;\n                                                  septsept = septsept + 1;\n                                              }\n                                              else\n                                              {\n                                                  \n                                                  if(typeof(cell.value) != \"undefined\")\n                                                  {\n                                                    ChainePlusTest = ChainePlusTest + cell.value + \"+++\"; \n                                                    IndiceEvolue = IndiceEvolue + 1;\n                                                  }\n\n                                              }\n\n                                            });\n          \n                                        });\n\n                                    setTimeout(function cb() {\n\n\n                                        var jsonText = JSON.stringify(Array.from(DataExpDemo.entries()));\n                                        \n                                        axios.post(\"http://localhost:8000/FlashFill/sessions/FlashFreeLoopExs\", {\n\n                                        headers: {\n                                            'Content-Type': 'application/json',\n                                        },\n                                        data: {\n                                          \n                                          DataEntree : jsonText\n                                        }\n                                      })\n                                      .then((response) => {\n\n\n\n                                        if(response.data[\"MessageCles\"] == \"False\")\n                                        {\n                                            Vue.swal.fire({\n                                                  icon: 'error',\n                                                  title: 'Oops...',\n                                                  text: 'FlashFill Do not understant what you want!',\n                                                  footer: '<p>It can be a condition execution problem : <br> Condition for good execution : <br> <ol><li>Your data most have the same structure</li><li>You most have a least one exemple with a output</li></ol><br></p>'\n                                                });\n\n                                        }\n                                        else\n                                        {\n\n                                            \n                                              var DataFinalToBeReplace = response.data[\"DataFinalToBeReplace\"];\n\n                                              \n                                              var IndiceColoneSortie = response.data[\"IndiceColoneSortie\"];\n                                              var timewastFlasfill = response.data[\"timewastFlasfill\"];\n                                              var NombreExemples = response.data[\"NombreExemples\"];\n                                              var memoryFlasfill = response.data[\"memoryFlasfill\"];\n                                              var listedesprogrammes = response.data[\"listedesprogrammes\"];\n                                              var indiceduprogrammechoisi = response.data[\"indiceduprogrammechoisi\"];\n                                              var Indiceline = 0;\n                                              var Arange= \"\";\n                                              var newObject = new Map();\n                                              var grid2 = document.getElementsByClassName(\"e-grid\")[1].ej2_instances[0];\n                                              AddElement.set('valuse',NombreExemples);\n                                              AddElement2.set('valuse',indiceduprogrammechoisi);\n\n                                              \n\n                                              Object.keys(DataFinalToBeReplace).forEach(function(prop) {\n                                                \n                                                Indiceline = parseInt(prop);\n                                                Arange = getRangeAddress([Indiceline-1, IndiceColoneSortie])\n                                                Arange = Arange.toString().split(\":\")[0]\n                                                spreadsheet.updateCell({ value: DataFinalToBeReplace[prop] },Arange);\n                                                \n                                              }); \n\n                                                \n                                              \n\n\n                                               \n                                                \n\n                                                Vue.swal.fire({\n                                                  title: '<strong><u>Statistic of FlashFill (simplify) execution</u></strong>',\n                                                  icon: 'info',\n                                                  width: 400,\n                                                  html:\n                                                    '<p> Execution time:' + timewastFlasfill + 's <br>' + 'Number of programs :' +NombreExemples + ' program(s)<br>'+ 'Memory use :' + memoryFlasfill + 'Mo</p>' ,\n\n                                                  showCloseButton: true,\n                                                  showCancelButton: true,\n                                                  focusConfirm: false,\n                                                  confirmButtonText:\n                                                    '<i class=\"fa fa-thumbs-up\"></i> Great!',\n                                                });\n\n                                                \n                                            \n                                              let obj = Array.from(AddElement).reduce((obj, [key, value]) => (\n                                                                    Object.assign(obj, { [key]: value })\n                                                                  ), {});\n                                              let obj2 = Array.from(AddElement2).reduce((obj, [key, value]) => (\n                                                                    Object.assign(obj, { [key]: value })\n                                                                  ), {});\n                                              \n                                              Object.assign(that.$data, that.$options.data());\n                                              Vue.set(that.lenofprogrammes,0, obj);\n                                              Vue.set(that.idporgramme,0, obj2);\n                                              listedesprogrammes.forEach((element,index) =>{\n                                                  \n\n                                                    newObject.set('ID' , index)\n                                                    newObject.set('programme' , element)\n                                                    let obj3 = Array.from(newObject).reduce((obj, [key, value]) => (\n                                                                    Object.assign(obj, { [key]: value })\n                                                                  ), {});\n                                                    listeofObjectElement.push(obj3)\n\n                                                    Vue.set(that.ListeDesProgrammesRetourner, that.ListeDesProgrammesRetourner.length, element);\n\n                                                    \n\n\n\n\n                                              });\n                                              grid2.dataSource = listeofObjectElement;\n\n                                              var resultcomponent = document.getElementById(\"resultatcomponent\");\n                                              resultcomponent.style.display = \"block\";\n                                    \n                                              \n\n\n\n                                        }\n                                        \n                                        \n                                      \n                                      })\n                                      .catch((e) => {\n                                        console.log(e);\n                                      });\n                                    });\n\n                                } },\n\n\n\n\n\n                            ] \n                            \n                          \n                          \n                          \n                          \n                          }\n                          \n                          \n                          ,{ header: { text: 'Help' }, content: [{ text: 'QuickFill', tooltipText: 'QuickFill',\n                          click : function() {\n\n                                Vue.swal.fire({\n                                      title: '<strong><u>QuicFill Usage example</u></strong>',\n                                      icon: 'info',\n                                      width: 900,\n                                      html:\n                                        '<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/d_elXY2Lcfk\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>',\n                                      showCloseButton: true, /* pour la fermeture du modal */\n                                      showCancelButton: true, /* bouton cancel */\n                                      focusConfirm: false,\n                                      confirmButtonText:\n                                        '<i class=\"fa fa-thumbs-up\"></i> Great!',\n                                    });\n\n\n                          } },\n                          \n                          \n                          { text: 'FlashFill', tooltipText: 'FlashFill',\n                          click : function() {\n\n\n                              Vue.swal.fire({\n                                      title: '<strong><u>FlashFill Usage example</u></strong>',\n                                      icon: 'info',\n                                      width: 900,\n                                      html:\n                                        '<iframe width=\"768\" height=\"360\" src=\"https://www.youtube.com/embed/A7-E6sf6JOc?list=RDQMuK_M4fl3Ds8\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>',\n                                      showCloseButton: true,\n                                      showCancelButton: true,\n                                      focusConfirm: false,\n                                      confirmButtonText:\n                                        '<i class=\"fa fa-thumbs-up\"></i> Great!',\n                                    });\n\n                          } },\n                          \n                          { text: 'About', tooltipText: 'About',\n                          click : function() {\n\n\n                              Vue.swal.fire({\n                                      title: '<strong>About the project</strong>',\n                                      icon: 'info',\n                                      width: 900,\n                                      html:\n                                        '<p>QuicFill project is a project developper by Fokou Vanessa Laure (adress mail) base on the FlashFill algorithme  to test a idea of and iteractive approche using independant bloc approche to generate string progamme base on example</p>',\n                                      showCloseButton: true,\n                                      showCancelButton: true,\n                                      focusConfirm: false,\n                                      confirmButtonText:\n                                        '<i class=\"fa fa-thumbs-up\"></i> Great!',\n                                    });\n                          } },\n                          \n                          ] }]\n                      );\n                        \n                \n            },\n      \n        },\n\n\n\n\n    provide: /* defintion des elements presentes dans la grille */\n    { \n      grid: [ContextMenu, Page], \n    }, \n\n\n\n  }\n</script>\n\n<style>\n  @import \"../node_modules/@syncfusion/ej2-vue-spreadsheet/styles/material.css\";\n  @import '../node_modules/@syncfusion/ej2-base/styles/material.css';  \n  @import '../node_modules/@syncfusion/ej2-buttons/styles/material.css';\n  @import '../node_modules/@syncfusion/ej2-calendars/styles/material.css';    \n  @import '../node_modules/@syncfusion/ej2-dropdowns/styles/material.css';  \n  @import '../node_modules/@syncfusion/ej2-inputs/styles/material.css';  \n  @import '../node_modules/@syncfusion/ej2-navigations/styles/material.css';\n  @import '../node_modules/@syncfusion/ej2-popups/styles/material.css';\n  @import '../node_modules/@syncfusion/ej2-splitbuttons/styles/material.css';\n  @import '../node_modules/@syncfusion/ej2-grids/styles/material.css';\n  @import \"../node_modules/@syncfusion/ej2-spreadsheet/styles/material.css\";\n  @import \"../node_modules/sweetalert2/dist/sweetalert2.min.css\";\n  @import \"../node_modules/@syncfusion/ej2-vue-grids/styles/material.css\";\n</style>\n"]}]}